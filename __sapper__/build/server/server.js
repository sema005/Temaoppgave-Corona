module.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=10)}([function(t,e){t.exports=require("stream")},function(t,e){t.exports=require("fs")},function(t,e){t.exports=require("path")},function(t,e){t.exports=require("zlib")},function(t,e){t.exports=require("url")},function(t,e){t.exports=require("http")},function(t,e){t.exports=require("sirv")},function(t,e){t.exports=require("polka")},function(t,e){t.exports=require("compression")},function(t,e){t.exports=require("https")},function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"get",(function(){return y}));var i={};n.r(i),n.d(i,"get",(function(){return A}));var o=n(6),s=n.n(o),a=n(7),u=n.n(a),c=n(8),h=n.n(c),l=n(1),f=n(2);const p=[{title:"What is Sapper?",slug:"what-is-sapper",html:"\n\t\t\t<p>First, you have to know what <a href='https://svelte.dev'>Svelte</a> is. Svelte is a UI framework with a bold new idea: rather than providing a library that you write code with (like React or Vue, for example), it's a compiler that turns your components into highly optimized vanilla JavaScript. If you haven't already read the <a href='https://svelte.dev/blog/frameworks-without-the-framework'>introductory blog post</a>, you should!</p>\n\n\t\t\t<p>Sapper is a Next.js-style framework (<a href='blog/how-is-sapper-different-from-next'>more on that here</a>) built around Svelte. It makes it embarrassingly easy to create extremely high performance web apps. Out of the box, you get:</p>\n\n\t\t\t<ul>\n\t\t\t\t<li>Code-splitting, dynamic imports and hot module replacement, powered by webpack</li>\n\t\t\t\t<li>Server-side rendering (SSR) with client-side hydration</li>\n\t\t\t\t<li>Service worker for offline support, and all the PWA bells and whistles</li>\n\t\t\t\t<li>The nicest development experience you've ever had, or your money back</li>\n\t\t\t</ul>\n\n\t\t\t<p>It's implemented as Express middleware. Everything is set up and waiting for you to get started, but you keep complete control over the server, service worker, webpack config and everything else, so it's as flexible as you need it to be.</p>\n\t\t"},{title:"How to use Sapper",slug:"how-to-use-sapper",html:"\n\t\t\t<h2>Step one</h2>\n\t\t\t<p>Create a new project, using <a href='https://github.com/Rich-Harris/degit'>degit</a>:</p>\n\n\t\t\t<pre><code>npx degit \"sveltejs/sapper-template#rollup\" my-app\n\t\t\tcd my-app\n\t\t\tnpm install # or yarn!\n\t\t\tnpm run dev\n\t\t\t</code></pre>\n\n\t\t\t<h2>Step two</h2>\n\t\t\t<p>Go to <a href='http://localhost:3000'>localhost:3000</a>. Open <code>my-app</code> in your editor. Edit the files in the <code>src/routes</code> directory or add new ones.</p>\n\n\t\t\t<h2>Step three</h2>\n\t\t\t<p>...</p>\n\n\t\t\t<h2>Step four</h2>\n\t\t\t<p>Resist overdone joke formats.</p>\n\t\t"},{title:"Why the name?",slug:"why-the-name",html:"\n\t\t\t<p>In war, the soldiers who build bridges, repair roads, clear minefields and conduct demolitions — all under combat conditions — are known as <em>sappers</em>.</p>\n\n\t\t\t<p>For web developers, the stakes are generally lower than those for combat engineers. But we face our own hostile environment: underpowered devices, poor network connections, and the complexity inherent in front-end engineering. Sapper, which is short for <strong>S</strong>velte <strong>app</strong> mak<strong>er</strong>, is your courageous and dutiful ally.</p>\n\t\t"},{title:"How is Sapper different from Next.js?",slug:"how-is-sapper-different-from-next",html:"\n\t\t\t<p><a href='https://github.com/zeit/next.js'>Next.js</a> is a React framework from <a href='https://vercel.com/'>Vercel</a>, and is the inspiration for Sapper. There are a few notable differences, however:</p>\n\n\t\t\t<ul>\n\t\t\t\t<li>It's powered by <a href='https://svelte.dev'>Svelte</a> instead of React, so it's faster and your apps are smaller</li>\n\t\t\t\t<li>Instead of route masking, we encode route parameters in filenames. For example, the page you're looking at right now is <code>src/routes/blog/[slug].svelte</code></li>\n\t\t\t\t<li>As well as pages (Svelte components, which render on server or client), you can create <em>server routes</em> in your <code>routes</code> directory. These are just <code>.js</code> files that export functions corresponding to HTTP methods, and receive Express <code>request</code> and <code>response</code> objects as arguments. This makes it very easy to, for example, add a JSON API such as the one <a href='blog/how-is-sapper-different-from-next.json'>powering this very page</a></li>\n\t\t\t\t<li>Links are just <code>&lt;a&gt;</code> elements, rather than framework-specific <code>&lt;Link&gt;</code> components. That means, for example, that <a href='blog/how-can-i-get-involved'>this link right here</a>, despite being inside a blob of HTML, works with the router as you'd expect.</li>\n\t\t\t</ul>\n\t\t"},{title:"How can I get involved?",slug:"how-can-i-get-involved",html:"\n\t\t\t<p>We're so glad you asked! Come on over to the <a href='https://github.com/sveltejs/svelte'>Svelte</a> and <a href='https://github.com/sveltejs/sapper'>Sapper</a> repos, and join us in the <a href='https://svelte.dev/chat'>Discord chatroom</a>. Everyone is welcome, especially you!</p>\n\t\t"}];p.forEach(t=>{t.html=t.html.replace(/^\t{3}/gm,"")});var d=p;const v=JSON.stringify(d.map(t=>({title:t.title,slug:t.slug})));function y(t,e){e.writeHead(200,{"Content-Type":"application/json"}),e.end(v)}const m=new Map;function A(t,e,n){const{slug:r}=t.params;m.has(r)?(e.writeHead(200,{"Content-Type":"application/json"}),e.end(m.get(r))):(e.writeHead(404,{"Content-Type":"application/json"}),e.end(JSON.stringify({message:"Not found"})))}function g(){}d.forEach(t=>{m.set(t.slug,JSON.stringify(t))});function b(t){return t()}function w(){return Object.create(null)}function E(t){t.forEach(b)}new Set;new Set;let C;function T(t){C=t}function I(){if(!C)throw new Error("Function called outside component initialization");return C}Promise.resolve();new Set;new Set;"undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]);const x={'"':"&quot;","'":"&#39;","&":"&amp;","<":"&lt;",">":"&gt;"};function _(t){return String(t).replace(/["'&<>]/g,t=>x[t])}function N(t,e){let n="";for(let r=0;r<t.length;r+=1)n+=e(t[r],r);return n}const S={$$render:()=>""};function k(t,e){if(!t||!t.$$render)throw"svelte:component"===e&&(e+=" this={...}"),new Error(`<${e}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules`);return t}let O,D;function j(t){function e(e,n,r,i){const o=C;T({$$:{on_destroy:O,context:new Map(o?o.$$.context:[]),on_mount:[],before_update:[],after_update:[],callbacks:w()}});const s=t(e,n,r,i);return T(o),s}return{render:(t={},n={})=>{O=[];const r={title:"",head:"",css:new Set},i=e(r,t,{},n);return E(O),{html:i,css:{code:Array.from(r.css).map(t=>t.code).join("\n"),map:null},head:r.title+r.head}},$$render:e}}function R(t,e,n){return null==e||n&&!e?"":` ${t}${!0===e?"":"="+("string"==typeof e?JSON.stringify(_(e)):`"${e}"`)}`}function P(t,e){const n=t.$$;null!==n.fragment&&(E(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}"function"==typeof HTMLElement&&(D=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,n){this[t]=n}$destroy(){P(this,1),this.$destroy=g}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}});const M={code:".spinner.svelte-19eexb2.svelte-19eexb2{width:50px;height:40px;text-align:center;font-size:10px}.spinner.svelte-19eexb2>div.svelte-19eexb2{background-color:white;height:100%;width:6px;display:inline-block;animation:svelte-19eexb2-sk-stretchdelay 1.2s infinite ease-in-out}.spinner.svelte-19eexb2 .rect2.svelte-19eexb2{animation-delay:-1.1s}.spinner.svelte-19eexb2 .rect3.svelte-19eexb2{animation-delay:-1.0s}.spinner.svelte-19eexb2 .rect4.svelte-19eexb2{-webkit-animation-delay:-0.9s;animation-delay:-0.9s}.spinner.svelte-19eexb2 .rect5.svelte-19eexb2{animation-delay:-0.8s}@keyframes svelte-19eexb2-sk-stretchdelay{0%,40%,100%{transform:scaleY(0.4)}20%{transform:scaleY(1.0)}}",map:'{"version":3,"file":"Loader.svelte","sources":["Loader.svelte"],"sourcesContent":["      \\n<div class=\\"spinner\\">\\n  <div class=\\"rect1\\"></div>\\n  <div class=\\"rect2\\"></div>\\n  <div class=\\"rect3\\"></div>\\n  <div class=\\"rect4\\"></div>\\n  <div class=\\"rect5\\"></div>\\n</div>\\n\\n<style>\\n  .spinner {\\n    width: 50px;\\n    height: 40px;\\n    text-align: center;\\n    font-size: 10px;\\n    \\n  }\\n\\n  .spinner > div {\\n    background-color: white;\\n    height: 100%;\\n    width: 6px;\\n    display: inline-block;\\n    animation: sk-stretchdelay 1.2s infinite ease-in-out;\\n  }\\n\\n  .spinner .rect2 {\\n    animation-delay: -1.1s;\\n  }\\n\\n  .spinner .rect3 {\\n    animation-delay: -1.0s;\\n  }\\n\\n  .spinner .rect4 {\\n    -webkit-animation-delay: -0.9s;\\n    animation-delay: -0.9s;\\n  }\\n\\n  .spinner .rect5 {\\n    animation-delay: -0.8s;\\n  }\\n\\n\\n  @keyframes sk-stretchdelay {\\n    0%, 40%, 100% {\\n      transform: scaleY(0.4);\\n    }  20% {\\n      transform: scaleY(1.0);\\n    }\\n  }\\n</style>"],"names":[],"mappings":"AAUE,QAAQ,8BAAC,CAAC,AACR,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,UAAU,CAAE,MAAM,CAClB,SAAS,CAAE,IAAI,AAEjB,CAAC,AAED,uBAAQ,CAAG,GAAG,eAAC,CAAC,AACd,gBAAgB,CAAE,KAAK,CACvB,MAAM,CAAE,IAAI,CACZ,KAAK,CAAE,GAAG,CACV,OAAO,CAAE,YAAY,CACrB,SAAS,CAAE,8BAAe,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,AACtD,CAAC,AAED,uBAAQ,CAAC,MAAM,eAAC,CAAC,AACf,eAAe,CAAE,KAAK,AACxB,CAAC,AAED,uBAAQ,CAAC,MAAM,eAAC,CAAC,AACf,eAAe,CAAE,KAAK,AACxB,CAAC,AAED,uBAAQ,CAAC,MAAM,eAAC,CAAC,AACf,uBAAuB,CAAE,KAAK,CAC9B,eAAe,CAAE,KAAK,AACxB,CAAC,AAED,uBAAQ,CAAC,MAAM,eAAC,CAAC,AACf,eAAe,CAAE,KAAK,AACxB,CAAC,AAGD,WAAW,8BAAgB,CAAC,AAC1B,EAAE,CAAE,GAAG,CAAE,IAAI,AAAC,CAAC,AACb,SAAS,CAAE,OAAO,GAAG,CAAC,AACxB,CAAC,AAAE,GAAG,AAAC,CAAC,AACN,SAAS,CAAE,OAAO,GAAG,CAAC,AACxB,CAAC,AACH,CAAC"}'};var L=j((t,e,n,r)=>(t.css.add(M),'<div class="spinner svelte-19eexb2"><div class="rect1 svelte-19eexb2"></div>\n  <div class="rect2 svelte-19eexb2"></div>\n  <div class="rect3 svelte-19eexb2"></div>\n  <div class="rect4 svelte-19eexb2"></div>\n  <div class="rect5 svelte-19eexb2"></div>\n</div>'));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var B=function(){return(B=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function U(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var V=function(t,e){return(V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var q=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e};
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=F(t[n],e[n]));return t}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var G=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function z(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var $=function(t){function e(n,r){var i=t.call(this,r)||this;return i.code=n,i.name="FirebaseError",Object.setPrototypeOf(i,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,W.prototype.create),i}return function(t,e){function n(){this.constructor=t}V(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e}(Error),W=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?Q(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new $(i,a),c=0,h=Object.keys(r);c<h.length;c++){var l=h[c];"_"!==l.slice(-1)&&(l in u&&console.warn('Overwriting FirebaseError base field "'+l+'" can cause unexpected behavior.'),u[l]=r[l])}return u},t}();function Q(t,e){return t.replace(H,(function(t,n){var r=e[n];return null!=r?r.toString():"<"+n+"?>"}))}var H=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Y(t,e){return Object.prototype.hasOwnProperty.call(t,e)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
!function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=h^u&(c^h),s=1518500249):(o=u^c^h,s=1859775393):r<60?(o=u&c|h&(u|c),s=2400959708):(o=u^c^h,s=3395469782);i=(a<<5|a>>>27)+o+l+s+n[r]&4294967295;l=h,h=c,c=4294967295&(u<<30|u>>>2),u=a,a=i}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t}}();function X(t,e){var n=new Z(t,e);return n.subscribe.bind(n)}var Z=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=J),void 0===r.error&&(r.error=J),void 0===r.complete&&(r.complete=J);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function J(){}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tt=function(){return(tt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function et(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function nt(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function rt(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function it(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}var ot=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),st=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new G;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=tt({identifier:"[DEFAULT]",optional:!1},t),n=e.identifier,r=e.optional,i=this.normalizeInstanceIdentifier(n);try{var o=this.getOrInitializeService(i);if(!o){if(r)return null;throw Error("Service "+this.name+" is not available")}return o}catch(t){if(r)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t))try{this.getOrInitializeService("[DEFAULT]")}catch(t){}try{for(var r=rt(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=it(i.value,2),s=o[0],a=o[1],u=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService(u);a.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return et(this,void 0,void 0,(function(){var t;return nt(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return"[DEFAULT]"===t?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t}();
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var at,ut=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new st(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function ct(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ht,lt=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(ht||(ht={}));var ft,pt={debug:ht.DEBUG,verbose:ht.VERBOSE,info:ht.INFO,warn:ht.WARN,error:ht.ERROR,silent:ht.SILENT},dt=ht.INFO,vt=((at={})[ht.DEBUG]="log",at[ht.VERBOSE]="log",at[ht.INFO]="info",at[ht.WARN]="warn",at[ht.ERROR]="error",at),yt=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=vt[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,ct(["["+i+"]  "+t.name+":"],n))}},mt=function(){function t(t){this.name=t,this._logLevel=dt,this._logHandler=yt,this._userLogHandler=null,lt.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in ht))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,ct([this,ht.DEBUG],t)),this._logHandler.apply(this,ct([this,ht.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,ct([this,ht.VERBOSE],t)),this._logHandler.apply(this,ct([this,ht.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,ct([this,ht.INFO],t)),this._logHandler.apply(this,ct([this,ht.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,ct([this,ht.WARN],t)),this._logHandler.apply(this,ct([this,ht.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,ct([this,ht.ERROR],t)),this._logHandler.apply(this,ct([this,ht.ERROR],t))},t}();function At(t){var e="string"==typeof t?pt[t]:t;lt.forEach((function(t){t.logLevel=e}))}var gt,bt=((ft={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",ft["bad-app-name"]="Illegal App name: '{$appName}",ft["duplicate-app"]="Firebase App named '{$appName}' already exists",ft["app-deleted"]="Firebase App named '{$appName}' already deleted",ft["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",ft["invalid-log-argument"]="First argument to `onLog` must be null or a function.",ft),wt=new W("app","Firebase",bt),Et=((gt={})["@firebase/app"]="fire-core",gt["@firebase/analytics"]="fire-analytics",gt["@firebase/auth"]="fire-auth",gt["@firebase/database"]="fire-rtdb",gt["@firebase/functions"]="fire-fn",gt["@firebase/installations"]="fire-iid",gt["@firebase/messaging"]="fire-fcm",gt["@firebase/performance"]="fire-perf",gt["@firebase/remote-config"]="fire-rc",gt["@firebase/storage"]="fire-gcs",gt["@firebase/firestore"]="fire-fst",gt["fire-js"]="fire-js",gt["firebase-wrapper"]="fire-js-all",gt),Ct=new mt("@firebase/app"),Tt=function(){function t(t,e,n){var r,i,o=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=F(void 0,t),this.container=new ut(e.name),this._addComponent(new ot("app",(function(){return o}),"PUBLIC"));try{for(var s=U(this.firebase_.INTERNAL.components.values()),a=s.next();!a.done;a=s.next()){var u=a.value;this._addComponent(u)}}catch(t){r={error:t}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){Ct.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw wt.create("app-deleted",{appName:this.name_})},t}();Tt.prototype.name&&Tt.prototype.options||Tt.prototype.delete||console.log("dc");
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function It(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name="[DEFAULT]");var s=o.name;if("string"!=typeof s||!s)throw wt.create("bad-app-name",{appName:String(s)});if(Y(e,s))throw wt.create("duplicate-app",{appName:s});var a=new t(n,o,r);return e[s]=a,a},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=Et[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&a&&u.push("and"),a&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void Ct.warn(u.join(" "))}o(new ot(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:At,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw wt.create("invalid-log-argument",{appName:name});!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=pt[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:ht[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=lt;r<i.length;r++){n(i[r])}}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e)},apps:null,SDK_VERSION:"7.14.3",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(!Y(e,t=t||"[DEFAULT]"))throw wt.create("no-app",{appName:t});return e[t]}function o(o){var s,a,u=o.name;if(n.has(u))return Ct.debug("There were multiple attempts to register component "+u+"."),"PUBLIC"===o.type?r[u]:null;if(n.set(u,o),"PUBLIC"===o.type){var c=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[u])throw wt.create("invalid-app-argument",{appName:u});return t[u]()};void 0!==o.serviceProps&&F(c,o.serviceProps),r[u]=c,t.prototype[u]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,u);return n.apply(this,o.multipleInstances?t:[])}}try{for(var h=U(Object.keys(e)),l=h.next();!l.done;l=h.next()){var f=l.value;e[f]._addComponent(o)}}catch(t){s={error:t}}finally{try{l&&!l.done&&(a=h.return)&&a.call(h)}finally{if(s)throw s.error}}return"PUBLIC"===o.type?r[u]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xt=function t(){var e=It(Tt);return e.INTERNAL=B(B({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){F(e,t)},createSubscribe:X,ErrorFactory:W,deepExtend:F}),e}(),_t=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
if("object"==typeof self&&self.self===self&&void 0!==self.firebase){Ct.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Nt=self.firebase.SDK_VERSION;Nt&&Nt.indexOf("LITE")>=0&&Ct.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var St=xt.initializeApp;xt.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return z()&&Ct.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),St.apply(void 0,t)};var kt,Ot,Dt=xt;(kt=Dt).INTERNAL.registerComponent(new ot("platform-logger",(function(t){return new _t(t)}),"PRIVATE")),kt.registerVersion("@firebase/app","0.6.3",Ot),kt.registerVersion("fire-js","");var jt=Dt;
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
jt.registerVersion("firebase","7.14.4","app");
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var Rt=function(t,e){return(Rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Pt(t,e){function n(){this.constructor=t}Rt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function Mt(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function Lt(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function Bt(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
function Ut(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Vt,qt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ft=Ft||{},Gt=qt||self;function Kt(){}function zt(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function $t(t){var e=zt(t);return"array"==e||"object"==e&&"number"==typeof t.length}function Wt(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Qt="closure_uid_"+(1e9*Math.random()>>>0),Ht=0;function Yt(t,e,n){return t.call.apply(t.bind,arguments)}function Xt(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Zt(t,e,n){return(Zt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Yt:Xt).apply(null,arguments)}function Jt(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var te=Date.now||function(){return+new Date};function ee(t,e){function n(){}n.prototype=e.prototype,t.M=e.prototype,t.prototype=new n,t.prototype.constructor=t}function ne(){this.j=this.j,this.i=this.i}ne.prototype.j=!1,ne.prototype.da=function(){if(!this.j&&(this.j=!0,this.C(),0))(function(t){Object.prototype.hasOwnProperty.call(t,Qt)&&t[Qt]||(t[Qt]=++Ht)})(this)},ne.prototype.C=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var re=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},ie=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function oe(t){return Array.prototype.concat.apply([],arguments)}function se(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function ae(t){return/^[\s\xa0]*$/.test(t)}var ue,ce=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function he(t,e){return-1!=t.indexOf(e)}function le(t,e){return t<e?-1:t>e?1:0}t:{var fe=Gt.navigator;if(fe){var pe=fe.userAgent;if(pe){ue=pe;break t}}ue=""}function de(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function ve(t){var e={};for(var n in t)e[n]=t[n];return e}var ye="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function me(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<ye.length;o++)n=ye[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Ae(t){return Ae[" "](t),t}Ae[" "]=Kt;var ge,be,we=he(ue,"Opera"),Ee=he(ue,"Trident")||he(ue,"MSIE"),Ce=he(ue,"Edge"),Te=Ce||Ee,Ie=he(ue,"Gecko")&&!(he(ue.toLowerCase(),"webkit")&&!he(ue,"Edge"))&&!(he(ue,"Trident")||he(ue,"MSIE"))&&!he(ue,"Edge"),xe=he(ue.toLowerCase(),"webkit")&&!he(ue,"Edge");function _e(){var t=Gt.document;return t?t.documentMode:void 0}t:{var Ne="",Se=(be=ue,Ie?/rv:([^\);]+)(\)|;)/.exec(be):Ce?/Edge\/([\d\.]+)/.exec(be):Ee?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(be):xe?/WebKit\/(\S+)/.exec(be):we?/(?:Version)[ \/]?(\S+)/.exec(be):void 0);if(Se&&(Ne=Se?Se[1]:""),Ee){var ke=_e();if(null!=ke&&ke>parseFloat(Ne)){ge=String(ke);break t}}ge=Ne}var Oe,De={};function je(t){return function(t,e){var n=De;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=ce(String(ge)).split("."),r=ce(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=le(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||le(0==s[2].length,0==a[2].length)||le(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}if(Gt.document&&Ee){var Re=_e();Oe=Re||(parseInt(ge,10)||void 0)}else Oe=void 0;var Pe=Oe,Me=!Ee||9<=Number(Pe),Le=Ee&&!je("9"),Be=function(){if(!Gt.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Gt.addEventListener("test",Kt,e),Gt.removeEventListener("test",Kt,e)}catch(t){}return t}();function Ue(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Ve(t,e){if(Ue.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Ie){t:{try{Ae(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:qe[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Ue.prototype.b=function(){this.defaultPrevented=!0},ee(Ve,Ue);var qe={2:"touch",3:"pen",4:"mouse"};Ve.prototype.b=function(){Ve.M.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Le)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var Fe="closure_listenable_"+(1e6*Math.random()|0),Ge=0;function Ke(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.aa=i,this.key=++Ge,this.V=this.X=!1}function ze(t){t.V=!0,t.listener=null,t.proxy=null,t.src=null,t.aa=null}function $e(t){this.src=t,this.a={},this.b=0}function We(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=re(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ze(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function Qe(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.V&&o.listener==e&&o.capture==!!n&&o.aa==r)return i}return-1}$e.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Qe(t,e,r,i);return-1<s?(e=t[s],n||(e.X=!1)):((e=new Ke(e,this.src,o,!!r,i)).X=n,t.push(e)),e};var He="closure_lm_"+(1e6*Math.random()|0),Ye={};function Xe(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}return r=sn(r),e&&e[Fe]?e.sa(n,r,Wt(i)?!!i.capture:!!i,o):Ze(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Xe(t,e[o],n,r,i);return null}return n=sn(n),t&&t[Fe]?t.ra(e,n,Wt(r)?!!r.capture:!!r,i):Ze(t,e,n,!1,r,i)}function Ze(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Wt(i)?!!i.capture:!!i;if(s&&!Me)return null;var a=rn(t);if(a||(t[He]=a=new $e(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=nn,e=Me?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Be||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(tn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Je(t){if("number"!=typeof t&&t&&!t.V){var e=t.src;if(e&&e[Fe])We(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(tn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=rn(e))?(We(n,t),0==n.b&&(n.src=null,e[He]=null)):ze(t)}}}function tn(t){return t in Ye?Ye[t]:Ye[t]="on"+t}function en(t,e){var n=t.listener,r=t.aa||t.src;return t.X&&Je(t),n.call(r,e)}function nn(t,e){if(t.V)return!0;if(!Me){if(!e)t:{e=["window","event"];for(var n=Gt,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return en(t,e=new Ve(e,this))}return en(t,new Ve(e,this))}function rn(t){return(t=t[He])instanceof $e?t:null}var on="__closure_events_fn_"+(1e9*Math.random()>>>0);function sn(t){return"function"==zt(t)?t:(t[on]||(t[on]=function(e){return t.handleEvent(e)}),t[on])}function an(){ne.call(this),this.c=new $e(this),this.J=this,this.A=null}function un(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.V&&s.capture==n){var a=s.listener,u=s.aa||s.src;s.X&&We(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}ee(an,ne),an.prototype[Fe]=!0,(Vt=an.prototype).addEventListener=function(t,e,n,r){Xe(this,t,e,n,r)},Vt.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=Wt(i)?!!i.capture:!!i,r=sn(r),e&&e[Fe]?(e=e.c,(n=String(n).toString())in e.a&&(-1<(r=Qe(s=e.a[n],r,i,o))&&(ze(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--)))):e&&(e=rn(e))&&(n=e.a[n.toString()],e=-1,n&&(e=Qe(n,r,i,o)),(r=-1<e?n[e]:null)&&Je(r))}(this,t,e,n,r)},Vt.dispatchEvent=function(t){var e,n=this.A;if(n)for(e=[];n;n=n.A)e.push(n);n=this.J;var r=t.type||t;if("string"==typeof t)t=new Ue(t,n);else if(t instanceof Ue)t.target=t.target||n;else{var i=t;me(t=new Ue(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.a=e[o];i=un(s,r,!0,t)&&i}if(i=un(s=t.a=n,r,!0,t)&&i,i=un(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=un(s=t.a=e[o],r,!1,t)&&i;return i},Vt.C=function(){if(an.M.C.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)ze(n[r]);delete e.a[t],e.b--}}this.A=null},Vt.ra=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},Vt.sa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var cn=Gt.JSON.stringify;function hn(){this.b=this.a=null}var ln,fn=new(function(){function t(t,e,n){this.f=n,this.c=t,this.g=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new dn}),(function(t){t.reset()}),100);function pn(){var t=An,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function dn(){this.next=this.b=this.a=null}function vn(t){Gt.setTimeout((function(){throw t}),0)}function yn(t,e){ln||function(){var t=Gt.Promise.resolve(void 0);ln=function(){t.then(gn)}}(),mn||(ln(),mn=!0),An.add(t,e)}hn.prototype.add=function(t,e){var n=fn.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},dn.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},dn.prototype.reset=function(){this.next=this.b=this.a=null};var mn=!1,An=new hn;function gn(){for(var t;t=pn();){try{t.a.call(t.b)}catch(t){vn(t)}var e=fn;e.g(t),e.b<e.f&&(e.b++,t.next=e.a,e.a=t)}mn=!1}function bn(t,e){an.call(this),this.b=t||1,this.a=e||Gt,this.f=Zt(this.Ua,this),this.g=te()}function wn(t){t.Z=!1,t.L&&(t.a.clearTimeout(t.L),t.L=null)}function En(t,e,n){if("function"==zt(t))n&&(t=Zt(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Zt(t.handleEvent,t)}return 2147483647<Number(e)?-1:Gt.setTimeout(t,e||0)}function Cn(t,e,n){ne.call(this),this.f=null!=n?Zt(t,n):t,this.c=e,this.b=Zt(this.Pa,this),this.a=[]}function Tn(t){t.T=En(t.b,t.c),t.f.apply(null,t.a)}function In(t){ne.call(this),this.b=t,this.a={}}ee(bn,an),(Vt=bn.prototype).Z=!1,Vt.L=null,Vt.Ua=function(){if(this.Z){var t=te()-this.g;0<t&&t<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-t):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.Z&&(wn(this),this.start()))}},Vt.start=function(){this.Z=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=te())},Vt.C=function(){bn.M.C.call(this),wn(this),delete this.a},ee(Cn,ne),(Vt=Cn.prototype).ba=!1,Vt.T=null,Vt.Ia=function(t){this.a=arguments,this.T?this.ba=!0:Tn(this)},Vt.C=function(){Cn.M.C.call(this),this.T&&(Gt.clearTimeout(this.T),this.T=null,this.ba=!1,this.a=[])},Vt.Pa=function(){this.T=null,this.ba&&(this.ba=!1,Tn(this))},ee(In,ne);var xn=[];function _n(t,e,n,r){Array.isArray(n)||(n&&(xn[0]=n.toString()),n=xn);for(var i=0;i<n.length;i++){var o=Xe(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Nn(t){de(t.a,(function(t,e){this.a.hasOwnProperty(e)&&Je(t)}),t),t.a={}}function Sn(){}In.prototype.C=function(){In.M.C.call(this),Nn(this)},In.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var kn=null;function On(){return kn=kn||new an}function Dn(t){Ue.call(this,"serverreachability",t)}function jn(t){var e=On();e.dispatchEvent(new Dn(e,t))}function Rn(t){Ue.call(this,"statevent",t)}function Pn(t){var e=On();e.dispatchEvent(new Rn(e,t))}function Mn(t){Ue.call(this,"timingevent",t)}function Ln(t,e){if("function"!=zt(t))throw Error("Fn must not be null and must be a function");return Gt.setTimeout((function(){t()}),e)}ee(Dn,Ue),ee(Rn,Ue),ee(Mn,Ue);var Bn={NO_ERROR:0,Va:1,bb:2,ab:3,Ya:4,$a:5,cb:6,za:7,TIMEOUT:8,gb:9},Un={Xa:"complete",kb:"success",Aa:"error",za:"abort",ib:"ready",jb:"readystatechange",TIMEOUT:"timeout",eb:"incrementaldata",hb:"progress",Za:"downloadprogress",lb:"uploadprogress"};function Vn(){}function qn(t){var e;return(e=t.a)||(e=t.a={}),e}function Fn(){}Vn.prototype.a=null;var Gn,Kn={OPEN:"a",Wa:"b",Aa:"c",fb:"d"};function zn(){Ue.call(this,"d")}function $n(){Ue.call(this,"c")}function Wn(){}function Qn(t,e,n){this.g=t,this.W=e,this.U=n||1,this.G=new In(this),this.N=Hn,t=Te?125:void 0,this.O=new bn(t),this.m=null,this.b=!1,this.j=this.A=this.f=this.B=this.s=this.P=this.h=null,this.i=[],this.a=null,this.w=0,this.c=this.v=null,this.H=-1,this.l=!1,this.J=0,this.D=null,this.o=this.R=this.F=!1}ee(zn,Ue),ee($n,Ue),ee(Wn,Vn),Gn=new Wn;var Hn=45e3,Yn={},Xn={};function Zn(t,e,n){t.B=1,t.f=br(dr(e)),t.j=n,t.F=!0,Jn(t,null)}function Jn(t,e){t.s=te(),nr(t),t.A=dr(t.f);var n=t.A,r=t.U;Array.isArray(r)||(r=[String(r)]),jr(n.b,"t",r),t.w=0,t.a=Ti(t.g,t.g.w?e:null),0<t.J&&(t.D=new Cn(Zt(t.ya,t,t.a),t.J)),_n(t.G,t.a,"readystatechange",t.Sa),e=t.m?ve(t.m):{},t.j?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.$(t.A,t.v,t.j,e)):(t.v="GET",t.a.$(t.A,t.v,null,e)),jn(1)}function tr(t,e,n){for(var r=!0;!t.l&&t.w<n.length;){var i=er(t,n);if(i==Xn){4==e&&(t.c=4,Pn(14),r=!1);break}if(i==Yn){t.c=4,Pn(15),r=!1;break}ar(t,i)}4==e&&0==n.length&&(t.c=1,Pn(16),r=!1),t.b=t.b&&r,r||(sr(t),or(t))}function er(t,e){var n=t.w,r=e.indexOf("\n",n);return-1==r?Xn:(n=Number(e.substring(n,r)),isNaN(n)?Yn:(r+=1)+n>e.length?Xn:(e=e.substr(r,n),t.w=r+n,e))}function nr(t){t.P=te()+t.N,rr(t,t.N)}function rr(t,e){if(null!=t.h)throw Error("WatchDog timer not null");t.h=Ln(Zt(t.Qa,t),e)}function ir(t){t.h&&(Gt.clearTimeout(t.h),t.h=null)}function or(t){0==t.g.u||t.l||gi(t.g,t)}function sr(t){ir(t);var e=t.D;e&&"function"==typeof e.da&&e.da(),t.D=null,wn(t.O),Nn(t.G),t.a&&(e=t.a,t.a=null,e.abort(),e.da())}function ar(t,e){try{var n=t.g;if(0!=n.u&&(n.a==t||Vr(n.b,t)))if(n.A=t.H,!t.o&&Vr(n.b,t)&&3==n.u){try{var r=n.ja.a.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.i){if(n.a){if(!(n.a.s+3e3<t.s))break t;Ai(n),n.a.cancel(),n.a=null}mi(n),Pn(18)}}else n.ia=i[1],0<n.ia-n.G&&37500>i[2]&&n.U&&0==n.m&&!n.l&&(n.l=Ln(Zt(n.Na,n),6e3));if(1>=Ur(n.b)&&n.O){try{n.O()}catch(t){}n.O=void 0}}else wi(n,11)}else if((t.o||n.a==t)&&Ai(n),!ae(e))for(e=r=n.ja.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.G=i[0],i=i[1],2==n.u)if("c"==i[0]){n.B=i[1],n.R=i[2];var o=i[3];null!=o&&(n.oa=o);var s=i[5];null!=s&&"number"==typeof s&&0<s&&(n.D=1.5*s);var a=n,u=t.a;if(u){var c=u.a?u.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(c){var h=a.b;!h.a&&(he(c,"spdy")||he(c,"quic")||he(c,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(qr(h,h.b),h.b=null))}if(a.s){var l=u.a?u.a.getResponseHeader("X-HTTP-Session-Id"):null;l&&(a.ha=l,gr(a.v,a.s,l))}}n.u=3,n.c&&n.c.na();var f=t;if((a=n).ea=Ci(a,a.w?a.R:null,a.P),f.o){Fr(a.b,f);var p=f,d=a.D;d&&p.setTimeout(d),p.h&&(ir(p),nr(p)),a.a=f}else yi(a);0<n.f.length&&fi(n)}else"stop"!=i[0]&&"close"!=i[0]||wi(n,7);else 3==n.u&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?wi(n,7):ci(n):"noop"!=i[0]&&n.c&&n.c.ma(i),n.m=0);jn(4)}catch(t){}}function ur(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if($t(t)||"string"==typeof t)ie(t,e,void 0);else{if(t.K&&"function"==typeof t.K)var n=t.K();else if(t.I&&"function"==typeof t.I)n=void 0;else if($t(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.I&&"function"==typeof t.I)return t.I();if("string"==typeof t)return t.split("");if($t(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function cr(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof cr)for(n=t.K(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function hr(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];lr(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)lr(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function lr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Vt=Qn.prototype).setTimeout=function(t){this.N=t},Vt.Sa=function(t){t=t.target;var e=this.D;e&&3==oi(t)?e.Ia():this.ya(t)},Vt.ya=function(t){try{if(t==this.a)t:{var e=oi(this.a),n=this.a.qa(),r=this.a.S();if(!(3>e||3==e&&!Te&&!this.a.Y())){this.l||4!=e||7==n||jn(8==n||0>=r?3:2),ir(this);var i=this.a.S();this.H=i;var o=this.a.Y();if(this.b=200==i){if(this.R&&!this.o){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ae(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.c=3,Pn(12),sr(this),or(this);break t}this.o=!0,ar(this,u)}this.F?(tr(this,e,o),Te&&this.b&&3==e&&(_n(this.G,this.O,"tick",this.Ra),this.O.start())):ar(this,o),4==e&&sr(this),this.b&&!this.l&&(4==e?gi(this.g,this):(this.b=!1,nr(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.c=3,Pn(12)):(this.c=0,Pn(13)),sr(this),or(this)}}}catch(t){}},Vt.Ra=function(){if(this.a){var t=oi(this.a),e=this.a.Y();this.w<e.length&&(ir(this),tr(this,t,e),this.b&&4!=t&&nr(this))}},Vt.cancel=function(){this.l=!0,sr(this)},Vt.Qa=function(){this.h=null;var t=te();0<=t-this.P?(2!=this.B&&(jn(3),Pn(17)),sr(this),this.c=2,or(this)):rr(this,this.P-t)},(Vt=cr.prototype).I=function(){hr(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},Vt.K=function(){return hr(this),this.a.concat()},Vt.get=function(t,e){return lr(this.b,t)?this.b[t]:e},Vt.set=function(t,e){lr(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},Vt.forEach=function(t,e){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var fr=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function pr(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof pr){this.a=void 0!==e?e:t.a,vr(this,t.f),this.j=t.j,yr(this,t.c),mr(this,t.h),this.g=t.g,e=t.b;var n=new Sr;n.c=e.c,e.a&&(n.a=new cr(e.a),n.b=e.b),Ar(this,n),this.i=t.i}else t&&(n=String(t).match(fr))?(this.a=!!e,vr(this,n[1]||"",!0),this.j=wr(n[2]||""),yr(this,n[3]||"",!0),mr(this,n[4]),this.g=wr(n[5]||"",!0),Ar(this,n[6]||"",!0),this.i=wr(n[7]||"")):(this.a=!!e,this.b=new Sr(null,this.a))}function dr(t){return new pr(t)}function vr(t,e,n){t.f=n?wr(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function yr(t,e,n){t.c=n?wr(e,!0):e}function mr(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Ar(t,e,n){e instanceof Sr?(t.b=e,function(t,e){e&&!t.f&&(kr(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Or(this,e),jr(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=Er(e,_r)),t.b=new Sr(e,t.a))}function gr(t,e,n){t.b.set(e,n)}function br(t){return gr(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^te()).toString(36)),t}function wr(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Er(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Cr),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Cr(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}pr.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Er(e,Tr,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Er(e,Tr,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Er(n,"/"==n.charAt(0)?xr:Ir,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Er(n,Nr)),t.join("")};var Tr=/[#\/\?@]/g,Ir=/[#\?:]/g,xr=/[#\?]/g,_r=/[#\?@]/g,Nr=/#/g;function Sr(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function kr(t){t.a||(t.a=new cr,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Or(t,e){kr(t),e=Rr(t,e),lr(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,lr((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&hr(t)))}function Dr(t,e){return kr(t),e=Rr(t,e),lr(t.a.b,e)}function jr(t,e,n){Or(t,e),0<n.length&&(t.c=null,t.a.set(Rr(t,e),se(n)),t.b+=n.length)}function Rr(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Pr(t,e){this.b=t,this.a=e}function Mr(t){this.g=t||Lr,Gt.PerformanceNavigationTiming?t=0<(t=Gt.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(Gt.ca&&Gt.ca.ua&&Gt.ca.ua()&&Gt.ca.ua().mb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}(Vt=Sr.prototype).add=function(t,e){kr(this),this.c=null,t=Rr(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},Vt.forEach=function(t,e){kr(this),this.a.forEach((function(n,r){ie(n,(function(n){t.call(e,n,r,this)}),this)}),this)},Vt.K=function(){kr(this);for(var t=this.a.I(),e=this.a.K(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Vt.I=function(t){kr(this);var e=[];if("string"==typeof t)Dr(this,t)&&(e=oe(e,this.a.get(Rr(this,t))));else{t=this.a.I();for(var n=0;n<t.length;n++)e=oe(e,t[n])}return e},Vt.set=function(t,e){return kr(this),this.c=null,Dr(this,t=Rr(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},Vt.get=function(t,e){return t&&0<(t=this.I(t)).length?String(t[0]):e},Vt.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.K(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.I(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Lr=10;function Br(t){return!!t.b||!!t.a&&t.a.size>=t.f}function Ur(t){return t.b?1:t.a?t.a.size:0}function Vr(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function qr(t,e){t.a?t.a.add(e):t.b=e}function Fr(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Gr(t){var e,n;if(null!=t.b)return t.c.concat(t.b.i);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=Ut(t.a.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.i)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return se(t.c)}function Kr(){}function zr(){this.a=new Kr}function $r(t,e,n){var r=n||"";try{ur(t,(function(t,n){var i=t;Wt(t)&&(i=cn(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function Wr(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}Mr.prototype.cancel=function(){var t,e;if(this.c=Gr(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Ut(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Kr.prototype.stringify=function(t){return Gt.JSON.stringify(t,void 0)},Kr.prototype.parse=function(t){return Gt.JSON.parse(t,void 0)};var Qr=Gt.JSON.parse;function Hr(t){an.call(this),this.headers=new cr,this.G=t||null,this.b=!1,this.s=this.a=null,this.D="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.H=Yr,this.B=this.F=!1}ee(Hr,an);var Yr="",Xr=/^https?$/i,Zr=["POST","PUT"];function Jr(t){return"content-type"==t.toLowerCase()}function ti(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,ei(t),ri(t)}function ei(t){t.v||(t.v=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function ni(t){if(t.b&&void 0!==Ft&&(!t.s[1]||4!=oi(t)||2!=t.S()))if(t.l&&4==oi(t))En(t.va,0,t);else if(t.dispatchEvent("readystatechange"),4==oi(t)){t.b=!1;try{var e,n=t.S();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.D).match(fr)[1]||null;if(!o&&Gt.self&&Gt.self.location){var s=Gt.self.location.protocol;o=s.substr(0,s.length-1)}i=!Xr.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var a=2<oi(t)?t.a.statusText:""}catch(t){a=""}t.f=a+" ["+t.S()+"]",ei(t)}}finally{ri(t)}}}function ri(t,e){if(t.a){ii(t);var n=t.a,r=t.s[0]?Kt:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){}}}function ii(t){t.a&&t.B&&(t.a.ontimeout=null),t.m&&(Gt.clearTimeout(t.m),t.m=null)}function oi(t){return t.a?t.a.readyState:0}function si(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return de(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):gr(t,e,n))}function ai(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function ui(t){this.f=[],this.R=this.ea=this.v=this.P=this.a=this.ha=this.s=this.N=this.h=this.F=this.j=null,this.Fa=this.H=0,this.Ca=ai("failFast",!1,t),this.U=this.l=this.i=this.g=this.c=null,this.W=!0,this.A=this.ia=this.G=-1,this.J=this.m=this.o=0,this.Ba=ai("baseRetryDelayMs",5e3,t),this.Ga=ai("retryDelaySeedMs",1e4,t),this.Da=ai("forwardChannelMaxRetries",2,t),this.ga=ai("forwardChannelRequestTimeoutMs",2e4,t),this.Ea=t&&t.nb||void 0,this.D=void 0,this.w=t&&t.supportsCrossDomainXhr||!1,this.B="",this.b=new Mr(t&&t.concurrentRequestLimit),this.ja=new zr,this.fa=t&&t.fastHandshake||!1,t&&t.forceLongPolling&&(this.W=!1),this.O=void 0}function ci(t){if(hi(t),3==t.u){var e=t.H++,n=dr(t.v);gr(n,"SID",t.B),gr(n,"RID",e),gr(n,"TYPE","terminate"),di(t,n),(e=new Qn(t,e,void 0)).B=2,e.f=br(dr(n)),n=!1,Gt.navigator&&Gt.navigator.sendBeacon&&(n=Gt.navigator.sendBeacon(e.f.toString(),"")),!n&&Gt.Image&&((new Image).src=e.f,n=!0),n||(e.a=Ti(e.g,null),e.a.$(e.f)),e.s=te(),nr(e)}Ei(t)}function hi(t){t.a&&(t.a.cancel(),t.a=null),t.i&&(Gt.clearTimeout(t.i),t.i=null),Ai(t),t.b.cancel(),t.g&&("number"==typeof t.g&&Gt.clearTimeout(t.g),t.g=null)}function li(t,e){t.f.push(new Pr(t.Fa++,e)),3==t.u&&fi(t)}function fi(t){Br(t.b)||t.g||(t.g=!0,yn(t.xa,t),t.o=0)}function pi(t,e){var n;n=e?e.W:t.H++;var r=dr(t.v);gr(r,"SID",t.B),gr(r,"RID",n),gr(r,"AID",t.G),di(t,r),t.h&&t.j&&si(r,t.h,t.j),n=new Qn(t,n,t.o+1),null===t.h&&(n.m=t.j),e&&(t.f=e.i.concat(t.f)),e=vi(t,n,1e3),n.setTimeout(Math.round(.5*t.ga)+Math.round(.5*t.ga*Math.random())),qr(t.b,n),Zn(n,r,e)}function di(t,e){t.c&&ur({},(function(t,n){gr(e,n,t)}))}function vi(t,e,n){n=Math.min(t.f.length,n);var r=t.c?Zt(t.c.Ha,t.c,t):null;t:for(var i=t.f,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,h=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{$r(h,s,"req"+c+"_")}catch(t){r&&r(h)}}if(a){r=s.join("&");break t}}return t=t.f.splice(0,n),e.i=t,r}function yi(t){t.a||t.i||(t.J=1,yn(t.wa,t),t.m=0)}function mi(t){return!(t.a||t.i||3<=t.m)&&(t.J++,t.i=Ln(Zt(t.wa,t),bi(t,t.m)),t.m++,!0)}function Ai(t){null!=t.l&&(Gt.clearTimeout(t.l),t.l=null)}function gi(t,e){var n=null;if(t.a==e){Ai(t),t.a=null;var r=2}else{if(!Vr(t.b,e))return;n=e.i,Fr(t.b,e),r=1}if(t.A=e.H,0!=t.u)if(e.b)if(1==r){n=e.j?e.j.length:0,e=te()-e.s;var i=t.o;(r=On()).dispatchEvent(new Mn(r,n,e,i)),fi(t)}else yi(t);else if(3==(i=e.c)||0==i&&0<t.A||!(1==r&&function(t,e){return!(Ur(t.b)>=t.b.f-(t.g?1:0))&&(t.g?(t.f=e.i.concat(t.f),!0):!(1==t.u||2==t.u||t.o>=(t.Ca?0:t.Da))&&(t.g=Ln(Zt(t.xa,t,e),bi(t,t.o)),t.o++,!0))}(t,e)||2==r&&mi(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:wi(t,5);break;case 4:wi(t,10);break;case 3:wi(t,6);break;default:wi(t,2)}}function bi(t,e){var n=t.Ba+Math.floor(Math.random()*t.Ga);return t.c||(n*=2),n*e}function wi(t,e){if(2==e){var n=null;t.c&&(n=null);var r=Zt(t.Ta,t);n||(n=new pr("//www.google.com/images/cleardot.gif"),Gt.location&&"http"==Gt.location.protocol||vr(n,"https"),br(n)),function(t,e){var n=new Sn;if(Gt.Image){var r=new Image;r.onload=Jt(Wr,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Jt(Wr,n,r,"TestLoadImage: error",!1,e),r.onabort=Jt(Wr,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Jt(Wr,n,r,"TestLoadImage: timeout",!1,e),Gt.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else Pn(2);t.u=0,t.c&&t.c.la(e),Ei(t),hi(t)}function Ei(t){t.u=0,t.A=-1,t.c&&(0==Gr(t.b).length&&0==t.f.length||(t.b.c.length=0,se(t.f),t.f.length=0),t.c.ka())}function Ci(t,e,n){var r=function(t){return t instanceof pr?dr(t):new pr(t,void 0)}(n);if(""!=r.c)e&&yr(r,e+"."+r.c),mr(r,r.h);else{var i=Gt.location;r=function(t,e,n,r){var i=new pr(null,void 0);return t&&vr(i,t),e&&yr(i,e),n&&mr(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.N&&de(t.N,(function(t,e){gr(r,e,t)})),e=t.s,n=t.ha,e&&n&&gr(r,e,n),gr(r,"VER",t.oa),di(t,r),r}function Ti(t,e){if(e&&!t.w)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Hr(t.Ea)).F=t.w,e}function Ii(){}function xi(){if(Ee&&!(10<=Number(Pe)))throw Error("Environmental error: no available transport.")}function _i(t,e){an.call(this),this.a=new ui(e),this.l=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.j=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.pa&&(t?t["X-WebChannel-Client-Profile"]=e.pa:t={"X-WebChannel-Client-Profile":e.pa}),this.a.F=t,(t=e&&e.httpHeadersOverwriteParam)&&!ae(t)&&(this.a.h=t),this.h=e&&e.supportsCrossDomainXhr||!1,this.g=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ae(e)&&(this.a.s=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new ki(this)}function Ni(t){zn.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Si(){$n.call(this),this.status=1}function ki(t){this.a=t}(Vt=Hr.prototype).$=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+t);e=e?e.toUpperCase():"GET",this.D=t,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.G?qn(this.G):qn(Gn),this.a.onreadystatechange=Zt(this.va,this);try{this.w=!0,this.a.open(e,String(t),!0),this.w=!1}catch(t){return void ti(this,t)}t=n||"";var i=new cr(this.headers);r&&ur(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=Jr,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.K()),n=Gt.FormData&&t instanceof Gt.FormData,!(0<=re(Zr,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.H&&(this.a.responseType=this.H),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{ii(this),0<this.o&&((this.B=function(t){return Ee&&je(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Zt(this.ta,this)):this.m=En(this.ta,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){ti(this,t)}},Vt.ta=function(){void 0!==Ft&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},Vt.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),ri(this))},Vt.C=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),ri(this,!0)),Hr.M.C.call(this)},Vt.va=function(){this.j||(this.w||this.l||this.g?ni(this):this.Oa())},Vt.Oa=function(){ni(this)},Vt.S=function(){try{return 2<oi(this)?this.a.status:-1}catch(t){return-1}},Vt.Y=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},Vt.Ja=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Qr(e)}},Vt.qa=function(){return this.h},Vt.Ma=function(){return"string"==typeof this.f?this.f:String(this.f)},(Vt=ui.prototype).oa=8,Vt.u=1,Vt.xa=function(t){if(this.g)if(this.g=null,1==this.u){if(!t){this.H=Math.floor(1e5*Math.random());var e,n=new Qn(this,t=this.H++,void 0),r=this.j;if(this.F&&(r?me(r=ve(r),this.F):r=this.F),null===this.h&&(n.m=r),this.fa)t:{for(var i=e=0;i<this.f.length;i++){var o=this.f[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.f.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=vi(this,n,e),gr(i=dr(this.v),"RID",t),gr(i,"CVER",22),this.s&&gr(i,"X-HTTP-Session-Id",this.s),di(this,i),this.h&&r&&si(i,this.h,r),qr(this.b,n),this.fa?(gr(i,"$req",e),gr(i,"SID","null"),n.R=!0,Zn(n,i,null)):Zn(n,i,e),this.u=2}}else 3==this.u&&(t?pi(this,t):0==this.f.length||Br(this.b)||pi(this))},Vt.wa=function(){this.i=null,this.a=new Qn(this,"rpc",this.J),null===this.h&&(this.a.m=this.j),this.a.J=0;var t=dr(this.ea);gr(t,"RID","rpc"),gr(t,"SID",this.B),gr(t,"CI",this.U?"0":"1"),gr(t,"AID",this.G),di(this,t),gr(t,"TYPE","xmlhttp"),this.h&&this.j&&si(t,this.h,this.j),this.D&&this.a.setTimeout(this.D);var e=this.a,n=this.R;e.B=1,e.f=br(dr(t)),e.j=null,e.F=!0,Jn(e,n)},Vt.Na=function(){null!=this.l&&(this.l=null,this.a.cancel(),this.a=null,mi(this),Pn(19))},Vt.Ta=function(t){Pn(t?2:1)},(Vt=Ii.prototype).na=function(){},Vt.ma=function(){},Vt.la=function(){},Vt.ka=function(){},Vt.Ha=function(){},xi.prototype.a=function(t,e){return new _i(t,e)},ee(_i,an),(Vt=_i.prototype).addEventListener=function(t,e,n,r){_i.M.addEventListener.call(this,t,e,n,r)},Vt.removeEventListener=function(t,e,n,r){_i.M.removeEventListener.call(this,t,e,n,r)},Vt.Ka=function(){this.a.c=this.f,this.h&&(this.a.w=!0);var t=this.a,e=this.l,n=this.b||void 0;Pn(0),t.P=e,t.N=n||{},t.U=t.W,t.v=Ci(t,null,t.P),fi(t)},Vt.close=function(){ci(this.a)},Vt.La=function(t){if("string"==typeof t){var e={};e.__data__=t,li(this.a,e)}else this.g?((e={}).__data__=cn(t),li(this.a,e)):li(this.a,t)},Vt.C=function(){this.a.c=null,delete this.f,ci(this.a),delete this.a,_i.M.C.call(this)},ee(Ni,zn),ee(Si,$n),ee(ki,Ii),ki.prototype.na=function(){this.a.dispatchEvent("a")},ki.prototype.ma=function(t){this.a.dispatchEvent(new Ni(t))},ki.prototype.la=function(t){this.a.dispatchEvent(new Si(t))},ki.prototype.ka=function(){this.a.dispatchEvent("b")},xi.prototype.createWebChannel=xi.prototype.a,_i.prototype.send=_i.prototype.La,_i.prototype.open=_i.prototype.Ka,_i.prototype.close=_i.prototype.close,Bn.NO_ERROR=0,Bn.TIMEOUT=8,Bn.HTTP_ERROR=6,Un.COMPLETE="complete",Fn.EventType=Kn,Kn.OPEN="a",Kn.CLOSE="b",Kn.ERROR="c",Kn.MESSAGE="d",an.prototype.listen=an.prototype.ra,Hr.prototype.listenOnce=Hr.prototype.sa,Hr.prototype.getLastError=Hr.prototype.Ma,Hr.prototype.getLastErrorCode=Hr.prototype.qa,Hr.prototype.getStatus=Hr.prototype.S,Hr.prototype.getResponseJson=Hr.prototype.Ja,Hr.prototype.getResponseText=Hr.prototype.Y,Hr.prototype.send=Hr.prototype.$;var Oi={createWebChannelTransport:function(){return new xi},ErrorCode:Bn,EventType:Un,WebChannel:Fn,XhrIo:Hr},Di=Oi.createWebChannelTransport,ji=Oi.ErrorCode,Ri=Oi.EventType,Pi=Oi.WebChannel,Mi=Oi.XhrIo,Li=jt.SDK_VERSION,Bi=function(){function t(t){this.uid=t}return t.prototype.t=function(){return null!=this.uid},t.prototype.s=function(){return this.t()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bi.UNAUTHENTICATED=new Bi(null),Bi.i=new Bi("google-credentials-uid"),Bi.h=new Bi("first-party-uid");
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ui={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Vi=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Pt(e,t),e}(Error),qi=function(t,e){this.user=e,this.type="OAuth",this.o={},this.o.Authorization="Bearer "+t},Fi=function(){function t(){this.u=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype._=function(){},t.prototype.l=function(t){this.u=t,t(Bi.UNAUTHENTICATED)},t.prototype.T=function(){this.u=null},t}(),Gi=function(){function t(t){var e=this;this.I=null,this.currentUser=Bi.UNAUTHENTICATED,this.R=!1,this.A=0,this.u=null,this.forceRefresh=!1,this.I=function(){e.A++,e.currentUser=e.m(),e.R=!0,e.u&&e.u(e.currentUser)},this.A=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.I):(this.I(null),t.get().then((function(t){e.auth=t,e.I&&e.auth.addAuthTokenListener(e.I)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.A,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){if(t.A!==e)throw new Vi(Ui.ABORTED,"getToken aborted due to token change.");return n?(Hs("string"==typeof n.accessToken),new qi(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype._=function(){this.forceRefresh=!0},t.prototype.l=function(t){this.u=t,this.R&&t(this.currentUser)},t.prototype.T=function(){this.auth&&this.auth.removeAuthTokenListener(this.I),this.I=null,this.u=null},t.prototype.m=function(){var t=this.auth&&this.auth.getUid();return Hs(null===t||"string"==typeof t),new Bi(t)},t}(),Ki=function(){function t(t,e){this.P=t,this.V=e,this.type="FirstParty",this.user=Bi.h}return Object.defineProperty(t.prototype,"o",{get:function(){var t={"X-Goog-AuthUser":this.V},e=this.P.auth.g([]);return e&&(t.Authorization=e),t},enumerable:!0,configurable:!0}),t}(),zi=function(){function t(t,e){this.P=t,this.V=e}return t.prototype.getToken=function(){return Promise.resolve(new Ki(this.P,this.V))},t.prototype.l=function(t){t(Bi.h)},t.prototype.T=function(){},t.prototype._=function(){},t}(),$i=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Vi(Ui.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Vi(Ui.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Vi(Ui.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Vi(Ui.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.p=function(t){return this.seconds===t.seconds?Zs(this.nanoseconds,t.nanoseconds):Zs(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Wi=function(){function t(t){this.timestamp=t}return t.v=function(e){return new t(e)},t.min=function(){return new t(new $i(0,0))},t.prototype.S=function(t){return this.timestamp.p(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.D=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.C=function(){return this.timestamp},t}(),Qi=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Qs(),void 0===n?n=t.length-e:n>t.length-e&&Qs(),this.segments=t,this.offset=e,this.F=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.F},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.N(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.k(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.$=function(t){return t=void 0===t?1:t,this.k(this.segments,this.offset+t,this.length-t)},t.prototype.M=function(){return this.k(this.segments,this.offset,this.length-1)},t.prototype.L=function(){return this.segments[this.offset]},t.prototype.O=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.B=function(){return 0===this.length},t.prototype.q=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.U=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.W=function(){return this.segments.slice(this.offset,this.limit())},t.N=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Hi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Pt(e,t),e.prototype.k=function(t,n,r){return new e(t,n,r)},e.prototype.j=function(){return this.W().join("/")},e.prototype.toString=function(){return this.j()},e.K=function(t){if(t.indexOf("//")>=0)throw new Vi(Ui.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new e(t.split("/").filter((function(t){return t.length>0})))},e}(Qi);Hi.G=new Hi([]);var Yi=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Xi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Pt(e,t),e.prototype.k=function(t,n,r){return new e(t,n,r)},e.H=function(t){return Yi.test(t)},e.prototype.j=function(){return this.W().map((function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.H(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.j()},e.prototype.Y=function(){return 1===this.length&&"__name__"===this.get(0)},e.J=function(){return new e(["__name__"])},e.X=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Vi(Ui.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Vi(Ui.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Vi(Ui.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Vi(Ui.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e}(Qi);Xi.G=new Xi([]);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Zi=function(){function t(t){this.path=t}return t.Z=function(e){return new t(Hi.K(e).$(5))},t.prototype.tt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Hi.N(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.N=function(t,e){return Hi.N(t.path,e.path)},t.et=function(t){return t.length%2==0},t.st=function(e){return new t(new Hi(e.slice()))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ji(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function to(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function eo(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zi.EMPTY=new Zi(new Hi([]));var no=function(){function t(t){this.it=t}return t.fromBase64String=function(e){return new t(qs.nt().atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return qs.nt().btoa(this.it)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.it)},t.prototype.rt=function(){return 2*this.it.length},t.prototype.S=function(t){return Zs(this.it,t.it)},t.prototype.isEqual=function(t){return this.it===t.it},t}();function ro(t){return null==t}function io(t){return-0===t&&1/t==-1/0}function oo(t){return"number"==typeof t&&Number.isInteger(t)&&!io(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function so(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ao(t){var e=yo(t.mapValue.fields.__local_write_time__.timestampValue);return new $i(e.seconds,e.nanos)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */no.ht=new no("");var uo=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function co(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?so(t)?4:10:Qs()}function ho(t,e){var n=co(t);if(n!==co(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ao(t).isEqual(ao(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=yo(t.timestampValue),r=yo(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Ao(t.bytesValue).isEqual(Ao(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return mo(t.geoPointValue.latitude)===mo(e.geoPointValue.latitude)&&mo(t.geoPointValue.longitude)===mo(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return mo(t.integerValue)===mo(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=mo(t.doubleValue),r=mo(e.doubleValue);return n===r?io(n)===io(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Js(t.arrayValue.values||[],e.arrayValue.values||[],ho);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Ji(n)!==Ji(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!ho(n[i],r[i])))return!1;return!0}(t,e);default:return Qs()}}function lo(t,e){return void 0!==(t.values||[]).find((function(t){return ho(t,e)}))}function fo(t,e){var n=co(t),r=co(e);if(n!==r)return Zs(n,r);switch(n){case 0:return 0;case 1:return Zs(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=mo(t.integerValue||t.doubleValue),r=mo(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return po(t.timestampValue,e.timestampValue);case 4:return po(ao(t),ao(e));case 5:return Zs(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Ao(t),r=Ao(e);return n.S(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Zs(n[i],r[i]);if(0!==o)return o}return Zs(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Zs(mo(t.latitude),mo(e.latitude));return 0!==n?n:Zs(mo(t.longitude),mo(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=fo(n[i],r[i]);if(o)return o}return Zs(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Zs(r[s],o[s]);if(0!==a)return a;var u=fo(n[r[s]],i[o[s]]);if(0!==u)return u}return Zs(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Qs()}}function po(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Zs(t,e);var n=yo(t),r=yo(e),i=Zs(n.seconds,r.seconds);return 0!==i?i:Zs(n.nanos,r.nanos)}function vo(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(t){var e=yo(t);return"time("+e.seconds+","+e.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Ao(e.bytesValue).toBase64():"referenceValue"in e?(r=e.referenceValue,Zi.Z(r).toString()):"geoPointValue"in e?"geo("+(n=e.geoPointValue).latitude+","+n.longitude+")":"arrayValue"in e?function(e){for(var n="[",r=!0,i=0,o=e.values||[];i<o.length;i++){var s=o[i];r?r=!1:n+=",",n+=t(s)}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var n="{",r=!0,i=0,o=Object.keys(e.fields||{}).sort();i<o.length;i++){var s=o[i];r?r=!1:n+=",",n+=s+":"+t(e.fields[s])}return n+"}"}(e.mapValue):Qs();var n,r}(t)}function yo(t){if(Hs(!!t),"string"==typeof t){var e=0,n=uo.exec(t);if(Hs(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:mo(t.seconds),nanos:mo(t.nanos)}}function mo(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Ao(t){return"string"==typeof t?no.fromBase64String(t):no.fromUint8Array(t)}function go(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.j()}}function bo(t){return!!t&&"integerValue"in t}function wo(t){return!!t&&"arrayValue"in t}function Eo(t){return!!t&&"nullValue"in t}function Co(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function To(t){return!!t&&"mapValue"in t}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Io=function(){function t(){}return t.prototype.ot=function(t,e){return function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(e,t)},t.prototype.at=function(t,e){return e},t.prototype.ut=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t},t}();Io.instance=new Io;var xo=function(){function t(t){this.elements=t}return t.prototype.ot=function(t,e){return this.apply(t)},t.prototype.at=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=So(t),n=function(t){e.some((function(e){return ho(e,t)}))||e.push(t)},r=0,i=this.elements;r<i.length;r++)n(i[r]);return{arrayValue:{values:e}}},t.prototype.ut=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t&&Js(this.elements,e.elements,ho)},t}(),_o=function(){function t(t){this.elements=t}return t.prototype.ot=function(t,e){return this.apply(t)},t.prototype.at=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=So(t),n=function(t){e=e.filter((function(e){return!ho(e,t)}))},r=0,i=this.elements;r<i.length;r++)n(i[r]);return{arrayValue:{values:e}}},t.prototype.ut=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t&&Js(this.elements,e.elements,ho)},t}(),No=function(){function t(t,e){this.serializer=t,this.ct=e}return t.prototype.ot=function(t,e){var n=this.ut(t),r=this.asNumber(n)+this.asNumber(this.ct);return bo(n)&&bo(this.ct)?this.serializer._t(r):this.serializer.lt(r)},t.prototype.at=function(t,e){return e},t.prototype.ut=function(t){return bo(e=t)||function(t){return!!t&&"doubleValue"in t}(e)?t:{integerValue:0};var e},t.prototype.isEqual=function(e){return e instanceof t&&ho(this.ct,e.ct)},t.prototype.asNumber=function(t){return mo(t.integerValue||t.doubleValue)},t}();function So(t){return wo(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ko=function(){function t(t){this.fields=t,t.sort(Xi.N)}return t.prototype.dt=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].q(t))return!0;return!1},t.prototype.isEqual=function(t){return Js(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Oo=function(){function t(t,e){this.field=t,this.transform=e}return t.prototype.isEqual=function(t){return this.field.isEqual(t.field)&&this.transform.isEqual(t.transform)},t}(),Do=function(t,e){this.version=t,this.transformResults=e},jo=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.ft=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"Tt",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),t.prototype.Et=function(t){return void 0!==this.updateTime?t instanceof $o&&t.version.isEqual(this.updateTime):void 0===this.exists||this.exists===t instanceof $o},t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}(),Ro=function(){function t(){}return t.prototype.It=function(t){},t.wt=function(t){return t instanceof $o?t.version:Wi.min()},t}(),Po=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).key=e,i.value=n,i.Rt=r,i.type=0,i}return Pt(e,t),e.prototype.at=function(t,e){this.It(t);var n=e.version;return new $o(this.key,n,this.value,{hasCommittedMutations:!0})},e.prototype.ot=function(t,e,n){if(this.It(t),!this.Rt.Et(t))return t;var r=Ro.wt(t);return new $o(this.key,r,this.value,{At:!0})},e.prototype.Pt=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.value.isEqual(t.value)&&this.Rt.isEqual(t.Rt)},e}(Ro),Mo=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this)||this).key=e,o.data=n,o.Vt=r,o.Rt=i,o.type=1,o}return Pt(e,t),e.prototype.at=function(t,e){if(this.It(t),!this.Rt.Et(t))return new Qo(this.key,e.version);var n=this.gt(t);return new $o(this.key,e.version,n,{hasCommittedMutations:!0})},e.prototype.ot=function(t,e,n){if(this.It(t),!this.Rt.Et(t))return t;var r=Ro.wt(t),i=this.gt(t);return new $o(this.key,r,i,{At:!0})},e.prototype.Pt=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.Vt.isEqual(t.Vt)&&this.Rt.isEqual(t.Rt)},e.prototype.gt=function(t){var e;return e=t instanceof $o?t.data():Vo.empty(),this.pt(e)},e.prototype.pt=function(t){var e=this,n=new qo(t);return this.Vt.fields.forEach((function(t){if(!t.B()){var r=e.data.field(t);null!==r?n.set(t,r):n.delete(t)}})),n.yt()},e}(Ro),Lo=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.fieldTransforms=n,r.type=2,r.Rt=jo.exists(!0),r}return Pt(e,t),e.prototype.at=function(t,e){if(this.It(t),Hs(null!=e.transformResults),!this.Rt.Et(t))return new Qo(this.key,e.version);var n=this.bt(t),r=this.vt(t,e.transformResults),i=e.version,o=this.St(n.data(),r);return new $o(this.key,i,o,{hasCommittedMutations:!0})},e.prototype.ot=function(t,e,n){if(this.It(t),!this.Rt.Et(t))return t;var r=this.bt(t),i=this.Dt(n,t,e),o=this.St(r.data(),i);return new $o(this.key,r.version,o,{At:!0})},e.prototype.Pt=function(t){for(var e=null,n=0,r=this.fieldTransforms;n<r.length;n++){var i=r[n],o=t instanceof $o?t.field(i.field):void 0,s=i.transform.ut(o||null);null!=s&&(e=null==e?(new qo).set(i.field,s):e.set(i.field,s))}return e?e.yt():null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&Js(this.fieldTransforms,t.fieldTransforms,(function(t,e){return t.isEqual(e)}))&&this.Rt.isEqual(t.Rt)},e.prototype.bt=function(t){return t},e.prototype.vt=function(t,e){var n=[];Hs(this.fieldTransforms.length===e.length);for(var r=0;r<e.length;r++){var i=this.fieldTransforms[r],o=i.transform,s=null;t instanceof $o&&(s=t.field(i.field)),n.push(o.at(s,e[r]))}return n},e.prototype.Dt=function(t,e,n){for(var r=[],i=0,o=this.fieldTransforms;i<o.length;i++){var s=o[i],a=s.transform,u=null;e instanceof $o&&(u=e.field(s.field)),null===u&&n instanceof $o&&(u=n.field(s.field)),r.push(a.ot(u,t))}return r},e.prototype.St=function(t,e){for(var n=new qo(t),r=0;r<this.fieldTransforms.length;r++){var i=this.fieldTransforms[r].field;n.set(i,e[r])}return n.yt()},e}(Ro),Bo=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Rt=n,r.type=3,r}return Pt(e,t),e.prototype.at=function(t,e){return this.It(t),new Wo(this.key,e.version,{hasCommittedMutations:!0})},e.prototype.ot=function(t,e,n){return this.It(t),this.Rt.Et(t)?new Wo(this.key,Wi.min()):t},e.prototype.Pt=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.Rt.isEqual(t.Rt)},e}(Ro),Uo=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Rt=n,r.type=4,r}return Pt(e,t),e.prototype.at=function(t,e){Qs()},e.prototype.ot=function(t,e,n){Qs()},e.prototype.Pt=function(t){Qs()},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.Rt.isEqual(t.Rt)},e}(Ro),Vo=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.B())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!To(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.O()])||null},t.prototype.isEqual=function(t){return ho(this.proto,t.proto)},t}(),qo=function(){function t(t){void 0===t&&(t=Vo.empty()),this.Ct=t,this.Ft=new Map}return t.prototype.set=function(t,e){return this.Nt(t,e),this},t.prototype.delete=function(t){return this.Nt(t,null),this},t.prototype.Nt=function(t,e){for(var n=this.Ft,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===co(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.O(),e)},t.prototype.yt=function(){var t=this.kt(Xi.G,this.Ft);return null!=t?new Vo(t):this.Ct},t.prototype.kt=function(t,e){var n=this,r=!1,i=this.Ct.field(t),o=To(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var s=n.kt(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function Fo(t){var e=[];return to(t.fields||{},(function(t,n){var r=new Xi([t]);if(To(n)){var i=Fo(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var a=s[o];e.push(r.child(a))}}else e.push(r)})),new ko(e)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var Go,Ko,zo=function(t,e){this.key=t,this.version=e},$o=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).$t=r,o.At=!!i.At,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Pt(e,t),e.prototype.field=function(t){return this.$t.field(t)},e.prototype.data=function(){return this.$t},e.prototype.Mt=function(){return this.$t.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.At===t.At&&this.hasCommittedMutations===t.hasCommittedMutations&&this.$t.isEqual(t.$t)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.$t.toString()+", {hasLocalMutations: "+this.At+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.At||this.hasCommittedMutations},enumerable:!0,configurable:!0}),e}(zo),Wo=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Pt(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(zo),Qo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Pt(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(zo),Ho=function(){function t(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.Lt=null}return t.prototype.canonicalId=function(){if(null===this.Lt){var t=this.path.j();null!==this.collectionGroup&&(t+="|cg:"+this.collectionGroup),t+="|f:",t+=this.filters.map((function(t){return t.canonicalId()})).join(","),t+="|ob:",t+=this.orderBy.map((function(t){return t.canonicalId()})).join(","),ro(this.limit)||(t+="|l:",t+=this.limit),this.startAt&&(t+="|lb:",t+=this.startAt.canonicalId()),this.endAt&&(t+="|ub:",t+=this.endAt.canonicalId()),this.Lt=t}return this.Lt},t.prototype.toString=function(){var t=this.path.j();return null!==this.collectionGroup&&(t+=" collectionGroup="+this.collectionGroup),this.filters.length>0&&(t+=", filters: ["+this.filters.join(", ")+"]"),ro(this.limit)||(t+=", limit: "+this.limit),this.orderBy.length>0&&(t+=", orderBy: ["+this.orderBy.join(", ")+"]"),this.startAt&&(t+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(t+=", endAt: "+this.endAt.canonicalId()),"Target("+t+")"},t.prototype.isEqual=function(t){if(this.limit!==t.limit)return!1;if(this.orderBy.length!==t.orderBy.length)return!1;for(var e=0;e<this.orderBy.length;e++)if(!this.orderBy[e].isEqual(t.orderBy[e]))return!1;if(this.filters.length!==t.filters.length)return!1;for(var n=0;n<this.filters.length;n++)if(!this.filters[n].isEqual(t.filters[n]))return!1;return this.collectionGroup===t.collectionGroup&&!!this.path.isEqual(t.path)&&!!(null!==this.startAt?this.startAt.isEqual(t.startAt):null===t.startAt)&&(null!==this.endAt?this.endAt.isEqual(t.endAt):null===t.endAt)},t.prototype.Ot=function(){return Zi.et(this.path)&&null===this.collectionGroup&&0===this.filters.length},t}(),Yo=function(){function t(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.xt=n,this.filters=r,this.limit=i,this.Bt=o,this.startAt=s,this.endAt=a,this.qt=null,this.Ut=null,this.startAt&&this.Qt(this.startAt),this.endAt&&this.Qt(this.endAt)}return t.Wt=function(e){return new t(e)},Object.defineProperty(t.prototype,"orderBy",{get:function(){if(null===this.qt){this.qt=[];var t=this.jt(),e=this.Kt();if(null!==t&&null===e)t.Y()||this.qt.push(new is(t)),this.qt.push(new is(Xi.J(),"asc"));else{for(var n=!1,r=0,i=this.xt;r<i.length;r++){var o=i[r];this.qt.push(o),o.field.Y()&&(n=!0)}if(!n){var s=this.xt.length>0?this.xt[this.xt.length-1].dir:"asc";this.qt.push(new is(Xi.J(),s))}}}return this.qt},enumerable:!0,configurable:!0}),t.prototype.Gt=function(e){var n=this.filters.concat([e]);return new t(this.path,this.collectionGroup,this.xt.slice(),n,this.limit,this.Bt,this.startAt,this.endAt)},t.prototype.zt=function(e){var n=this.xt.concat([e]);return new t(this.path,this.collectionGroup,n,this.filters.slice(),this.limit,this.Bt,this.startAt,this.endAt)},t.prototype.Ht=function(e){return new t(this.path,this.collectionGroup,this.xt.slice(),this.filters.slice(),e,"F",this.startAt,this.endAt)},t.prototype.Yt=function(e){return new t(this.path,this.collectionGroup,this.xt.slice(),this.filters.slice(),e,"L",this.startAt,this.endAt)},t.prototype.Jt=function(e){return new t(this.path,this.collectionGroup,this.xt.slice(),this.filters.slice(),this.limit,this.Bt,e,this.endAt)},t.prototype.Xt=function(e){return new t(this.path,this.collectionGroup,this.xt.slice(),this.filters.slice(),this.limit,this.Bt,this.startAt,e)},t.prototype.Zt=function(e){return new t(e,null,this.xt.slice(),this.filters.slice(),this.limit,this.Bt,this.startAt,this.endAt)},t.prototype.te=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.xt.length||1===this.xt.length&&this.xt[0].field.Y())},t.prototype.canonicalId=function(){return this.ee().canonicalId()+"|lt:"+this.Bt},t.prototype.toString=function(){return"Query(target="+this.ee().toString()+"; limitType="+this.Bt+")"},t.prototype.isEqual=function(t){return this.ee().isEqual(t.ee())&&this.Bt===t.Bt},t.prototype.se=function(t,e){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],s=o.compare(t,e);if(0!==s)return s;n=n||o.field.Y()}return 0},t.prototype.matches=function(t){return this.ie(t)&&this.ne(t)&&this.re(t)&&this.he(t)},t.prototype.oe=function(){return!ro(this.limit)&&"F"===this.Bt},t.prototype.ae=function(){return!ro(this.limit)&&"L"===this.Bt},t.prototype.Kt=function(){return this.xt.length>0?this.xt[0].field:null},t.prototype.jt=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n instanceof Xo&&n.ue())return n.field}return null},t.prototype.ce=function(t){for(var e=0,n=this.filters;e<n.length;e++){var r=n[e];if(r instanceof Xo&&t.indexOf(r.op)>=0)return r.op}return null},t.prototype.Ot=function(){return this.ee().Ot()},t.prototype._e=function(){return null!==this.collectionGroup},t.prototype.ee=function(){if(!this.Ut)if("F"===this.Bt)this.Ut=new Ho(this.path,this.collectionGroup,this.orderBy,this.filters,this.limit,this.startAt,this.endAt);else{for(var t=[],e=0,n=this.orderBy;e<n.length;e++){var r=n[e],i="desc"===r.dir?"asc":"desc";t.push(new is(r.field,i))}var o=this.endAt?new rs(this.endAt.position,!this.endAt.before):null,s=this.startAt?new rs(this.startAt.position,!this.startAt.before):null;this.Ut=new Ho(this.path,this.collectionGroup,t,this.filters,this.limit,o,s)}return this.Ut},t.prototype.ie=function(t){var e=t.key.path;return null!==this.collectionGroup?t.key.tt(this.collectionGroup)&&this.path.q(e):Zi.et(this.path)?this.path.isEqual(e):this.path.U(e)},t.prototype.ne=function(t){for(var e=0,n=this.xt;e<n.length;e++){var r=n[e];if(!r.field.Y()&&null===t.field(r.field))return!1}return!0},t.prototype.re=function(t){for(var e=0,n=this.filters;e<n.length;e++)if(!n[e].matches(t))return!1;return!0},t.prototype.he=function(t){return!(this.startAt&&!this.startAt.le(this.orderBy,t)||this.endAt&&this.endAt.le(this.orderBy,t))},t.prototype.Qt=function(t){},t}(),Xo=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Pt(e,t),e.create=function(t,n,r){if(t.Y())return"in"===n?new Jo(t,r):new Zo(t,n,r);if(Eo(r)){if("=="!==n)throw new Vi(Ui.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new e(t,n,r)}if(Co(r)){if("=="!==n)throw new Vi(Ui.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new e(t,n,r)}return"array-contains"===n?new ts(t,r):"in"===n?new es(t,r):"array-contains-any"===n?new ns(t,r):new e(t,n,r)},e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&co(this.value)===co(e)&&this.de(fo(e,this.value))},e.prototype.de=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case">":return t>0;case">=":return t>=0;default:return Qs()}},e.prototype.ue=function(){return["<","<=",">",">="].indexOf(this.op)>=0},e.prototype.canonicalId=function(){return this.field.j()+this.op.toString()+vo(this.value)},e.prototype.isEqual=function(t){return t instanceof e&&this.op===t.op&&this.field.isEqual(t.field)&&ho(this.value,t.value)},e.prototype.toString=function(){return this.field.j()+" "+this.op+" "+vo(this.value)},e}((function(){})),Zo=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Zi.Z(r.referenceValue),i}return Pt(e,t),e.prototype.matches=function(t){var e=Zi.N(t.key,this.key);return this.de(e)},e}(Xo),Jo=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=(n.arrayValue.values||[]).map((function(t){return Zi.Z(t.referenceValue)})),r}return Pt(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Xo),ts=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Pt(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return wo(e)&&lo(e.arrayValue,this.value)},e}(Xo),es=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Pt(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&lo(this.value.arrayValue,e)},e}(Xo),ns=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Pt(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!wo(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return lo(e.value.arrayValue,t)}))},e}(Xo),rs=function(){function t(t,e){this.position=t,this.before=e}return t.prototype.canonicalId=function(){return(this.before?"b":"a")+":"+this.position.map((function(t){return vo(t)})).join(",")},t.prototype.le=function(t,e){for(var n=0,r=0;r<this.position.length;r++){var i=t[r],o=this.position[r];if(n=i.field.Y()?Zi.N(Zi.Z(o.referenceValue),e.key):fo(o,e.field(i.field)),"desc"===i.dir&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},t.prototype.isEqual=function(t){if(null===t)return!1;if(this.before!==t.before||this.position.length!==t.position.length)return!1;for(var e=0;e<this.position.length;e++)if(!ho(this.position[e],t.position[e]))return!1;return!0},t}(),is=function(){function t(t,e){this.field=t,void 0===e&&(e="asc"),this.dir=e,this.fe=t.Y()}return t.prototype.compare=function(t,e){var n=this.fe?Zi.N(t.key,e.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?fo(r,i):Qs()}(this.field,t,e);switch(this.dir){case"asc":return n;case"desc":return-1*n;default:return Qs()}},t.prototype.canonicalId=function(){return this.field.j()+this.dir.toString()},t.prototype.toString=function(){return this.field.j()+" ("+this.dir+")"},t.prototype.isEqual=function(t){return this.dir===t.dir&&this.field.isEqual(t.field)},t}(),os=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Wi.min()),void 0===o&&(o=Wi.min()),void 0===s&&(s=no.ht),this.target=t,this.targetId=e,this.Te=n,this.sequenceNumber=r,this.Ee=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.Ie=function(e){return new t(this.target,this.targetId,this.Te,e,this.Ee,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.we=function(e,n){return new t(this.target,this.targetId,this.Te,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.Re=function(e){return new t(this.target,this.targetId,this.Te,this.sequenceNumber,this.Ee,e,this.resumeToken)},t}(),ss=function(t){this.count=t};function as(t){switch(t){case Ui.OK:return Qs();case Ui.CANCELLED:case Ui.UNKNOWN:case Ui.DEADLINE_EXCEEDED:case Ui.RESOURCE_EXHAUSTED:case Ui.INTERNAL:case Ui.UNAVAILABLE:case Ui.UNAUTHENTICATED:return!1;case Ui.INVALID_ARGUMENT:case Ui.NOT_FOUND:case Ui.ALREADY_EXISTS:case Ui.PERMISSION_DENIED:case Ui.FAILED_PRECONDITION:case Ui.ABORTED:case Ui.OUT_OF_RANGE:case Ui.UNIMPLEMENTED:case Ui.DATA_LOSS:return!0;default:return Qs()}}function us(t){if(void 0===t)return $s("GRPC error has no .code"),Ui.UNKNOWN;switch(t){case Go.OK:return Ui.OK;case Go.CANCELLED:return Ui.CANCELLED;case Go.UNKNOWN:return Ui.UNKNOWN;case Go.DEADLINE_EXCEEDED:return Ui.DEADLINE_EXCEEDED;case Go.RESOURCE_EXHAUSTED:return Ui.RESOURCE_EXHAUSTED;case Go.INTERNAL:return Ui.INTERNAL;case Go.UNAVAILABLE:return Ui.UNAVAILABLE;case Go.UNAUTHENTICATED:return Ui.UNAUTHENTICATED;case Go.INVALID_ARGUMENT:return Ui.INVALID_ARGUMENT;case Go.NOT_FOUND:return Ui.NOT_FOUND;case Go.ALREADY_EXISTS:return Ui.ALREADY_EXISTS;case Go.PERMISSION_DENIED:return Ui.PERMISSION_DENIED;case Go.FAILED_PRECONDITION:return Ui.FAILED_PRECONDITION;case Go.ABORTED:return Ui.ABORTED;case Go.OUT_OF_RANGE:return Ui.OUT_OF_RANGE;case Go.UNIMPLEMENTED:return Ui.UNIMPLEMENTED;case Go.DATA_LOSS:return Ui.DATA_LOSS;default:return Qs()}}(Ko=Go||(Go={}))[Ko.OK=0]="OK",Ko[Ko.CANCELLED=1]="CANCELLED",Ko[Ko.UNKNOWN=2]="UNKNOWN",Ko[Ko.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ko[Ko.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ko[Ko.NOT_FOUND=5]="NOT_FOUND",Ko[Ko.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ko[Ko.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ko[Ko.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ko[Ko.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ko[Ko.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ko[Ko.ABORTED=10]="ABORTED",Ko[Ko.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ko[Ko.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ko[Ko.INTERNAL=13]="INTERNAL",Ko[Ko.UNAVAILABLE=14]="UNAVAILABLE",Ko[Ko.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var cs=function(){function t(t,e){this.N=t,this.root=e||ls.EMPTY}return t.prototype.Ae=function(e,n){return new t(this.N,this.root.Ae(e,n,this.N).me(null,null,ls.Pe,null,null))},t.prototype.remove=function(e){return new t(this.N,this.root.remove(e,this.N).me(null,null,ls.Pe,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.B();){var n=this.N(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.B();){var r=this.N(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.B=function(){return this.root.B()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),t.prototype.Ve=function(){return this.root.Ve()},t.prototype.ge=function(){return this.root.ge()},t.prototype.pe=function(t){return this.root.pe(t)},t.prototype.forEach=function(t){this.pe((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.pe((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.ye=function(t){return this.root.ye(t)},t.prototype.be=function(){return new hs(this.root,null,this.N,!1)},t.prototype.ve=function(t){return new hs(this.root,t,this.N,!1)},t.prototype.Se=function(){return new hs(this.root,null,this.N,!0)},t.prototype.De=function(t){return new hs(this.root,t,this.N,!0)},t}(),hs=function(){function t(t,e,n,r){this.Ce=r,this.Fe=[];for(var i=1;!t.B();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.Ce?t.left:t.right;else{if(0===i){this.Fe.push(t);break}this.Fe.push(t),t=this.Ce?t.right:t.left}}return t.prototype.Ne=function(){var t=this.Fe.pop(),e={key:t.key,value:t.value};if(this.Ce)for(t=t.left;!t.B();)this.Fe.push(t),t=t.right;else for(t=t.right;!t.B();)this.Fe.push(t),t=t.left;return e},t.prototype.ke=function(){return this.Fe.length>0},t.prototype.$e=function(){if(0===this.Fe.length)return null;var t=this.Fe[this.Fe.length-1];return{key:t.key,value:t.value}},t}(),ls=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.me=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.B=function(){return!1},t.prototype.pe=function(t){return this.left.pe(t)||t(this.key,this.value)||this.right.pe(t)},t.prototype.ye=function(t){return this.right.ye(t)||t(this.key,this.value)||this.left.ye(t)},t.prototype.min=function(){return this.left.B()?this:this.left.min()},t.prototype.Ve=function(){return this.min().key},t.prototype.ge=function(){return this.right.B()?this.key:this.right.ge()},t.prototype.Ae=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.me(null,null,null,r.left.Ae(t,e,n),null):0===i?r.me(null,e,null,null,null):r.me(null,null,null,null,r.right.Ae(t,e,n))).Me()},t.prototype.Le=function(){if(this.left.B())return t.EMPTY;var e=this;return e.left.Oe()||e.left.left.Oe()||(e=e.xe()),(e=e.me(null,null,null,e.left.Le(),null)).Me()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.B()||i.left.Oe()||i.left.left.Oe()||(i=i.xe()),i=i.me(null,null,null,i.left.remove(e,n),null);else{if(i.left.Oe()&&(i=i.Be()),i.right.B()||i.right.Oe()||i.right.left.Oe()||(i=i.qe()),0===n(e,i.key)){if(i.right.B())return t.EMPTY;r=i.right.min(),i=i.me(r.key,r.value,null,null,i.right.Le())}i=i.me(null,null,null,null,i.right.remove(e,n))}return i.Me()},t.prototype.Oe=function(){return this.color},t.prototype.Me=function(){var t=this;return t.right.Oe()&&!t.left.Oe()&&(t=t.Ue()),t.left.Oe()&&t.left.left.Oe()&&(t=t.Be()),t.left.Oe()&&t.right.Oe()&&(t=t.Qe()),t},t.prototype.xe=function(){var t=this.Qe();return t.right.left.Oe()&&(t=(t=(t=t.me(null,null,null,null,t.right.Be())).Ue()).Qe()),t},t.prototype.qe=function(){var t=this.Qe();return t.left.left.Oe()&&(t=(t=t.Be()).Qe()),t},t.prototype.Ue=function(){var e=this.me(null,null,t.RED,null,this.right.left);return this.right.me(null,null,this.color,e,null)},t.prototype.Be=function(){var e=this.me(null,null,t.RED,this.left.right,null);return this.left.me(null,null,this.color,null,e)},t.prototype.Qe=function(){var t=this.left.me(null,null,!this.left.color,null,null),e=this.right.me(null,null,!this.right.color,null,null);return this.me(null,null,!this.color,t,e)},t.prototype.We=function(){var t=this.je();return Math.pow(2,t)<=this.size+1},t.prototype.je=function(){if(this.Oe()&&this.left.Oe())throw Qs();if(this.right.Oe())throw Qs();var t=this.left.je();if(t!==this.right.je())throw Qs();return t+(this.Oe()?0:1)},t}();ls.EMPTY=null,ls.RED=!0,ls.Pe=!1,ls.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Qs()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Qs()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Qs()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Qs()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Qs()},enumerable:!0,configurable:!0}),t.prototype.me=function(t,e,n,r,i){return this},t.prototype.Ae=function(t,e,n){return new ls(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.B=function(){return!0},t.prototype.pe=function(t){return!1},t.prototype.ye=function(t){return!1},t.prototype.Ve=function(){return null},t.prototype.ge=function(){return null},t.prototype.Oe=function(){return!1},t.prototype.We=function(){return!0},t.prototype.je=function(){return 0},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var fs=function(){function t(t){this.N=t,this.data=new cs(this.N)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.Ve()},t.prototype.last=function(){return this.data.ge()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.pe((function(e,n){return t(e),!1}))},t.prototype.Ke=function(t,e){for(var n=this.data.ve(t[0]);n.ke();){var r=n.Ne();if(this.N(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Ge=function(t,e){var n;for(n=void 0!==e?this.data.ve(e):this.data.be();n.ke();)if(!t(n.Ne().key))return},t.prototype.ze=function(t){var e=this.data.ve(t);return e.ke()?e.Ne().key:null},t.prototype.be=function(){return new ps(this.data.be())},t.prototype.ve=function(t){return new ps(this.data.ve(t))},t.prototype.add=function(t){return this.me(this.data.remove(t).Ae(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.me(this.data.remove(t)):this},t.prototype.B=function(){return this.data.B()},t.prototype.He=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.be(),r=e.data.be();n.ke();){var i=n.Ne().key,o=r.Ne().key;if(0!==this.N(i,o))return!1}return!0},t.prototype.W=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.me=function(e){var n=new t(this.N);return n.data=e,n},t}(),ps=function(){function t(t){this.Ye=t}return t.prototype.Ne=function(){return this.Ye.Ne().key},t.prototype.ke=function(){return this.Ye.ke()},t}(),ds=new cs(Zi.N);function vs(){return ds}function ys(){return vs()}var ms=new cs(Zi.N);function As(){return ms}var gs=new cs(Zi.N);function bs(){return gs}var ws=new fs(Zi.N);function Es(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=ws,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Cs=new fs(Zs);function Ts(){return Cs}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Is=function(){function t(t){this.N=t?function(e,n){return t(e,n)||Zi.N(e.key,n.key)}:function(t,e){return Zi.N(t.key,e.key)},this.Je=As(),this.Xe=new cs(this.N)}return t.Ze=function(e){return new t(e.N)},t.prototype.has=function(t){return null!=this.Je.get(t)},t.prototype.get=function(t){return this.Je.get(t)},t.prototype.first=function(){return this.Xe.Ve()},t.prototype.last=function(){return this.Xe.ge()},t.prototype.B=function(){return this.Xe.B()},t.prototype.indexOf=function(t){var e=this.Je.get(t);return e?this.Xe.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.Xe.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.Xe.pe((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.me(e.Je.Ae(t.key,t),e.Xe.Ae(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.me(this.Je.remove(t),this.Xe.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.Xe.be(),r=e.Xe.be();n.ke();){var i=n.Ne().key,o=r.Ne().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.me=function(e,n){var r=new t;return r.N=this.N,r.Je=e,r.Xe=n,r},t}(),xs=function(){function t(){this.ts=new cs(Zi.N)}return t.prototype.track=function(t){var e=t.doc.key,n=this.ts.get(e);n?0!==t.type&&3===n.type?this.ts=this.ts.Ae(e,t):3===t.type&&1!==n.type?this.ts=this.ts.Ae(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.ts=this.ts.Ae(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.ts=this.ts.Ae(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.ts=this.ts.remove(e):1===t.type&&2===n.type?this.ts=this.ts.Ae(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.ts=this.ts.Ae(e,{type:2,doc:t.doc}):Qs():this.ts=this.ts.Ae(e,t)},t.prototype.es=function(){var t=[];return this.ts.pe((function(e,n){t.push(n)})),t},t}(),_s=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.ss=n,this.docChanges=r,this.ns=i,this.fromCache=o,this.rs=s,this.hs=a}return t.os=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,Is.Ze(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.ns.B()},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.rs===t.rs&&this.ns.isEqual(t.ns)&&this.query.isEqual(t.query)&&this.docs.isEqual(t.docs)&&this.ss.isEqual(t.ss)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Ns=function(){function t(t,e,n,r,i){this.Ee=t,this.as=e,this.us=n,this.cs=r,this._s=i}return t.ls=function(e,n){var r=new Map;return r.set(e,Ss.ds(e,n)),new t(Wi.min(),r,Ts(),vs(),Es())},t}(),Ss=function(){function t(t,e,n,r,i){this.resumeToken=t,this.fs=e,this.Ts=n,this.Es=r,this.Is=i}return t.ds=function(e,n){return new t(no.ht,n,Es(),Es(),Es())},t}(),ks=function(t,e,n,r){this.ws=t,this.removedTargetIds=e,this.key=n,this.Rs=r},Os=function(t,e){this.targetId=t,this.As=e},Ds=function(t,e,n,r){void 0===n&&(n=no.ht),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},js=function(){function t(){this.ms=0,this.Ps=Ms(),this.Vs=no.ht,this.gs=!1,this.ps=!0}return Object.defineProperty(t.prototype,"fs",{get:function(){return this.gs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.Vs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ys",{get:function(){return 0!==this.ms},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bs",{get:function(){return this.ps},enumerable:!0,configurable:!0}),t.prototype.vs=function(t){t.rt()>0&&(this.ps=!0,this.Vs=t)},t.prototype.Ss=function(){var t=Es(),e=Es(),n=Es();return this.Ps.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Qs()}})),new Ss(this.Vs,this.gs,t,e,n)},t.prototype.Ds=function(){this.ps=!1,this.Ps=Ms()},t.prototype.Cs=function(t,e){this.ps=!0,this.Ps=this.Ps.Ae(t,e)},t.prototype.Fs=function(t){this.ps=!0,this.Ps=this.Ps.remove(t)},t.prototype.Ns=function(){this.ms+=1},t.prototype.ks=function(){this.ms-=1},t.prototype.$s=function(){this.ps=!0,this.gs=!0},t}(),Rs=function(){function t(t){this.Ms=t,this.Ls=new Map,this.Os=vs(),this.xs=Ps(),this.Bs=new fs(Zs)}return t.prototype.qs=function(t){for(var e=0,n=t.ws;e<n.length;e++){var r=n[e];t.Rs instanceof $o?this.Us(r,t.Rs):t.Rs instanceof Wo&&this.Qs(r,t.key,t.Rs)}for(var i=0,o=t.removedTargetIds;i<o.length;i++){var s=o[i];this.Qs(s,t.key,t.Rs)}},t.prototype.Ws=function(t){var e=this;this.js(t,(function(n){var r=e.Ks(n);switch(t.state){case 0:e.Gs(n)&&r.vs(t.resumeToken);break;case 1:r.ks(),r.ys||r.Ds(),r.vs(t.resumeToken);break;case 2:r.ks(),r.ys||e.removeTarget(n);break;case 3:e.Gs(n)&&(r.$s(),r.vs(t.resumeToken));break;case 4:e.Gs(n)&&(e.zs(n),r.vs(t.resumeToken));break;default:Qs()}}))},t.prototype.js=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Ls.forEach((function(t,r){n.Gs(r)&&e(r)}))},t.prototype.Hs=function(t){var e=t.targetId,n=t.As.count,r=this.Ys(e);if(r){var i=r.target;if(i.Ot())if(0===n){var o=new Zi(i.path);this.Qs(e,o,new Wo(o,Wi.min()))}else Hs(1===n);else this.Js(e)!==n&&(this.zs(e),this.Bs=this.Bs.add(e))}},t.prototype.Xs=function(t){var e=this,n=new Map;this.Ls.forEach((function(r,i){var o=e.Ys(i);if(o){if(r.fs&&o.target.Ot()){var s=new Zi(o.target.path);null!==e.Os.get(s)||e.Zs(i,s)||e.Qs(i,s,new Wo(s,t))}r.bs&&(n.set(i,r.Ss()),r.Ds())}}));var r=Es();this.xs.forEach((function(t,n){var i=!0;n.Ge((function(t){var n=e.Ys(t);return!n||2===n.Te||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new Ns(t,n,this.Bs,this.Os,r);return this.Os=vs(),this.xs=Ps(),this.Bs=new fs(Zs),i},t.prototype.Us=function(t,e){if(this.Gs(t)){var n=this.Zs(t,e.key)?2:0;this.Ks(t).Cs(e.key,n),this.Os=this.Os.Ae(e.key,e),this.xs=this.xs.Ae(e.key,this.ti(e.key).add(t))}},t.prototype.Qs=function(t,e,n){if(this.Gs(t)){var r=this.Ks(t);this.Zs(t,e)?r.Cs(e,1):r.Fs(e),this.xs=this.xs.Ae(e,this.ti(e).delete(t)),n&&(this.Os=this.Os.Ae(e,n))}},t.prototype.removeTarget=function(t){this.Ls.delete(t)},t.prototype.Js=function(t){var e=this.Ks(t).Ss();return this.Ms.ei(t).size+e.Ts.size-e.Is.size},t.prototype.Ns=function(t){this.Ks(t).Ns()},t.prototype.Ks=function(t){var e=this.Ls.get(t);return e||(e=new js,this.Ls.set(t,e)),e},t.prototype.ti=function(t){var e=this.xs.get(t);return e||(e=new fs(Zs),this.xs=this.xs.Ae(t,e)),e},t.prototype.Gs=function(t){var e=null!==this.Ys(t);return e||zs("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.Ys=function(t){var e=this.Ls.get(t);return e&&e.ys?null:this.Ms.si(t)},t.prototype.zs=function(t){var e=this;this.Ls.set(t,new js),this.Ms.ei(t).forEach((function(n){e.Qs(t,n,null)}))},t.prototype.Zs=function(t,e){return this.Ms.ei(t).has(e)},t}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ps(){return new cs(Zi.N)}function Ms(){return new cs(Zi.N)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ls={asc:"ASCENDING",desc:"DESCENDING"},Bs={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Us=function(){function t(t,e){this.ii=t,this.options=e}return t.prototype.ni=function(t){var e=void 0===t.code?Ui.UNKNOWN:us(t.code);return new Vi(e,t.message||"")},t.prototype.ri=function(t){return this.options.hi||ro(t)?t:{value:t}},t.prototype.oi=function(t){var e;return ro(e="object"==typeof t?t.value:t)?null:e},t.prototype._t=function(t){return{integerValue:""+t}},t.prototype.lt=function(t){if(this.options.hi){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:io(t)?"-0":t}},t.prototype.ai=function(t){return oo(t)?this._t(t):this.lt(t)},t.prototype.C=function(t){return this.options.hi?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}},t.prototype.v=function(t){var e=yo(t);return new $i(e.seconds,e.nanos)},t.prototype.ui=function(t){return this.options.hi?t.toBase64():t.toUint8Array()},t.prototype.ci=function(t){return this.options.hi?(Hs(void 0===t||"string"==typeof t),no.fromBase64String(t||"")):(Hs(void 0===t||t instanceof Uint8Array),no.fromUint8Array(t||new Uint8Array))},t.prototype.toVersion=function(t){return this.C(t.C())},t.prototype.fromVersion=function(t){return Hs(!!t),Wi.v(this.v(t))},t.prototype._i=function(t,e){return this.li(e||this.ii).child("documents").child(t).j()},t.prototype.di=function(t){var e=Hi.K(t);return Hs(Vs(e)),e},t.prototype.fi=function(t){return this._i(t.path)},t.prototype.Z=function(t){var e=this.di(t);return Hs(e.get(1)===this.ii.projectId),Hs(!e.get(3)&&!this.ii.database||e.get(3)===this.ii.database),new Zi(this.Ti(e))},t.prototype.Ei=function(t){return this._i(t)},t.prototype.Ii=function(t){var e=this.di(t);return 4===e.length?Hi.G:this.Ti(e)},Object.defineProperty(t.prototype,"wi",{get:function(){return new Hi(["projects",this.ii.projectId,"databases",this.ii.database]).j()},enumerable:!0,configurable:!0}),t.prototype.li=function(t){return new Hi(["projects",t.projectId,"databases",t.database])},t.prototype.Ti=function(t){return Hs(t.length>4&&"documents"===t.get(4)),t.$(5)},t.prototype.Ri=function(t,e){return{name:this.fi(t),fields:e.proto.mapValue.fields}},t.prototype.Ai=function(t){return{name:this.fi(t.key),fields:t.Mt().mapValue.fields,updateTime:this.C(t.version.C())}},t.prototype.mi=function(t,e){var n=this.Z(t.name),r=this.fromVersion(t.updateTime),i=new Vo({mapValue:{fields:t.fields}});return new $o(n,r,i,{hasCommittedMutations:!!e})},t.prototype.Pi=function(t){Hs(!!t.found),t.found.name,t.found.updateTime;var e=this.Z(t.found.name),n=this.fromVersion(t.found.updateTime),r=new Vo({mapValue:{fields:t.found.fields}});return new $o(e,n,r,{})},t.prototype.Vi=function(t){Hs(!!t.missing),Hs(!!t.readTime);var e=this.Z(t.missing),n=this.fromVersion(t.readTime);return new Wo(e,n)},t.prototype.gi=function(t){return"found"in t?this.Pi(t):"missing"in t?this.Vi(t):Qs()},t.prototype.pi=function(t){var e;if("targetChange"in t){t.targetChange;var n=this.yi(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],i=this.ci(t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&this.ni(o);e=new Ds(n,r,i,s||null)}else if("documentChange"in t){t.documentChange;var a=t.documentChange;a.document,a.document.name,a.document.updateTime;var u=this.Z(a.document.name),c=this.fromVersion(a.document.updateTime),h=new Vo({mapValue:{fields:a.document.fields}}),l=new $o(u,c,h,{}),f=a.targetIds||[],p=a.removedTargetIds||[];e=new ks(f,p,l.key,l)}else if("documentDelete"in t){t.documentDelete;var d=t.documentDelete;d.document;var v=this.Z(d.document),y=d.readTime?this.fromVersion(d.readTime):Wi.min(),m=new Wo(v,y),A=d.removedTargetIds||[];e=new ks([],A,m.key,m)}else if("documentRemove"in t){t.documentRemove;var g=t.documentRemove;g.document;var b=this.Z(g.document),w=g.removedTargetIds||[];e=new ks([],w,b,null)}else{if(!("filter"in t))return Qs();t.filter;var E=t.filter;E.targetId;var C=E.count||0,T=new ss(C),I=E.targetId;e=new Os(I,T)}return e},t.prototype.yi=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Qs()},t.prototype.bi=function(t){if(!("targetChange"in t))return Wi.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Wi.min():e.readTime?this.fromVersion(e.readTime):Wi.min()},t.prototype.vi=function(t){var e,n=this;if(t instanceof Po)e={update:this.Ri(t.key,t.value)};else if(t instanceof Bo)e={delete:this.fi(t.key)};else if(t instanceof Mo)e={update:this.Ri(t.key,t.data),updateMask:this.Si(t.Vt)};else if(t instanceof Lo)e={transform:{document:this.fi(t.key),fieldTransforms:t.fieldTransforms.map((function(t){return n.Di(t)}))}};else{if(!(t instanceof Uo))return Qs();e={verify:this.fi(t.key)}}return t.Rt.Tt||(e.currentDocument=this.Ci(t.Rt)),e},t.prototype.Fi=function(t){var e=this,n=t.currentDocument?this.Ni(t.currentDocument):jo.ft();if(t.update){t.update.name;var r=this.Z(t.update.name),i=new Vo({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=this.ki(t.updateMask);return new Mo(r,i,o,n)}return new Po(r,i,n)}if(t.delete){var s=this.Z(t.delete);return new Bo(s,n)}if(t.transform){var a=this.Z(t.transform.document),u=t.transform.fieldTransforms.map((function(t){return e.$i(t)}));return Hs(!0===n.exists),new Lo(a,u)}if(t.verify){var c=this.Z(t.verify);return new Uo(c,n)}return Qs()},t.prototype.Ci=function(t){return void 0!==t.updateTime?{updateTime:this.toVersion(t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Qs()},t.prototype.Ni=function(t){return void 0!==t.updateTime?jo.updateTime(this.fromVersion(t.updateTime)):void 0!==t.exists?jo.exists(t.exists):jo.ft()},t.prototype.Mi=function(t,e){var n=t.updateTime?this.fromVersion(t.updateTime):this.fromVersion(e);n.isEqual(Wi.min())&&(n=this.fromVersion(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new Do(n,r)},t.prototype.Li=function(t,e){var n=this;return t&&t.length>0?(Hs(void 0!==e),t.map((function(t){return n.Mi(t,e)}))):[]},t.prototype.Di=function(t){var e=t.transform;if(e instanceof Io)return{fieldPath:t.field.j(),setToServerValue:"REQUEST_TIME"};if(e instanceof xo)return{fieldPath:t.field.j(),appendMissingElements:{values:e.elements}};if(e instanceof _o)return{fieldPath:t.field.j(),removeAllFromArray:{values:e.elements}};if(e instanceof No)return{fieldPath:t.field.j(),increment:e.ct};throw Qs()},t.prototype.$i=function(t){var e=null;if("setToServerValue"in t)Hs("REQUEST_TIME"===t.setToServerValue),e=Io.instance;else if("appendMissingElements"in t){var n=t.appendMissingElements.values||[];e=new xo(n)}else if("removeAllFromArray"in t){var r=t.removeAllFromArray.values||[];e=new _o(r)}else"increment"in t?e=new No(this,t.increment):Qs();var i=Xi.X(t.fieldPath);return new Oo(i,e)},t.prototype.Oi=function(t){return{documents:[this.Ei(t.path)]}},t.prototype.xi=function(t){Hs(1===t.documents.length);var e=t.documents[0];return Yo.Wt(this.Ii(e)).ee()},t.prototype.Bi=function(t){var e={structuredQuery:{}},n=t.path;null!==t.collectionGroup?(e.parent=this.Ei(n),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=this.Ei(n.M()),e.structuredQuery.from=[{collectionId:n.O()}]);var r=this.qi(t.filters);r&&(e.structuredQuery.where=r);var i=this.Ui(t.orderBy);i&&(e.structuredQuery.orderBy=i);var o=this.ri(t.limit);return null!==o&&(e.structuredQuery.limit=o),t.startAt&&(e.structuredQuery.startAt=this.Qi(t.startAt)),t.endAt&&(e.structuredQuery.endAt=this.Qi(t.endAt)),e},t.prototype.Wi=function(t){var e=this.Ii(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Hs(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=this.ji(n.where));var a=[];n.orderBy&&(a=this.Ki(n.orderBy));var u=null;n.limit&&(u=this.oi(n.limit));var c=null;n.startAt&&(c=this.Gi(n.startAt));var h=null;return n.endAt&&(h=this.Gi(n.endAt)),new Yo(e,i,a,s,u,"F",c,h).ee()},t.prototype.zi=function(t){var e=this.Hi(t.Te);return null==e?null:{"goog-listen-tags":e}},t.prototype.Hi=function(t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Qs()}},t.prototype.ee=function(t){var e,n=t.target;return(e=n.Ot()?{documents:this.Oi(n)}:{query:this.Bi(n)}).targetId=t.targetId,t.resumeToken.rt()>0&&(e.resumeToken=this.ui(t.resumeToken)),e},t.prototype.qi=function(t){var e=this;if(0!==t.length){var n=t.map((function(t){return t instanceof Xo?e.Yi(t):Qs()}));return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},t.prototype.ji=function(t){var e=this;return t?void 0!==t.unaryFilter?[this.Ji(t)]:void 0!==t.fieldFilter?[this.Xi(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return e.ji(t)})).reduce((function(t,e){return t.concat(e)})):Qs():[]},t.prototype.Ui=function(t){var e=this;if(0!==t.length)return t.map((function(t){return e.Zi(t)}))},t.prototype.Ki=function(t){var e=this;return t.map((function(t){return e.tn(t)}))},t.prototype.Qi=function(t){return{before:t.before,values:t.position}},t.prototype.Gi=function(t){var e=!!t.before,n=t.values||[];return new rs(n,e)},t.prototype.en=function(t){return Ls[t]},t.prototype.sn=function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}},t.prototype.nn=function(t){return Bs[t]},t.prototype.rn=function(t){switch(t){case"EQUAL":return"==";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Qs()}},t.prototype.hn=function(t){return{fieldPath:t.j()}},t.prototype.on=function(t){return Xi.X(t.fieldPath)},t.prototype.Zi=function(t){return{field:this.hn(t.field),direction:this.en(t.dir)}},t.prototype.tn=function(t){return new is(this.on(t.field),this.sn(t.direction))},t.prototype.Xi=function(t){return Xo.create(this.on(t.fieldFilter.field),this.rn(t.fieldFilter.op),t.fieldFilter.value)},t.prototype.Yi=function(t){if("=="===t.op){if(Co(t.value))return{unaryFilter:{field:this.hn(t.field),op:"IS_NAN"}};if(Eo(t.value))return{unaryFilter:{field:this.hn(t.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.hn(t.field),op:this.nn(t.op),value:t.value}}},t.prototype.Ji=function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=this.on(t.unaryFilter.field);return Xo.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=this.on(t.unaryFilter.field);return Xo.create(n,"==",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Qs()}},t.prototype.Si=function(t){var e=[];return t.fields.forEach((function(t){return e.push(t.j())})),{fieldPaths:e}},t.prototype.ki=function(t){var e=t.fieldPaths||[];return new ko(e.map((function(t){return Xi.X(t)})))},t}();function Vs(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qs=function(){function t(){}return t.an=function(e){t.platform&&Qs(),t.platform=e},t.nt=function(){return t.platform||Qs(),t.platform},t}(),Fs=new mt("@firebase/firestore");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gs(){return Fs.logLevel}function Ks(t){Fs.logLevel=t}function zs(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Fs.logLevel<=ht.DEBUG){var r=e.map(Ws);Fs.debug.apply(Fs,Bt(["Firestore ("+Li+"): "+t],r))}}function $s(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Fs.logLevel<=ht.ERROR){var r=e.map(Ws);Fs.error.apply(Fs,Bt(["Firestore ("+Li+"): "+t],r))}}function Ws(t){if("string"==typeof t)return t;var e=qs.nt();try{return e.un(t)}catch(e){return t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qs(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE ("+Li+") INTERNAL ASSERTION FAILED: "+t;throw $s(e),new Error(e)}function Hs(t,e){t||Qs()}function Ys(t,e){return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xs=function(){function t(){}return t.cn=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=qs.nt()._n(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Zs(t,e){return t<e?-1:t>e?1:0}function Js(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function ta(t){return t+"\0"}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ea=function(t,e,n,r,i){this.ii=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i},na=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"ln",{get:function(){return"(default)"===this.database},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.S=function(t){return Zs(this.projectId,t.projectId)||Zs(this.database,t.database)},t}(),ra=function(){function t(t){this.dn=t,this.fn={}}return t.prototype.get=function(t){var e=this.dn(t),n=this.fn[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(s.isEqual(t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.dn(t),r=this.fn[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(t))return void(r[i]=[t,e]);r.push([t,e])}else this.fn[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.dn(t),n=this.fn[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(t))return 1===n.length?delete this.fn[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){to(this.fn,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];t(s,a)}}))},t.prototype.B=function(){return eo(this.fn)},t}(),ia=function(){function t(t,e,n,r){this.batchId=t,this.Tn=e,this.baseMutations=n,this.mutations=r}return t.prototype.at=function(t,e,n){for(var r=n.En,i=0;i<this.mutations.length;i++){var o=this.mutations[i];if(o.key.isEqual(t)){var s=r[i];e=o.at(e,s)}}return e},t.prototype.ot=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=i.ot(e,e,this.Tn))}for(var o=e,s=0,a=this.mutations;s<a.length;s++){var u=a[s];u.key.isEqual(t)&&(e=u.ot(e,o,this.Tn))}return e},t.prototype.In=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.ot(r.key,t.get(r.key));i&&(n=n.Ae(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Es())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Js(this.mutations,t.mutations,(function(t,e){return t.isEqual(e)}))&&Js(this.baseMutations,t.baseMutations,(function(t,e){return t.isEqual(e)}))},t}(),oa=function(){function t(t,e,n,r,i){this.batch=t,this.wn=e,this.En=n,this.streamToken=r,this.Rn=i}return t.from=function(e,n,r,i){Hs(e.mutations.length===r.length);for(var o=bs(),s=e.mutations,a=0;a<s.length;a++)o=o.Ae(s[a].key,r[a].version);return new t(e,n,r,i,o)},t}(),sa=function(){function t(t){var e=this;this.An=null,this.mn=null,this.result=void 0,this.error=void 0,this.Pn=!1,this.Vn=!1,t((function(t){e.Pn=!0,e.result=t,e.An&&e.An(t)}),(function(t){e.Pn=!0,e.error=t,e.mn&&e.mn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Vn&&Qs(),this.Vn=!0,this.Pn?this.error?this.gn(n,this.error):this.pn(e,this.result):new t((function(t,i){r.An=function(n){r.pn(e,n).next(t,i)},r.mn=function(e){r.gn(n,e).next(t,i)}}))},t.prototype.yn=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.bn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.pn=function(e,n){return e?this.bn((function(){return e(n)})):t.resolve(n)},t.prototype.gn=function(e,n){return e?this.bn((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.vn=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.Sn=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.vn(r)},t}(),aa=function(){function t(){this.Dn=new ra((function(t){return t.toString()})),this.Cn=!1}return Object.defineProperty(t.prototype,"readTime",{get:function(){return this.Fn},set:function(t){this.Fn=t},enumerable:!0,configurable:!0}),t.prototype.Nn=function(t,e){this.kn(),this.readTime=e,this.Dn.set(t.key,t)},t.prototype.$n=function(t,e){this.kn(),e&&(this.readTime=e),this.Dn.set(t,null)},t.prototype.Mn=function(t,e){this.kn();var n=this.Dn.get(e);return void 0!==n?sa.resolve(n):this.Ln(t,e)},t.prototype.getEntries=function(t,e){return this.On(t,e)},t.prototype.apply=function(t){return this.kn(),this.Cn=!0,this.xn(t)},t.prototype.kn=function(){},t}(),ua="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ca=function(){function t(){this.Bn=[]}return t.prototype.qn=function(t){this.Bn.push(t)},t.prototype.Un=function(){this.Bn.forEach((function(t){return t()}))},t}(),ha=function(){function t(t,e,n){this.Qn=t,this.Wn=e,this.jn=n}return t.prototype.Kn=function(t,e){var n=this;return this.Wn.Gn(t,e).next((function(r){return n.zn(t,e,r)}))},t.prototype.zn=function(t,e,n){return this.Qn.Mn(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].ot(e,t);return t}))},t.prototype.Hn=function(t,e,n){var r=ys();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].ot(t,e);r=r.Ae(t,e)})),r},t.prototype.Yn=function(t,e){var n=this;return this.Qn.getEntries(t,e).next((function(e){return n.Jn(t,e)}))},t.prototype.Jn=function(t,e){var n=this;return this.Wn.Xn(t,e).next((function(r){var i=n.Hn(t,e,r),o=vs();return i.forEach((function(t,e){e||(e=new Wo(t,Wi.min())),o=o.Ae(t,e)})),o}))},t.prototype.Zn=function(t,e,n){return e.Ot()?this.tr(t,e.path):e._e()?this.er(t,e,n):this.sr(t,e,n)},t.prototype.tr=function(t,e){return this.Kn(t,new Zi(e)).next((function(t){var e=As();return t instanceof $o&&(e=e.Ae(t.key,t)),e}))},t.prototype.er=function(t,e,n){var r=this,i=e.collectionGroup,o=As();return this.jn.ir(t,i).next((function(s){return sa.forEach(s,(function(s){var a=e.Zt(s.child(i));return r.sr(t,a,n).next((function(t){t.forEach((function(t,e){o=o.Ae(t,e)}))}))})).next((function(){return o}))}))},t.prototype.sr=function(t,e,n){var r,i,o=this;return this.Qn.Zn(t,e,n).next((function(n){return r=n,o.Wn.nr(t,e)})).next((function(e){return i=e,o.rr(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,h=r.get(c),l=u.ot(h,h,o.Tn);r=l instanceof $o?r.Ae(c,l):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){e.matches(n)||(r=r.remove(t))})),r}))},t.prototype.rr=function(t,e,n){for(var r=Es(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Mo&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Qn.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof $o&&(c=c.Ae(t,e))})),c}))},t}(),la=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.hr=n,this.or=r}return t.ar=function(e,n){for(var r=Es(),i=Es(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),fa=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.ur=function(t){return n.cr(t)},this._r=function(t){return e.lr(t)})}return t.prototype.cr=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this._r&&this._r(t),t},t}();fa.dr=-1;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var pa=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},da=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Tr=t,this.Er=e,this.Ir=n,this.wr=r,this.Rr=i,this.Ar=0,this.mr=null,this.Pr=Date.now(),this.reset()}return t.prototype.reset=function(){this.Ar=0},t.prototype.Vr=function(){this.Ar=this.Rr},t.prototype.gr=function(t){var e=this;this.cancel();var n=Math.floor(this.Ar+this.pr()),r=Math.max(0,Date.now()-this.Pr),i=Math.max(0,n-r);i>0&&zs("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Ar+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.mr=this.Tr.yr(this.Er,i,(function(){return e.Pr=Date.now(),t()})),this.Ar*=this.wr,this.Ar<this.Ir&&(this.Ar=this.Ir),this.Ar>this.Rr&&(this.Ar=this.Rr)},t.prototype.cancel=function(){null!==this.mr&&(this.mr.cancel(),this.mr=null)},t.prototype.pr=function(){return(Math.random()-.5)*this.Ar},t}(),va=function(){function t(t,e,n,r,i){this.br=t,this.Er=e,this.vr=n,this.op=r,this.Sr=i,this.Dr=new pa,this.then=this.Dr.promise.then.bind(this.Dr.promise),this.catch=this.Dr.promise.catch.bind(this.Dr.promise),this.Dr.promise.catch((function(t){}))}return t.Cr=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.Fr=setTimeout((function(){return e.Nr()}),t)},t.prototype.kr=function(){return this.Nr()},t.prototype.cancel=function(t){null!==this.Fr&&(this.clearTimeout(),this.Dr.reject(new Vi(Ui.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.Nr=function(){var t=this;this.br.$r((function(){return null!==t.Fr?(t.clearTimeout(),t.op().then((function(e){return t.Dr.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.Fr&&(this.Sr(this),clearTimeout(this.Fr),this.Fr=null)},t}(),ya=function(){function t(){var t=this;this.Mr=Promise.resolve(),this.Lr=Promise.resolve(),this.Or=!1,this.xr=[],this.Br=null,this.qr=!1,this.Ur=[],this.Qr=new da(this,"async_queue_retry"),this.Wr=function(){t.jr("async_queue_retry")};var e=qs.nt().window;e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wr)}return Object.defineProperty(t.prototype,"Kr",{get:function(){return this.Or},enumerable:!0,configurable:!0}),t.prototype.$r=function(t){this.enqueue(t)},t.prototype.Gr=function(t){this.zr(),this.Hr(t)},t.prototype.Yr=function(t){return this.zr(),this.Hr(t)},t.prototype.Jr=function(t){return Mt(this,void 0,void 0,(function(){var e;return Lt(this,(function(n){switch(n.label){case 0:return this.zr(),this.Or?[3,2]:(this.Or=!0,(e=qs.nt().window)&&e.removeEventListener("visibilitychange",this.Wr),[4,this.Yr(t)]);case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},t.prototype.enqueue=function(t){return this.zr(),this.Or?new Promise((function(t){})):this.Hr(t)},t.prototype.Xr=function(t){var e=this;this.zr(),this.Or||(this.Lr=this.Lr.then((function(){var n=new pa,r=function(){return Mt(e,void 0,void 0,(function(){var e;return Lt(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,t()];case 1:return i.sent(),n.resolve(),this.Qr.reset(),[3,3];case 2:if("IndexedDbTransactionError"!==(e=i.sent()).name)throw n.resolve(),e;return zs("AsyncQueue","Operation failed with retryable error: "+e),this.Qr.gr(r),[3,3];case 3:return[2]}}))}))};return e.$r(r),n.promise})))},t.prototype.Hr=function(t){var e=this,n=this.Mr.then((function(){return e.qr=!0,t().catch((function(t){throw e.Br=t,e.qr=!1,$s("INTERNAL UNHANDLED ERROR: ",t.stack||t.message||""),t})).then((function(t){return e.qr=!1,t}))}));return this.Mr=n,n},t.prototype.yr=function(t,e,n){var r=this;this.zr(),this.Ur.indexOf(t)>-1&&(e=0);var i=va.Cr(this,t,e,n,(function(t){return r.Zr(t)}));return this.xr.push(i),i},t.prototype.zr=function(){this.Br&&Qs()},t.prototype.th=function(){},t.prototype.eh=function(){return Mt(this,void 0,void 0,(function(){var t;return Lt(this,(function(e){switch(e.label){case 0:return[4,t=this.Mr];case 1:e.sent(),e.label=2;case 2:if(t!==this.Mr)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.sh=function(t){for(var e=0,n=this.xr;e<n.length;e++)if(n[e].Er===t)return!0;return!1},t.prototype.jr=function(t){var e=this;return this.eh().then((function(){e.xr.sort((function(t,e){return t.vr-e.vr}));for(var n=0,r=e.xr;n<r.length;n++){var i=r[n];if(i.kr(),"all"!==t&&i.Er===t)break}return e.eh()}))},t.prototype.ih=function(t){this.Ur.push(t)},t.prototype.Zr=function(t){var e=this.xr.indexOf(t);this.xr.splice(e,1)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ma(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=Zs(n,i);return 0===s?Zs(r,o):s}var Aa=function(){function t(t){this.nh=t,this.buffer=new fs(ma),this.rh=0}return t.prototype.hh=function(){return++this.rh},t.prototype.oh=function(t){var e=[t,this.hh()];if(this.buffer.size<this.nh)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();ma(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),t}(),ga={ah:!1,uh:0,_h:0,lh:0},ba=function(){function t(t,e,n){this.dh=t,this.fh=e,this.Th=n}return t.Eh=function(e){return new t(e,t.Ih,t.wh)},t}();ba.Rh=-1,ba.Ah=1048576,ba.mh=41943040,ba.Ih=10,ba.wh=1e3,ba.Ph=new ba(ba.mh,ba.Ih,ba.wh),ba.DISABLED=new ba(ba.Rh,0,0);var wa=function(){function t(t,e){this.Vh=t,this.br=e,this.gh=!1,this.ph=null}return t.prototype.start=function(t){this.Vh.yh.dh!==ba.Rh&&this.bh(t)},t.prototype.stop=function(){this.ph&&(this.ph.cancel(),this.ph=null)},Object.defineProperty(t.prototype,"vh",{get:function(){return null!==this.ph},enumerable:!0,configurable:!0}),t.prototype.bh=function(t){var e=this,n=this.gh?3e5:6e4;zs("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ph=this.br.yr("lru_garbage_collection",n,(function(){return Mt(e,void 0,void 0,(function(){var e;return Lt(this,(function(n){switch(n.label){case 0:this.ph=null,this.gh=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.Sh(this.Vh)];case 2:return n.sent(),[3,7];case 3:return"IndexedDbTransactionError"!==(e=n.sent()).name?[3,4]:(zs("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]);case 4:return[4,ku(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.bh(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),Ea=function(){function t(t,e){this.Dh=t,this.yh=e}return t.prototype.Ch=function(t,e){return this.Dh.Fh(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.Nh=function(t,e){var n=this;if(0===e)return sa.resolve(fa.dr);var r=new Aa(e);return this.Dh.js(t,(function(t){return r.oh(t.sequenceNumber)})).next((function(){return n.Dh.kh(t,(function(t){return r.oh(t)}))})).next((function(){return r.maxValue}))},t.prototype.$h=function(t,e,n){return this.Dh.$h(t,e,n)},t.prototype.Mh=function(t,e){return this.Dh.Mh(t,e)},t.prototype.Lh=function(t,e){var n=this;return this.yh.dh===ba.Rh?(zs("LruGarbageCollector","Garbage collection skipped; disabled"),sa.resolve(ga)):this.Oh(t).next((function(r){return r<n.yh.dh?(zs("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.yh.dh),ga):n.xh(t,e)}))},t.prototype.Oh=function(t){return this.Dh.Oh(t)},t.prototype.xh=function(t,e){var n,r,i,o,s,a,u,c=this,h=Date.now();return this.Ch(t,this.yh.fh).next((function(e){return e>c.yh.Th?(zs("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.yh.Th+" from "+e),r=c.yh.Th):r=e,o=Date.now(),c.Nh(t,r)})).next((function(r){return n=r,s=Date.now(),c.$h(t,n,e)})).next((function(e){return i=e,a=Date.now(),c.Mh(t,n)})).next((function(t){return u=Date.now(),Gs()<=ht.DEBUG&&zs("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-h)+"ms"),sa.resolve({ah:!0,uh:r,_h:i,lh:t})}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ca(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Ia(e)),e=Ta(t.get(n),e);return Ia(e)}function Ta(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Ia(t){return t+""}function xa(t){var e=t.length;if(Hs(e>=2),2===e)return Hs(""===t.charAt(0)&&""===t.charAt(1)),Hi.G;for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&Qs(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:Qs()}o=s+2}return new Hi(r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _a=function(){function t(e){this.db=e,12.2===t.Bh(K())&&$s("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.qh=function(e,n,r){return zs("SimpleDb","Opening database:",e),new sa((function(i,o){var s=window.indexedDB.open(e,n);s.onsuccess=function(e){var n=e.target.result;i(new t(n))},s.onblocked=function(){o(new Vi(Ui.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=function(t){var e=t.target.error;"VersionError"===e.name?o(new Vi(Ui.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o(e)},s.onupgradeneeded=function(t){zs("SimpleDb",'Database "'+e+'" requires upgrade from version:',t.oldVersion);var n=t.target.result;r.createOrUpgrade(n,s.transaction,t.oldVersion,tu).next((function(){zs("SimpleDb","Database upgrade to version "+tu+" complete")}))}})).yn()},t.delete=function(t){return zs("SimpleDb","Removing database:",t),Da(window.indexedDB.deleteDatabase(t)).yn()},t.Uh=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(t.Qh())return!0;if(void 0===window.navigator)return!1;var e=K(),n=t.Bh(e),r=0<n&&n<10,i=t.Wh(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Qh=function(){var t;return"undefined"!=typeof __PRIVATE_process&&"YES"===(null===(t=__PRIVATE_process.__PRIVATE_env)||void 0===t?void 0:t.jh)},t.Kh=function(t,e){return t.store(e)},t.Bh=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Wh=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Gh=function(t){this.db.onversionchange=function(e){return t(e)}},t.prototype.runTransaction=function(t,e,n){return Mt(this,void 0,void 0,(function(){var r,i,o,s,a;return Lt(this,(function(u){switch(u.label){case 0:r="readonly"===t,i=0,o=function(){var t,o,a,u,c;return Lt(this,(function(h){switch(h.label){case 0:++i,t=ka.open(s.db,r?"readonly":"readwrite",e),h.label=1;case 1:return h.trys.push([1,3,,4]),o=n(t).catch((function(e){return t.abort(e),sa.reject(e)})).yn(),a={},o.catch((function(){})),[4,t.zh];case 2:return[2,(a.value=(h.sent(),o),a)];case 3:return u=h.sent(),c="FirebaseError"!==u.name&&i<3,zs("SimpleDb","Transaction failed with error: %s. Retrying: %s.",u.message,c),c?[3,4]:[2,{value:Promise.reject(u)}];case 4:return[2]}}))},s=this,u.label=1;case 1:return[5,o()];case 2:if("object"==typeof(a=u.sent()))return[2,a.value];u.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db.close()},t}(),Na=function(){function t(t){this.Hh=t,this.Yh=!1,this.Jh=null}return Object.defineProperty(t.prototype,"Pn",{get:function(){return this.Yh},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Xh",{get:function(){return this.Jh},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Hh=t},enumerable:!0,configurable:!0}),t.prototype.done=function(){this.Yh=!0},t.prototype.Zh=function(t){this.Jh=t},t.prototype.delete=function(){return Da(this.Hh.delete())},t}(),Sa=function(t){function e(e){var n=this;return(n=t.call(this,Ui.UNAVAILABLE,"IndexedDB transaction failed: "+e)||this).name="IndexedDbTransactionError",n}return Pt(e,t),e}(Vi),ka=function(){function t(t){var e=this;this.transaction=t,this.aborted=!1,this.to=new pa,this.transaction.oncomplete=function(){e.to.resolve()},this.transaction.onabort=function(){t.error?e.to.reject(new Sa(t.error)):e.to.resolve()},this.transaction.onerror=function(t){var n=Ra(t.target.error);e.to.reject(new Sa(n))}}return t.open=function(e,n,r){return new t(e.transaction(r,n))},Object.defineProperty(t.prototype,"zh",{get:function(){return this.to.promise},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){t&&this.to.reject(t),this.aborted||(zs("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Oa(e)},t}(),Oa=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(zs("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(zs("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Da(n)},t.prototype.add=function(t){return zs("SimpleDb","ADD",this.store.name,t,t),Da(this.store.add(t))},t.prototype.get=function(t){var e=this;return Da(this.store.get(t)).next((function(n){return void 0===n&&(n=null),zs("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return zs("SimpleDb","DELETE",this.store.name,t),Da(this.store.delete(t))},t.prototype.count=function(){return zs("SimpleDb","COUNT",this.store.name),Da(this.store.count())},t.prototype.eo=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.so(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.io=function(t,e){zs("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.no=!1;var r=this.cursor(n);return this.so(r,(function(t,e,n){return n.delete()}))},t.prototype.ro=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.so(r,e)},t.prototype.ho=function(t){var e=this.cursor({});return new sa((function(n,r){e.onerror=function(t){var e=Ra(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.so=function(t,e){var n=[];return new sa((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Na(i),s=e(i.primaryKey,i.value,o);if(s instanceof sa){var a=s.catch((function(t){return o.done(),sa.reject(t)}));n.push(a)}o.Pn?r():null===o.Xh?i.continue():i.continue(o.Xh)}else r()}})).next((function(){return sa.vn(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.no?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Da(t){return new sa((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=Ra(t.target.error);n(e)}}))}var ja=!1;function Ra(t){var e=_a.Bh(K());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Vi("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return ja||(ja=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pa=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.jn=n,this.oo=r,this.ao={}}return t.uo=function(e,n,r,i){return Hs(""!==e.uid),new t(e.t()?e.uid:"",n,r,i)},t.prototype.co=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ba(t).ro({index:ou.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype._o=function(t,e,n){return this.lo(t).next((function(e){return e.lastStreamToken=n.toBase64(),Va(t).put(e)}))},t.prototype.do=function(t){return this.lo(t).next((function(t){return no.fromBase64String(t.lastStreamToken)}))},t.prototype.fo=function(t,e){return this.lo(t).next((function(n){return n.lastStreamToken=e.toBase64(),Va(t).put(n)}))},t.prototype.To=function(t,e,n,r){var i=this,o=Ua(t),s=Ba(t);return s.add({}).next((function(a){Hs("number"==typeof a);for(var u=new ia(a,e,n,r),c=i.serializer.Eo(i.userId,u),h=[],l=new fs((function(t,e){return Zs(t.j(),e.j())})),f=0,p=r;f<p.length;f++){var d=p[f],v=su.key(i.userId,d.key.path,a);l=l.add(d.key.path.M()),h.push(s.put(c)),h.push(o.put(v,su.PLACEHOLDER))}return l.forEach((function(e){h.push(i.jn.Io(t,e))})),t.qn((function(){i.ao[a]=u.keys()})),sa.vn(h).next((function(){return u}))}))},t.prototype.wo=function(t,e){var n=this;return Ba(t).get(e).next((function(t){return t?(Hs(t.userId===n.userId),n.serializer.Ro(t)):null}))},t.prototype.Ao=function(t,e){var n=this;return this.ao[e]?sa.resolve(this.ao[e]):this.wo(t,e).next((function(t){if(t){var r=t.keys();return n.ao[e]=r,r}return null}))},t.prototype.mo=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Ba(t).ro({index:ou.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(Hs(e.batchId>=r),o=n.serializer.Ro(e)),i.done()})).next((function(){return o}))},t.prototype.Po=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Ba(t).ro({index:ou.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.Vo=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ba(t).eo(ou.userMutationsIndex,n).next((function(t){return t.map((function(t){return e.serializer.Ro(t)}))}))},t.prototype.Gn=function(t,e){var n=this,r=su.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Ua(t).ro({range:i},(function(r,i,s){var a=r[0],u=r[1],c=r[2],h=xa(u);if(a===n.userId&&e.path.isEqual(h))return Ba(t).get(c).next((function(t){if(!t)throw Qs();Hs(t.userId===n.userId),o.push(n.serializer.Ro(t))}));s.done()})).next((function(){return o}))},t.prototype.Xn=function(t,e){var n=this,r=new fs(Zs),i=[];return e.forEach((function(e){var o=su.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Ua(t).ro({range:s},(function(t,i,o){var s=t[0],a=t[1],u=t[2],c=xa(a);s===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(a)})),sa.vn(i).next((function(){return n.po(t,r)}))},t.prototype.nr=function(t,e){var n=this,r=e.path,i=r.length+1,o=su.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new fs(Zs);return Ua(t).ro({range:s},(function(t,e,o){var s=t[0],u=t[1],c=t[2],h=xa(u);s===n.userId&&r.q(h)?h.length===i&&(a=a.add(c)):o.done()})).next((function(){return n.po(t,a)}))},t.prototype.po=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Ba(t).get(e).next((function(t){if(null===t)throw Qs();Hs(t.userId===n.userId),r.push(n.serializer.Ro(t))})))})),sa.vn(i).next((function(){return r}))},t.prototype.yo=function(t,e){var n=this;return La(t.bo,this.userId,e).next((function(r){return t.qn((function(){n.vo(e.batchId)})),sa.forEach(r,(function(e){return n.oo.So(t,e)}))}))},t.prototype.vo=function(t){delete this.ao[t]},t.prototype.Do=function(t){var e=this;return this.co(t).next((function(n){if(!n)return sa.resolve();var r=IDBKeyRange.lowerBound(su.prefixForUser(e.userId)),i=[];return Ua(t).ro({range:r},(function(t,n,r){if(t[0]===e.userId){var o=xa(t[1]);i.push(o)}else r.done()})).next((function(){Hs(0===i.length)}))}))},t.prototype.Co=function(t,e){return Ma(t,this.userId,e)},t.prototype.lo=function(t){var e=this;return Va(t).get(this.userId).next((function(t){return t||new iu(e.userId,-1,"")}))},t}();function Ma(t,e,n){var r=su.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Ua(t).ro({range:o,no:!0},(function(t,n,r){var o=t[0],a=t[1];t[2],o===e&&a===i&&(s=!0),r.done()})).next((function(){return s}))}function La(t,e,n){var r=t.store(ou.store),i=t.store(su.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.ro({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){Hs(1===a)})));for(var c=[],h=0,l=n.mutations;h<l.length;h++){var f=l[h],p=su.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return sa.vn(o).next((function(){return c}))}function Ba(t){return Cu.Kh(t,ou.store)}function Ua(t){return Cu.Kh(t,su.store)}function Va(t){return Cu.Kh(t,iu.store)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qa=function(){function t(t){this.Fo=t}return t.prototype.next=function(){return this.Fo+=2,this.Fo},t.No=function(){return new t(0)},t.ko=function(){return new t(-1)},t}(),Fa=function(){function t(t,e){this.oo=t,this.serializer=e}return t.prototype.$o=function(t){var e=this;return this.Mo(t).next((function(n){var r=new qa(n.highestTargetId);return n.highestTargetId=r.next(),e.Lo(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.Oo=function(t){return this.Mo(t).next((function(t){return Wi.v(new $i(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.xo=function(t){return za(t.bo)},t.prototype.Bo=function(t,e,n){var r=this;return this.Mo(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.C()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Lo(t,i)}))},t.prototype.qo=function(t,e){var n=this;return this.Uo(t,e).next((function(){return n.Mo(t).next((function(r){return r.targetCount+=1,n.Qo(e,r),n.Lo(t,r)}))}))},t.prototype.Wo=function(t,e){return this.Uo(t,e)},t.prototype.jo=function(t,e){var n=this;return this.Ko(t,e.targetId).next((function(){return Ga(t).delete(e.targetId)})).next((function(){return n.Mo(t)})).next((function(e){return Hs(e.targetCount>0),e.targetCount-=1,n.Lo(t,e)}))},t.prototype.$h=function(t,e,n){var r=this,i=0,o=[];return Ga(t).ro((function(s,a){var u=r.serializer.Go(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.jo(t,u)))})).next((function(){return sa.vn(o)})).next((function(){return i}))},t.prototype.js=function(t,e){var n=this;return Ga(t).ro((function(t,r){var i=n.serializer.Go(r);e(i)}))},t.prototype.Mo=function(t){return Ka(t.bo)},t.prototype.Lo=function(t,e){return(n=t,Cu.Kh(n,pu.store)).put(pu.key,e);var n},t.prototype.Uo=function(t,e){return Ga(t).put(this.serializer.zo(e))},t.prototype.Qo=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.Ho=function(t){return this.Mo(t).next((function(t){return t.targetCount}))},t.prototype.Yo=function(t,e){var n=this,r=e.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Ga(t).ro({range:i,index:lu.queryTargetsIndexName},(function(t,r,i){var s=n.serializer.Go(r);e.isEqual(s.target)&&(o=s,i.done())})).next((function(){return o}))},t.prototype.Jo=function(t,e,n){var r=this,i=[],o=$a(t);return e.forEach((function(e){var s=Ca(e.path);i.push(o.put(new fu(n,s))),i.push(r.oo.Xo(t,n,e))})),sa.vn(i)},t.prototype.Zo=function(t,e,n){var r=this,i=$a(t);return sa.forEach(e,(function(e){var o=Ca(e.path);return sa.vn([i.delete([n,o]),r.oo.ta(t,n,e)])}))},t.prototype.Ko=function(t,e){var n=$a(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.ea=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=$a(t),i=Es();return r.ro({range:n,no:!0},(function(t,e,n){var r=xa(t[1]),o=new Zi(r);i=i.add(o)})).next((function(){return i}))},t.prototype.Co=function(t,e){var n=Ca(e.path),r=IDBKeyRange.bound([n],[ta(n)],!1,!0),i=0;return $a(t).ro({index:fu.documentTargetsIndex,no:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.si=function(t,e){var n=this;return Ga(t).get(e).next((function(t){return t?n.serializer.Go(t):null}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ga(t){return Cu.Kh(t,lu.store)}function Ka(t){return _a.Kh(t,pu.store).get(pu.key).next((function(t){return Hs(null!==t),t}))}function za(t){return Ka(t).next((function(t){return t.highestListenSequenceNumber}))}function $a(t){return Cu.Kh(t,fu.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wa=function(){function t(t,e){this.serializer=t,this.jn=e}return t.prototype.Nn=function(t,e,n){return Ha(t).put(Ya(e),n)},t.prototype.$n=function(t,e){var n=Ha(t),r=Ya(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.sa(t,r)}))},t.prototype.Mn=function(t,e){var n=this;return Ha(t).get(Ya(e)).next((function(t){return n.ia(t)}))},t.prototype.na=function(t,e){var n=this;return Ha(t).get(Ya(e)).next((function(t){var e=n.ia(t);return e?{ra:e,size:Xa(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=ys();return this.ha(t,e,(function(t,e){var i=n.ia(e);r=r.Ae(t,i)})).next((function(){return r}))},t.prototype.oa=function(t,e){var n=this,r=ys(),i=new cs(Zi.N);return this.ha(t,e,(function(t,e){var o=n.ia(e);o?(r=r.Ae(t,o),i=i.Ae(t,Xa(e))):(r=r.Ae(t,null),i=i.Ae(t,0))})).next((function(){return{aa:r,ua:i}}))},t.prototype.ha=function(t,e,n){if(e.B())return sa.resolve();var r=IDBKeyRange.bound(e.first().path.W(),e.last().path.W()),i=e.be(),o=i.Ne();return Ha(t).ro({range:r},(function(t,e,r){for(var s=Zi.st(t);o&&Zi.N(o,s)<0;)n(o,null),o=i.Ne();o&&o.isEqual(s)&&(n(o,e),o=i.ke()?i.Ne():null),o?r.Zh(o.path.W()):r.done()})).next((function(){for(;o;)n(o,null),o=i.ke()?i.Ne():null}))},t.prototype.Zn=function(t,e,n){var r=this,i=As(),o=e.path.length+1,s={};if(n.isEqual(Wi.min())){var a=e.path.W();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.W(),c=this.serializer.ca(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=cu.collectionReadTimeIndex}return Ha(t).ro(s,(function(t,n,s){if(t.length===o){var a=r.serializer._a(n);e.path.q(a.key.path)?a instanceof $o&&e.matches(a)&&(i=i.Ae(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.la=function(t,e){var n=this,r=vs(),i=this.serializer.ca(e),o=Ha(t),s=IDBKeyRange.lowerBound(i,!0);return o.ro({index:cu.readTimeIndex,range:s},(function(t,e){var o=n.serializer._a(e);r=r.Ae(o.key,o),i=e.readTime})).next((function(){return{da:r,readTime:n.serializer.fa(i)}}))},t.prototype.Ta=function(t){var e=this,n=Ha(t),r=Wi.min();return n.ro({index:cu.readTimeIndex,reverse:!0},(function(t,n,i){n.readTime&&(r=e.serializer.fa(n.readTime)),i.done()})).next((function(){return r}))},t.prototype.Ea=function(e){return new t.Ia(this,!!e&&e.wa)},t.prototype.Ra=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Qa(t).get(hu.key).next((function(t){return Hs(!!t),t}))},t.prototype.sa=function(t,e){return Qa(t).put(hu.key,e)},t.prototype.ia=function(t){if(t){var e=this.serializer._a(t);return e instanceof Wo&&e.version.isEqual(Wi.min())?null:e}return null},t}();function Qa(t){return Cu.Kh(t,hu.store)}function Ha(t){return Cu.Kh(t,cu.store)}function Ya(t){return t.path.W()}function Xa(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Qs();e=t.noDocument}return JSON.stringify(e).length}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wa.Ia=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Aa=e,r.wa=n,r.ma=new ra((function(t){return t.toString()})),r}return Pt(e,t),e.prototype.xn=function(t){var e=this,n=[],r=0,i=new fs((function(t,e){return Zs(t.j(),e.j())}));return this.Dn.forEach((function(o,s){var a=e.ma.get(o);if(s){var u=e.Aa.serializer.Pa(s,e.readTime);i=i.add(o.path.M());var c=Xa(u);r+=c-a,n.push(e.Aa.Nn(t,o,u))}else if(r-=a,e.wa){var h=e.Aa.serializer.Pa(new Wo(o,Wi.min()),e.readTime);n.push(e.Aa.Nn(t,o,h))}else n.push(e.Aa.$n(t,o))})),i.forEach((function(r){n.push(e.Aa.jn.Io(t,r))})),n.push(this.Aa.updateMetadata(t,r)),sa.vn(n)},e.prototype.Ln=function(t,e){var n=this;return this.Aa.na(t,e).next((function(t){return null===t?(n.ma.set(e,0),null):(n.ma.set(e,t.size),t.ra)}))},e.prototype.On=function(t,e){var n=this;return this.Aa.oa(t,e).next((function(t){var e=t.aa;return t.ua.forEach((function(t,e){n.ma.set(t,e)})),e}))},e}(aa);var Za=function(){function t(){this.Va=new Ja}return t.prototype.Io=function(t,e){return this.Va.add(e),sa.resolve()},t.prototype.ir=function(t,e){return sa.resolve(this.Va.getEntries(e))},t}(),Ja=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.O(),n=t.M(),r=this.index[e]||new fs(Hi.N),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.O(),n=t.M(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new fs(Hi.N)).W()},t}(),tu=10,eu=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;Hs(n<r&&n>=0&&r<=tu);var o=new ka(e);n<1&&r>=1&&(function(t){t.createObjectStore(ru.store)}(t),function(t){t.createObjectStore(iu.store,{keyPath:iu.keyPath}),t.createObjectStore(ou.store,{keyPath:ou.keyPath,autoIncrement:!0}).createIndex(ou.userMutationsIndex,ou.userMutationsKeyPath,{unique:!0}),t.createObjectStore(su.store)}(t),vu(t),function(t){t.createObjectStore(cu.store)}(t));var s=sa.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(fu.store),t.deleteObjectStore(lu.store),t.deleteObjectStore(pu.store)}(t),vu(t)),s=s.next((function(){return function(t){var e=t.store(pu.store),n=new pu(0,0,Wi.min().C(),0);return e.put(pu.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(ou.store).eo().next((function(n){t.deleteObjectStore(ou.store),t.createObjectStore(ou.store,{keyPath:ou.keyPath,autoIncrement:!0}).createIndex(ou.userMutationsIndex,ou.userMutationsKeyPath,{unique:!0});var r=e.store(ou.store),i=n.map((function(t){return r.put(t)}));return sa.vn(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(yu.store,{keyPath:yu.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.removeAcknowledgedMutations(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(hu.store)}(t),i.addDocumentGlobal(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ensureSequenceNumbers(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.createCollectionParentIndex(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(cu.store);e.createIndex(cu.readTimeIndex,cu.readTimeIndexPath,{unique:!1}),e.createIndex(cu.collectionReadTimeIndex,cu.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.rewriteCanonicalIds(o)}))),s},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(cu.store).ro((function(t,n){e+=Xa(n)})).next((function(){var n=new hu(e);return t.store(hu.store).put(hu.key,n)}))},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(iu.store),r=t.store(ou.store);return n.eo().next((function(n){return sa.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.eo(ou.userMutationsIndex,i).next((function(r){return sa.forEach(r,(function(r){Hs(r.userId===n.userId);var i=e.serializer.Ro(r);return La(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(fu.store),n=t.store(cu.store);return za(t).next((function(t){var r=[];return n.ro((function(n,i){var o=new Hi(n),s=function(t){return[0,Ca(t)]}(o);r.push(e.get(s).next((function(n){return n?sa.resolve():function(n){return e.put(new fu(0,Ca(n),t))}(o)})))})).next((function(){return sa.vn(r)}))}))},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(du.store,{keyPath:du.keyPath});var n=e.store(du.store),r=new Ja,i=function(t){if(r.add(t)){var e=t.O(),i=t.M();return n.put({collectionId:e,parent:Ca(i)})}};return e.store(cu.store).ro({no:!0},(function(t,e){var n=new Hi(t);return i(n.M())})).next((function(){return e.store(su.store).ro({no:!0},(function(t,e){t[0];var n=t[1],r=(t[2],xa(n));return i(r.M())}))}))},t.prototype.rewriteCanonicalIds=function(t){var e=this,n=t.store(lu.store);return n.ro((function(t,r){var i=e.serializer.Go(r),o=e.serializer.zo(i);return n.put(o)}))},t}(),nu=function(t,e){this.seconds=t,this.nanoseconds=e},ru=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};ru.store="owner",ru.key="owner";var iu=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};iu.store="mutationQueues",iu.keyPath="userId";var ou=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};ou.store="mutations",ou.keyPath="batchId",ou.userMutationsIndex="userMutationsIndex",ou.userMutationsKeyPath=["userId","batchId"];var su=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Ca(e)]},t.key=function(t,e,n){return[t,Ca(e),n]},t}();su.store="documentMutations",su.PLACEHOLDER=new su;var au=function(t,e){this.path=t,this.readTime=e},uu=function(t,e){this.path=t,this.version=e},cu=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};cu.store="remoteDocuments",cu.readTimeIndex="readTimeIndex",cu.readTimeIndexPath="readTime",cu.collectionReadTimeIndex="collectionReadTimeIndex",cu.collectionReadTimeIndexPath=["parentPath","readTime"];var hu=function(t){this.byteSize=t};hu.store="remoteDocumentGlobal",hu.key="remoteDocumentGlobalKey";var lu=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};lu.store="targets",lu.keyPath="targetId",lu.queryTargetsIndexName="queryTargetsIndex",lu.queryTargetsKeyPath=["canonicalId","targetId"];var fu=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};fu.store="targetDocuments",fu.keyPath=["targetId","path"],fu.documentTargetsIndex="documentTargetsIndex",fu.documentTargetsKeyPath=["path","targetId"];var pu=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};pu.key="targetGlobalKey",pu.store="targetGlobal";var du=function(t,e){this.collectionId=t,this.parent=e};function vu(t){t.createObjectStore(fu.store,{keyPath:fu.keyPath}).createIndex(fu.documentTargetsIndex,fu.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(lu.store,{keyPath:lu.keyPath}).createIndex(lu.queryTargetsIndexName,lu.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(pu.store)}du.store="collectionParents",du.keyPath=["collectionId","parent"];var yu=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};yu.store="clientMetadata",yu.keyPath="clientId";var mu=Bt(Bt(Bt([iu.store,ou.store,su.store,cu.store,lu.store,ru.store,pu.store,fu.store],[yu.store]),[hu.store]),[du.store]),Au=function(){function t(){this.ga=new Ja}return t.prototype.Io=function(t,e){var n=this;if(!this.ga.has(e)){var r=e.O(),i=e.M();t.qn((function(){n.ga.add(e)}));var o={collectionId:r,parent:Ca(i)};return gu(t).put(o)}return sa.resolve()},t.prototype.ir=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[ta(e),""],!1,!0);return gu(t).eo(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(xa(o.parent))}return n}))},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gu(t){return Cu.Kh(t,du.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bu=function(){function t(t){this.pa=t}return t.prototype._a=function(t){if(t.document)return this.pa.mi(t.document,!!t.hasCommittedMutations);if(t.noDocument){var e=Zi.st(t.noDocument.path),n=this.ya(t.noDocument.readTime);return new Wo(e,n,{hasCommittedMutations:!!t.hasCommittedMutations})}if(t.unknownDocument){var r=Zi.st(t.unknownDocument.path),i=this.ya(t.unknownDocument.version);return new Qo(r,i)}return Qs()},t.prototype.Pa=function(t,e){var n=this.ca(e),r=t.key.path.M().W();if(t instanceof $o){var i=this.pa.Ai(t),o=t.hasCommittedMutations;return new cu(null,null,i,o,n,r)}if(t instanceof Wo){var s=t.key.path.W(),a=this.ba(t.version),u=t.hasCommittedMutations;return new cu(null,new au(s,a),null,u,n,r)}if(t instanceof Qo){var c=t.key.path.W(),h=this.ba(t.version);return new cu(new uu(c,h),null,null,!0,n,r)}return Qs()},t.prototype.ca=function(t){var e=t.C();return[e.seconds,e.nanoseconds]},t.prototype.fa=function(t){var e=new $i(t[0],t[1]);return Wi.v(e)},t.prototype.ba=function(t){var e=t.C();return new nu(e.seconds,e.nanoseconds)},t.prototype.ya=function(t){var e=new $i(t.seconds,t.nanoseconds);return Wi.v(e)},t.prototype.Eo=function(t,e){var n=this,r=e.baseMutations.map((function(t){return n.pa.vi(t)})),i=e.mutations.map((function(t){return n.pa.vi(t)}));return new ou(t,e.batchId,e.Tn.toMillis(),r,i)},t.prototype.Ro=function(t){var e=this,n=(t.baseMutations||[]).map((function(t){return e.pa.Fi(t)})),r=t.mutations.map((function(t){return e.pa.Fi(t)})),i=$i.fromMillis(t.localWriteTimeMs);return new ia(t.batchId,i,n,r)},t.prototype.Go=function(t){var e,n=this.ya(t.readTime),r=void 0!==t.lastLimboFreeSnapshotVersion?this.ya(t.lastLimboFreeSnapshotVersion):Wi.min();return e=void 0!==t.query.documents?this.pa.xi(t.query):this.pa.Wi(t.query),new os(e,t.targetId,0,t.lastListenSequenceNumber,n,r,no.fromBase64String(t.resumeToken))},t.prototype.zo=function(t){var e,n=this.ba(t.Ee),r=this.ba(t.lastLimboFreeSnapshotVersion);e=t.target.Ot()?this.pa.Oi(t.target):this.pa.Bi(t.target);var i=t.resumeToken.toBase64();return new lu(t.targetId,t.target.canonicalId(),n,i,t.sequenceNumber,r,e)},t}(),wu="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",Eu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).bo=e,r.va=n,r}return Pt(e,t),e}(ca),Cu=function(){function t(e,n,r,i,o,s,a,u){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Tr=s,this.Sa=u,this.Da=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ca=null,this.inForeground=!1,this.Fa=null,this.Na=null,this.ka=Number.NEGATIVE_INFINITY,this.$a=function(t){return Promise.resolve()},!t.Uh())throw new Vi(Ui.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");if(this.oo=new xu(this,o),this.Ma=n+t.La,this.serializer=new bu(a),this.document=i.document,this.Oa=new Fa(this.oo,this.serializer),this.jn=new Au,this.Qn=new Wa(this.serializer,this.jn),!i.window||!i.window.localStorage)throw new Vi(Ui.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=i.window,this.xa=this.window.localStorage}return t.Kh=function(t,e){if(t instanceof Eu)return _a.Kh(t.bo,e);throw Qs()},t.prototype.start=function(){var t=this;return _a.qh(this.Ma,tu,new eu(this.serializer)).then((function(e){return t.Ba=e,t.qa()})).then((function(){return t.Ua(),t.Qa(),t.Wa(),t.Ba.runTransaction("readonly",[pu.store],(function(t){return za(t)}))})).then((function(e){t.ja=new fa(e,t.Sa)})).then((function(){t.Da=!0})).catch((function(e){return t.Ba&&t.Ba.close(),Promise.reject(e)}))},t.prototype.Ka=function(t){var e=this;return this.$a=function(n){return Mt(e,void 0,void 0,(function(){return Lt(this,(function(e){return this.vh?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.Ga=function(t){var e=this;this.Ba.Gh((function(n){return Mt(e,void 0,void 0,(function(){return Lt(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.za=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Tr.$r((function(){return Mt(e,void 0,void 0,(function(){return Lt(this,(function(t){switch(t.label){case 0:return this.vh?[4,this.qa()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.qa=function(){var t=this;return this.Ba.runTransaction("readwrite",mu,(function(e){return Iu(e).put(new yu(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Ha(e).next((function(e){e||(t.isPrimary=!1,t.Tr.$r((function(){return t.$a(!1)})))}))})).next((function(){return t.Ya(e)})).next((function(n){return t.isPrimary&&!n?t.Ja(e).next((function(){return!1})):!!n&&t.Xa(e).next((function(){return!0}))}))})).catch((function(e){if(!t.allowTabSynchronization)throw e;return zs("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Tr.$r((function(){return t.$a(e)})),t.isPrimary=e}))},t.prototype.Ha=function(t){var e=this;return Tu(t).get(ru.key).next((function(t){return sa.resolve(e.Za(t))}))},t.prototype.tu=function(t){return Iu(t).delete(this.clientId)},t.prototype.eu=function(){return Mt(this,void 0,void 0,(function(){var e=this;return Lt(this,(function(n){switch(n.label){case 0:return!this.isPrimary||this.su(this.ka,18e5)?[3,2]:(this.ka=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(n){var r=t.Kh(n,yu.store);return r.eo().next((function(t){var n=e.iu(t,18e5),i=t.filter((function(t){return-1===n.indexOf(t)}));return sa.forEach(i,(function(t){return r.delete(t.clientId)})).next((function(){return i}))}))})).catch((function(){return[]}))]);case 1:n.sent().forEach((function(t){e.window.localStorage.removeItem(e.nu(t.clientId))})),n.label=2;case 2:return[2]}}))}))},t.prototype.Wa=function(){var t=this;this.Na=this.Tr.yr("client_metadata_refresh",4e3,(function(){return t.qa().then((function(){return t.eu()})).then((function(){return t.Wa()}))}))},t.prototype.Za=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ya=function(t){var e=this;return Tu(t).get(ru.key).next((function(n){if(null!==n&&e.su(n.leaseTimestampMs,5e3)&&!e.ru(n.ownerId)){if(e.Za(n)&&e.networkEnabled)return!0;if(!e.Za(n)){if(!n.allowTabSynchronization)throw new Vi(Ui.FAILED_PRECONDITION,wu);return!1}}return!(!e.networkEnabled||!e.inForeground)||Iu(t).eo().next((function(t){return void 0===e.iu(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&zs("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.hu=function(){return Mt(this,void 0,void 0,(function(){var t=this;return Lt(this,(function(e){switch(e.label){case 0:return this.Da=!1,this.ou(),this.Na&&(this.Na.cancel(),this.Na=null),this.au(),this.uu(),[4,this.Ba.runTransaction("readwrite",[ru.store,yu.store],(function(e){return t.Ja(e).next((function(){return t.tu(e)}))}))];case 1:return e.sent(),this.Ba.close(),this.cu(),[2]}}))}))},t.prototype.iu=function(t,e){var n=this;return t.filter((function(t){return n.su(t.updateTimeMs,e)&&!n.ru(t.clientId)}))},t.prototype._u=function(){var t=this;return this.Ba.runTransaction("readonly",[yu.store],(function(e){return Iu(e).eo().next((function(e){return t.iu(e,18e5).map((function(t){return t.clientId}))}))}))},t.clearPersistence=function(e){return Mt(this,void 0,void 0,(function(){var n;return Lt(this,(function(r){switch(r.label){case 0:return t.Uh()?(n=e+t.La,[4,_a.delete(n)]):[2,Promise.resolve()];case 1:return r.sent(),[2]}}))}))},Object.defineProperty(t.prototype,"vh",{get:function(){return this.Da},enumerable:!0,configurable:!0}),t.prototype.lu=function(t){return Pa.uo(t,this.serializer,this.jn,this.oo)},t.prototype.du=function(){return this.Oa},t.prototype.fu=function(){return this.Qn},t.prototype.Tu=function(){return this.jn},t.prototype.runTransaction=function(t,e,n){var r=this;zs("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Ba.runTransaction(o,mu,(function(o){return i=new Eu(o,r.ja.next()),"readwrite-primary"===e?r.Ha(o).next((function(t){return!!t||r.Ya(o)})).next((function(e){if(!e)throw $s("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Tr.$r((function(){return r.$a(!1)})),new Vi(Ui.FAILED_PRECONDITION,ua);return n(i)})).next((function(t){return r.Xa(o).next((function(){return t}))})):r.Eu(o).next((function(){return n(i)}))})).then((function(t){return i.Un(),t}))},t.prototype.Eu=function(t){var e=this;return Tu(t).get(ru.key).next((function(t){if(null!==t&&e.su(t.leaseTimestampMs,5e3)&&!e.ru(t.ownerId)&&!e.Za(t)&&!t.allowTabSynchronization)throw new Vi(Ui.FAILED_PRECONDITION,wu)}))},t.prototype.Xa=function(t){var e=new ru(this.clientId,this.allowTabSynchronization,Date.now());return Tu(t).put(ru.key,e)},t.Uh=function(){return _a.Uh()},t.Iu=function(t){var e=t.ii.projectId;return t.ii.ln||(e+="."+t.ii.database),"firestore/"+t.persistenceKey+"/"+e+"/"},t.prototype.Ja=function(t){var e=this,n=Tu(t);return n.get(ru.key).next((function(t){return e.Za(t)?(zs("IndexedDbPersistence","Releasing primary lease."),n.delete(ru.key)):sa.resolve()}))},t.prototype.su=function(t,e){var n=Date.now();return!(t<n-e||t>n&&($s("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Ua=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Fa=function(){t.Tr.$r((function(){return t.inForeground="visible"===t.document.visibilityState,t.qa()}))},this.document.addEventListener("visibilitychange",this.Fa),this.inForeground="visible"===this.document.visibilityState)},t.prototype.au=function(){this.Fa&&(this.document.removeEventListener("visibilitychange",this.Fa),this.Fa=null)},t.prototype.Qa=function(){var t=this;"function"==typeof this.window.addEventListener&&(this.Ca=function(){t.ou(),t.Tr.$r((function(){return t.hu()}))},this.window.addEventListener("unload",this.Ca))},t.prototype.uu=function(){this.Ca&&(this.window.removeEventListener("unload",this.Ca),this.Ca=null)},t.prototype.ru=function(t){try{var e=null!==this.xa.getItem(this.nu(t));return zs("IndexedDbPersistence","Client '"+t+"' "+(e?"is":"is not")+" zombied in LocalStorage"),e}catch(t){return $s("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.ou=function(){try{this.xa.setItem(this.nu(this.clientId),String(Date.now()))}catch(t){$s("Failed to set zombie client id.",t)}},t.prototype.cu=function(){try{this.xa.removeItem(this.nu(this.clientId))}catch(t){}},t.prototype.nu=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tu(t){return t.store(ru.store)}function Iu(t){return t.store(yu.store)}Cu.La="main";var xu=function(){function t(t,e){this.db=t,this.Vh=new Ea(this,e)}return t.prototype.Fh=function(t){var e=this.wu(t);return this.db.du().Ho(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.wu=function(t){var e=0;return this.kh(t,(function(t){e++})).next((function(){return e}))},t.prototype.js=function(t,e){return this.db.du().js(t,e)},t.prototype.kh=function(t,e){return this.Ru(t,(function(t,n){return e(n)}))},t.prototype.Xo=function(t,e,n){return _u(t,n)},t.prototype.ta=function(t,e,n){return _u(t,n)},t.prototype.$h=function(t,e,n){return this.db.du().$h(t,e,n)},t.prototype.So=function(t,e){return _u(t,e)},t.prototype.Au=function(t,e){return function(t,e){var n=!1;return Va(t).ho((function(r){return Ma(t,r,e).next((function(t){return t&&(n=!0),sa.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.Mh=function(t,e){var n=this,r=this.db.fu().Ea(),i=[],o=0;return this.Ru(t,(function(s,a){if(a<=e){var u=n.Au(t,s).next((function(e){if(!e)return o++,r.Mn(t,s).next((function(){return r.$n(s),$a(t).delete([0,Ca(s.path)])}))}));i.push(u)}})).next((function(){return sa.vn(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.Ie(t.va);return this.db.du().Wo(t,n)},t.prototype.mu=function(t,e){return _u(t,e)},t.prototype.Ru=function(t,e){var n,r=$a(t),i=fa.dr;return r.ro({index:fu.documentTargetsIndex},(function(t,r){var o=t[0],s=(t[1],r.path),a=r.sequenceNumber;0===o?(i!==fa.dr&&e(new Zi(xa(n)),i),i=a,n=s):i=fa.dr})).next((function(){i!==fa.dr&&e(new Zi(xa(n)),i)}))},t.prototype.Oh=function(t){return this.db.fu().Ra(t)},t}();function _u(t,e){return $a(t).put(function(t,e){return new fu(0,Ca(t.path),e)}(e,t.va))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nu=function(){function t(t,e,n){this.persistence=t,this.Pu=e,this.Vu=new cs(Zs),this.gu=new ra((function(t){return t.canonicalId()})),this.pu=Wi.min(),this.Wn=t.lu(n),this.yu=t.fu(),this.Oa=t.du(),this.bu=new ha(this.yu,this.Wn,this.persistence.Tu()),this.Pu.vu(this.bu)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.Su=function(t){return Mt(this,void 0,void 0,(function(){var e,n,r,i=this;return Lt(this,(function(o){switch(o.label){case 0:return e=this.Wn,n=this.bu,[4,this.persistence.runTransaction("Handle user change","readonly",(function(r){var o;return i.Wn.Vo(r).next((function(s){return o=s,e=i.persistence.lu(t),n=new ha(i.yu,e,i.persistence.Tu()),e.Vo(r)})).next((function(t){for(var e=[],i=[],s=Es(),a=0,u=o;a<u.length;a++){var c=u[a];e.push(c.batchId);for(var h=0,l=c.mutations;h<l.length;h++){var f=l[h];s=s.add(f.key)}}for(var p=0,d=t;p<d.length;p++){var v=d[p];i.push(v.batchId);for(var y=0,m=v.mutations;y<m.length;y++){var A=m[y];s=s.add(A.key)}}return n.Yn(r,s).next((function(t){return{Du:t,Cu:e,Fu:i}}))}))}))];case 1:return r=o.sent(),[2,(this.Wn=e,this.bu=n,this.Pu.vu(this.bu),r)]}}))}))},t.prototype.Nu=function(t){var e,n=this,r=$i.now(),i=t.reduce((function(t,e){return t.add(e.key)}),Es());return this.persistence.runTransaction("Locally write mutations","readwrite",(function(o){return n.bu.Yn(o,i).next((function(i){e=i;for(var s=[],a=0,u=t;a<u.length;a++){var c=u[a],h=c.Pt(e.get(c.key));null!=h&&s.push(new Mo(c.key,h,Fo(h.proto.mapValue),jo.exists(!0)))}return n.Wn.To(o,r,s,t)}))})).then((function(t){var n=t.In(e);return{batchId:t.batchId,Dn:n}}))},t.prototype._o=function(t){var e=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(n){var r=t.batch.keys(),i=e.yu.Ea({wa:!0});return e.Wn._o(n,t.batch,t.streamToken).next((function(){return e.ku(n,t,i)})).next((function(){return i.apply(n)})).next((function(){return e.Wn.Do(n)})).next((function(){return e.bu.Yn(n,r)}))}))},t.prototype.$u=function(t){var e=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",(function(n){var r;return e.Wn.wo(n,t).next((function(t){return Hs(null!==t),r=t.keys(),e.Wn.yo(n,t)})).next((function(){return e.Wn.Do(n)})).next((function(){return e.bu.Yn(n,r)}))}))},t.prototype.Po=function(){var t=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.Wn.Po(e)}))},t.prototype.do=function(){var t=this;return this.persistence.runTransaction("Get last stream token","readonly",(function(e){return t.Wn.do(e)}))},t.prototype.fo=function(t){var e=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary",(function(n){return e.Wn.fo(n,t)}))},t.prototype.Oo=function(){var t=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Oa.Oo(e)}))},t.prototype.Mu=function(e){var n=this,r=e.Ee,i=this.Vu;return this.persistence.runTransaction("Apply remote event","readwrite-primary",(function(o){var s=n.yu.Ea({wa:!0});i=n.Vu;var a=[];e.as.forEach((function(e,s){var u=i.get(s);if(u){a.push(n.Oa.Zo(o,e.Is,s).next((function(){return n.Oa.Jo(o,e.Ts,s)})));var c=e.resumeToken;if(c.rt()>0){var h=u.we(c,r).Ie(o.va);i=i.Ae(s,h),t.Lu(u,h,e)&&a.push(n.Oa.Wo(o,h))}}}));var u=vs(),c=Es();if(e.cs.forEach((function(t,e){c=c.add(t)})),a.push(s.getEntries(o,c).next((function(t){e.cs.forEach((function(i,c){var h=t.get(i);c instanceof Wo&&c.version.isEqual(Wi.min())?(s.$n(i,r),u=u.Ae(i,c)):null==h||c.version.S(h.version)>0||0===c.version.S(h.version)&&h.hasPendingWrites?(s.Nn(c,r),u=u.Ae(i,c)):zs("LocalStore","Ignoring outdated watch update for ",i,". Current version:",h.version," Watch version:",c.version),e._s.has(i)&&a.push(n.persistence.oo.mu(o,i))}))}))),!r.isEqual(Wi.min())){var h=n.Oa.Oo(o).next((function(t){return n.Oa.Bo(o,o.va,r)}));a.push(h)}return sa.vn(a).next((function(){return s.apply(o)})).next((function(){return n.bu.Jn(o,u)}))})).then((function(t){return n.Vu=i,t}))},t.Lu=function(t,e,n){return Hs(e.resumeToken.rt()>0),0===t.resumeToken.rt()||e.Ee.D()-t.Ee.D()>=this.Ou||n.Ts.size+n.Es.size+n.Is.size>0},t.prototype.xu=function(t){var e=this;return this.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(n){return sa.forEach(t,(function(t){return sa.forEach(t.hr,(function(r){return e.persistence.oo.Xo(n,t.targetId,r)})).next((function(){return sa.forEach(t.or,(function(r){return e.persistence.oo.ta(n,t.targetId,r)}))}))}))})).then((function(){for(var n=0,r=t;n<r.length;n++){var i=r[n],o=i.targetId;if(!i.fromCache){var s=e.Vu.get(o),a=s.Ee,u=s.Re(a);e.Vu=e.Vu.Ae(o,u)}}}))},t.prototype.Bu=function(t){var e=this;return this.persistence.runTransaction("Get next mutation batch","readonly",(function(n){return void 0===t&&(t=-1),e.Wn.mo(n,t)}))},t.prototype.qu=function(t){var e=this;return this.persistence.runTransaction("read document","readonly",(function(n){return e.bu.Kn(n,t)}))},t.prototype.Uu=function(t){var e=this;return this.persistence.runTransaction("Allocate target","readwrite",(function(n){var r;return e.Oa.Yo(n,t).next((function(i){return i?(r=i,sa.resolve(r)):e.Oa.$o(n).next((function(i){return r=new os(t,i,0,n.va),e.Oa.qo(n,r).next((function(){return r}))}))}))})).then((function(n){return null===e.Vu.get(n.targetId)&&(e.Vu=e.Vu.Ae(n.targetId,n),e.gu.set(t,n.targetId)),n}))},t.prototype.Yo=function(t,e){var n=this.gu.get(e);return void 0!==n?sa.resolve(this.Vu.get(n)):this.Oa.Yo(t,e)},t.prototype.Qu=function(t,e){var n=this,r=this.Vu.get(t),i=e?"readwrite":"readwrite-primary";return this.persistence.runTransaction("Release target",i,(function(t){return e?sa.resolve():n.persistence.oo.removeTarget(t,r)})).then((function(){n.Vu=n.Vu.remove(t),n.gu.delete(r.target)}))},t.prototype.Wu=function(t,e){var n=this,r=Wi.min(),i=Es();return this.persistence.runTransaction("Execute query","readonly",(function(o){return n.Yo(o,t.ee()).next((function(t){if(t)return r=t.lastLimboFreeSnapshotVersion,n.Oa.ea(o,t.targetId).next((function(t){i=t}))})).next((function(){return n.Pu.Zn(o,t,e?r:Wi.min(),e?i:Es())})).next((function(t){return{documents:t,ju:i}}))}))},t.prototype.ku=function(t,e,n){var r=this,i=e.batch,o=i.keys(),s=sa.resolve();return o.forEach((function(r){s=s.next((function(){return n.Mn(t,r)})).next((function(t){var o=t,s=e.Rn.get(r);Hs(null!==s),(!o||o.version.S(s)<0)&&(o=i.at(r,o,e))&&n.Nn(o,e.wn)}))})),s.next((function(){return r.Wn.yo(t,i)}))},t.prototype.Sh=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.Lh(n,e.Vu)}))},t}();Nu.Ou=3e8;var Su=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).persistence=e,i.Wn=e.lu(r),i.yu=e.fu(),i.Oa=e.du(),i}return Pt(e,t),e.prototype.start=function(){return this.Ku()},e.prototype.Gu=function(t){var e=this;return this.persistence.runTransaction("Lookup mutation documents","readonly",(function(n){return e.Wn.Ao(n,t).next((function(t){return t?e.bu.Yn(n,t):sa.resolve(null)}))}))},e.prototype.zu=function(t){this.Wn.vo(t)},e.prototype.za=function(t){this.persistence.za(t)},e.prototype._u=function(){return this.persistence._u()},e.prototype.Hu=function(t){var e=this,n=this.Vu.get(t);return n?Promise.resolve(n.target):this.persistence.runTransaction("Get target data","readonly",(function(n){return e.Oa.si(n,t).next((function(t){return t?t.target:null}))}))},e.prototype.la=function(){var t=this;return this.persistence.runTransaction("Get new document changes","readonly",(function(e){return t.yu.la(e,t.pu)})).then((function(e){var n=e.da,r=e.readTime;return t.pu=r,n}))},e.prototype.Ku=function(){return Mt(this,void 0,void 0,(function(){var t,e=this;return Lt(this,(function(n){switch(n.label){case 0:return t=this,[4,this.persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return e.yu.Ta(t)}))];case 1:return t.pu=n.sent(),[2]}}))}))},e}(Nu);function ku(t){return Mt(this,void 0,void 0,(function(){return Lt(this,(function(e){if(t.code!==Ui.FAILED_PRECONDITION||t.message!==ua)throw t;return zs("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ou=function(){function t(){this.Yu=new fs(Du.Ju),this.Xu=new fs(Du.Zu)}return t.prototype.B=function(){return this.Yu.B()},t.prototype.Xo=function(t,e){var n=new Du(t,e);this.Yu=this.Yu.add(n),this.Xu=this.Xu.add(n)},t.prototype.tc=function(t,e){var n=this;t.forEach((function(t){return n.Xo(t,e)}))},t.prototype.ta=function(t,e){this.ec(new Du(t,e))},t.prototype.sc=function(t,e){var n=this;t.forEach((function(t){return n.ta(t,e)}))},t.prototype.ic=function(t){var e=this,n=Zi.EMPTY,r=new Du(n,t),i=new Du(n,t+1),o=[];return this.Xu.Ke([r,i],(function(t){e.ec(t),o.push(t.key)})),o},t.prototype.nc=function(){var t=this;this.Yu.forEach((function(e){return t.ec(e)}))},t.prototype.ec=function(t){this.Yu=this.Yu.delete(t),this.Xu=this.Xu.delete(t)},t.prototype.rc=function(t){var e=Zi.EMPTY,n=new Du(e,t),r=new Du(e,t+1),i=Es();return this.Xu.Ke([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.Co=function(t){var e=new Du(t,0),n=this.Yu.ze(e);return null!==n&&t.isEqual(n.key)},t}(),Du=function(){function t(t,e){this.key=t,this.hc=e}return t.Ju=function(t,e){return Zi.N(t.key,e.key)||Zs(t.hc,e.hc)},t.Zu=function(t,e){return Zs(t.hc,e.hc)||Zi.N(t.key,e.key)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ju(t,e){if(0!==e.length)throw new Vi(Ui.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+Yu(e.length,"argument")+".")}function Ru(t,e,n){if(e.length!==n)throw new Vi(Ui.INVALID_ARGUMENT,"Function "+t+"() requires "+Yu(n,"argument")+", but was called with "+Yu(e.length,"argument")+".")}function Pu(t,e,n){if(e.length<n)throw new Vi(Ui.INVALID_ARGUMENT,"Function "+t+"() requires at least "+Yu(n,"argument")+", but was called with "+Yu(e.length,"argument")+".")}function Mu(t,e,n,r){if(e.length<n||e.length>r)throw new Vi(Ui.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+Yu(e.length,"argument")+".")}function Lu(t,e,n,r){Fu(t,e,Hu(n)+" argument",r)}function Bu(t,e,n,r){void 0!==r&&Lu(t,e,n,r)}function Uu(t,e,n,r){Fu(t,e,n+" option",r)}function Vu(t,e,n,r){void 0!==r&&Uu(t,e,n,r)}function qu(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){for(var o=[],s=0,a=i;s<a.length;s++){var u=a[s];if(u===r)return;o.push(Ku(u))}var c=Ku(r);throw new Vi(Ui.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(t,0,n,r,i)}function Fu(t,e,n,r){if(!("object"===e?Gu(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=Ku(r);throw new Vi(Ui.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function Gu(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function Ku(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Qs()}function zu(t,e,n){if(void 0===n)throw new Vi(Ui.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+Hu(e)+" argument, but it was undefined.")}function $u(t,e,n){to(e,(function(e,r){if(n.indexOf(e)<0)throw new Vi(Ui.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "))}))}function Wu(t,e,n,r){var i=Ku(r);return new Vi(Ui.INVALID_ARGUMENT,"Function "+t+"() requires its "+Hu(n)+" argument to be a "+e+", but it was: "+i)}function Qu(t,e,n){if(n<=0)throw new Vi(Ui.INVALID_ARGUMENT,'Function "'+t+'()" requires its '+Hu(e)+" argument to be a positive number, but it was: "+n+".")}function Hu(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function Yu(t,e){return t+" "+e+(1===t?"":"s")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xu(){if("undefined"==typeof Uint8Array)throw new Vi(Ui.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Zu(){if(!qs.nt().oc)throw new Vi(Ui.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Ju=function(){function t(t){Zu(),this.ac=t}return t.fromBase64String=function(e){Ru("Blob.fromBase64String",arguments,1),Lu("Blob.fromBase64String","string",1,e),Zu();try{return new t(no.fromBase64String(e))}catch(e){throw new Vi(Ui.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+e)}},t.fromUint8Array=function(e){if(Ru("Blob.fromUint8Array",arguments,1),Xu(),!(e instanceof Uint8Array))throw Wu("Blob.fromUint8Array","Uint8Array",1,e);return new t(no.fromUint8Array(e))},t.prototype.toBase64=function(){return Ru("Blob.toBase64",arguments,0),Zu(),this.ac.toBase64()},t.prototype.toUint8Array=function(){return Ru("Blob.toUint8Array",arguments,0),Xu(),this.ac.toUint8Array()},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.ac.isEqual(t.ac)},t}(),tc=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];!function(t,e,n,r){if(!(e instanceof Array)||e.length<1)throw new Vi(Ui.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+Yu(1,"element")+".")}(0,t);for(var n=0;n<t.length;++n)if(Lu("FieldPath","string",n,t[n]),0===t[n].length)throw new Vi(Ui.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.uc=new Xi(t)}return t.documentId=function(){return t.cc},t.prototype.isEqual=function(e){if(!(e instanceof t))throw Wu("isEqual","FieldPath",1,e);return this.uc.isEqual(e.uc)},t}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tc.cc=new tc(Xi.J().j());var ec=new RegExp("[~\\*/\\[\\]]"),nc=function(t){this._c=t},rc=function(t){function e(){return t.call(this,"FieldValue.delete")||this}return Pt(e,t),e.prototype.Di=function(t){if(2!==t.lc)throw 1===t.lc?t.dc("FieldValue.delete() can only appear at the top level of your update data"):t.dc("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");return t.Vt.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(nc),ic=function(t){function e(){return t.call(this,"FieldValue.serverTimestamp")||this}return Pt(e,t),e.prototype.Di=function(t){return new Oo(t.path,Io.instance)},e.prototype.isEqual=function(t){return t instanceof e},e}(nc),oc=function(t){function e(e){var n=this;return(n=t.call(this,"FieldValue.arrayUnion")||this).fc=e,n}return Pt(e,t),e.prototype.Di=function(t){var e=new pc({lc:3,methodName:this._c,Tc:!0},t.ii,t.serializer),n=this.fc.map((function(t){return vc(t,e)})),r=new xo(n);return new Oo(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(nc),sc=function(t){function e(e){var n=this;return(n=t.call(this,"FieldValue.arrayRemove")||this).fc=e,n}return Pt(e,t),e.prototype.Di=function(t){var e=new pc({lc:3,methodName:this._c,Tc:!0},t.ii,t.serializer),n=this.fc.map((function(t){return vc(t,e)})),r=new _o(n);return new Oo(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(nc),ac=function(t){function e(e){var n=this;return(n=t.call(this,"FieldValue.increment")||this).Ec=e,n}return Pt(e,t),e.prototype.Di=function(t){var e=new pc({lc:3,methodName:this._c},t.ii,t.serializer),n=vc(this.Ec,e),r=new No(t.serializer,n);return new Oo(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(nc),uc=function(){function t(t,e){if(Ru("GeoPoint",arguments,2),Lu("GeoPoint","number",1,t),Lu("GeoPoint","number",2,e),!isFinite(t)||t<-90||t>90)throw new Vi(Ui.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Vi(Ui.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.Ic=t,this.wc=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.Ic},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.wc},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){return this.Ic===t.Ic&&this.wc===t.wc},t.prototype.p=function(t){return Zs(this.Ic,t.Ic)||Zs(this.wc,t.wc)},t}(),cc=/^__.*__$/,hc=function(){function t(t,e,n){this.data=t,this.Vt=e,this.fieldTransforms=n}return t.prototype.Rc=function(t,e){var n=[];return null!==this.Vt?n.push(new Mo(t,this.data,this.Vt,e)):n.push(new Po(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new Lo(t,this.fieldTransforms)),n},t}(),lc=function(){function t(t,e,n){this.data=t,this.Vt=e,this.fieldTransforms=n}return t.prototype.Rc=function(t,e){var n=[new Mo(t,this.data,this.Vt,e)];return this.fieldTransforms.length>0&&n.push(new Lo(t,this.fieldTransforms)),n},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fc(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Qs()}}var pc=function(){function t(t,e,n,r,i){this.settings=t,this.ii=e,this.serializer=n,void 0===r&&this.Ac(),this.fieldTransforms=r||[],this.Vt=i||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lc",{get:function(){return this.settings.lc},enumerable:!0,configurable:!0}),t.prototype.mc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.ii,this.serializer,this.fieldTransforms,this.Vt)},t.prototype.Pc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.mc({path:n,Tc:!1});return r.Vc(t),r},t.prototype.gc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.mc({path:n,Tc:!1});return r.Ac(),r},t.prototype.pc=function(t){return this.mc({path:void 0,Tc:!0})},t.prototype.dc=function(t){var e=!this.path||this.path.B()?"":" (found in field "+this.path.toString()+")";return new Vi(Ui.INVALID_ARGUMENT,"Function "+this.settings.methodName+"() called with invalid data. "+t+e)},t.prototype.contains=function(t){return void 0!==this.Vt.find((function(e){return t.q(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.q(e.field)}))},t.prototype.Ac=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Vc(this.path.get(t))},t.prototype.Vc=function(t){if(0===t.length)throw this.dc("Document fields must not be empty");if(fc(this.lc)&&cc.test(t))throw this.dc('Document fields cannot begin and end with "__"')},t}(),dc=function(){function t(t,e){this.ii=t,this.serializer=e||qs.nt().yc(t)}return t.prototype.bc=function(t,e){var n=this.vc(0,t);Ac("Data must be an object, but it was:",n,e);var r=yc(e,n);return new hc(new Vo(r),null,n.fieldTransforms)},t.prototype.Sc=function(t,e,n){var r=this.vc(2,t);Ac("Data must be an object, but it was:",r,e);var i,o,s=yc(e,r);if(n){for(var a=[],u=0,c=n;u<c.length;u++){var h=c[u],l=void 0;if(h instanceof tc)l=h.uc;else{if("string"!=typeof h)throw Qs();l=bc(t,h)}if(!r.contains(l))throw new Vi(Ui.INVALID_ARGUMENT,"Field '"+l+"' is specified in your field mask but missing from your input data.");wc(a,l)||a.push(l)}i=new ko(a),o=r.fieldTransforms.filter((function(t){return i.dt(t.field)}))}else i=new ko(r.Vt),o=r.fieldTransforms;return new hc(new Vo(s),i,o)},t.prototype.Dc=function(t,e){var n=this.vc(1,t);Ac("Data must be an object, but it was:",n,e);var r=[],i=new qo;to(e,(function(e,o){var s=bc(t,e),a=n.gc(s);if(o instanceof rc)r.push(s);else{var u=vc(o,a);null!=u&&(r.push(s),i.set(s,u))}}));var o=new ko(r);return new lc(i.yt(),o,n.fieldTransforms)},t.prototype.Cc=function(t,e,n,r){var i=this.vc(1,t),o=[gc(t,e)],s=[n];if(r.length%2!=0)throw new Vi(Ui.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var a=0;a<r.length;a+=2)o.push(gc(t,r[a])),s.push(r[a+1]);for(var u=[],c=new qo,h=o.length-1;h>=0;--h)if(!wc(u,o[h])){var l=o[h],f=s[h],p=i.gc(l);if(f instanceof rc)u.push(l);else{var d=vc(f,p);null!=d&&(u.push(l),c.set(l,d))}}var v=new ko(u);return new lc(c.yt(),v,i.fieldTransforms)},t.prototype.vc=function(t,e){return new pc({lc:t,methodName:e,path:Xi.G,Tc:!1},this.ii,this.serializer)},t.prototype.Fc=function(t,e,n){return void 0===n&&(n=!1),vc(e,this.vc(n?4:3,t))},t}();function vc(t,e){if(mc(t))return Ac("Unsupported field value:",e,t),yc(t,e);if(t instanceof nc)return function(t,e){if(!fc(e.lc))throw e.dc(t._c+"() can only be used with update() and set()");if(null===e.path)throw e.dc(t._c+"() is not currently supported inside arrays");var n=t.Di(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.Vt.push(e.path),t instanceof Array){if(e.settings.Tc&&4!==e.lc)throw e.dc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=vc(o[i],e.pc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return e.serializer.ai(t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=$i.fromDate(t);return{timestampValue:e.serializer.C(n)}}if(t instanceof $i){var r=new $i(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:e.serializer.C(r)}}if(t instanceof uc)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ju)return{bytesValue:e.serializer.ui(t)};if(t instanceof dh){var i=e.ii,o=t.firestore.Nc;if(!o.isEqual(i))throw e.dc("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:e.serializer._i(t.kc.path,t.firestore.Nc)}}throw e.dc("Unsupported field value: "+Ku(t))}(t,e)}function yc(t,e){var n={};return eo(t)?e.path&&e.path.length>0&&e.Vt.push(e.path):to(t,(function(t,r){var i=vc(r,e.Pc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function mc(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof $i||t instanceof uc||t instanceof Ju||t instanceof dh||t instanceof nc)}function Ac(t,e,n){if(!mc(n)||!Gu(n)){var r=Ku(n);throw"an object"===r?e.dc(t+" a custom object"):e.dc(t+" "+r)}}function gc(t,e){if(e instanceof tc)return e.uc;if("string"==typeof e)return bc(t,e);throw new Vi(Ui.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function bc(t,e){try{return function(t){if(t.search(ec)>=0)throw new Vi(Ui.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(tc.bind.apply(tc,Bt([void 0],t.split("."))))}catch(e){throw new Vi(Ui.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).uc}catch(e){var n=(r=e)instanceof Error?r.message:r.toString();throw new Vi(Ui.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. "+n)}var r}function wc(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ec=function(){function t(t,e,n,r,i,o){this.Tr=t,this.$c=n,this.Mc=r,this.Lc=i,this.listener=o,this.state=0,this.Oc=0,this.xc=null,this.stream=null,this.Qr=new da(t,e)}return t.prototype.Bc=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.qc=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.Uc()},t.prototype.stop=function(){return Mt(this,void 0,void 0,(function(){return Lt(this,(function(t){switch(t.label){case 0:return this.Bc()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.Qc=function(){this.state=0,this.Qr.reset()},t.prototype.Wc=function(){var t=this;this.qc()&&null===this.xc&&(this.xc=this.Tr.yr(this.$c,6e4,(function(){return t.jc()})))},t.prototype.Kc=function(t){this.Gc(),this.stream.send(t)},t.prototype.jc=function(){return Mt(this,void 0,void 0,(function(){return Lt(this,(function(t){return this.qc()?[2,this.close(0)]:[2]}))}))},t.prototype.Gc=function(){this.xc&&(this.xc.cancel(),this.xc=null)},t.prototype.close=function(t,e){return Mt(this,void 0,void 0,(function(){return Lt(this,(function(n){switch(n.label){case 0:return this.Gc(),this.Qr.cancel(),this.Oc++,3!==t?this.Qr.reset():e&&e.code===Ui.RESOURCE_EXHAUSTED?($s(e.toString()),$s("Using maximum backoff delay to prevent overloading the backend."),this.Qr.Vr()):e&&e.code===Ui.UNAUTHENTICATED&&this.Lc._(),null!==this.stream&&(this.zc(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Hc(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.zc=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.Yc(this.Oc),n=this.Oc;this.Lc.getToken().then((function(e){t.Oc===n&&t.Jc(e)}),(function(n){e((function(){var e=new Vi(Ui.UNKNOWN,"Fetching auth token failed: "+n.message);return t.Xc(e)}))}))},t.prototype.Jc=function(t){var e=this,n=this.Yc(this.Oc);this.stream=this.Zc(t),this.stream.t_((function(){n((function(){return e.state=2,e.listener.t_()}))})),this.stream.Hc((function(t){n((function(){return e.Xc(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.Uc=function(){var t=this;this.state=4,this.Qr.gr((function(){return Mt(t,void 0,void 0,(function(){return Lt(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.Xc=function(t){return zs("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.Yc=function(t){var e=this;return function(n){e.Tr.$r((function(){return e.Oc===t?n():(zs("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Cc=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).serializer=i,s}return Pt(e,t),e.prototype.Zc=function(t){return this.Mc.e_("Listen",t)},e.prototype.onMessage=function(t){this.Qr.reset();var e=this.serializer.pi(t),n=this.serializer.bi(t);return this.listener.s_(e,n)},e.prototype.i_=function(t){var e={};e.database=this.serializer.wi,e.addTarget=this.serializer.ee(t);var n=this.serializer.zi(t);n&&(e.labels=n),this.Kc(e)},e.prototype.n_=function(t){var e={};e.database=this.serializer.wi,e.removeTarget=t,this.Kc(e)},e}(Ec),Tc=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).serializer=i,s.r_=!1,s.lastStreamToken=no.ht,s}return Pt(e,t),Object.defineProperty(e.prototype,"h_",{get:function(){return this.r_},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.r_=!1,t.prototype.start.call(this)},e.prototype.zc=function(){this.r_&&this.o_([])},e.prototype.Zc=function(t){return this.Mc.e_("Write",t)},e.prototype.onMessage=function(t){if(Hs(!!t.streamToken),this.lastStreamToken=this.serializer.ci(t.streamToken),this.r_){this.Qr.reset();var e=this.serializer.Li(t.writeResults,t.commitTime),n=this.serializer.fromVersion(t.commitTime);return this.listener.a_(n,e)}return Hs(!t.writeResults||0===t.writeResults.length),this.r_=!0,this.listener.u_()},e.prototype.c_=function(){var t={};t.database=this.serializer.wi,this.Kc(t)},e.prototype.o_=function(t){var e=this,n={streamToken:this.serializer.ui(this.lastStreamToken),writes:t.map((function(t){return e.serializer.vi(t)}))};this.Kc(n)},e}(Ec),Ic=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Mc=e,i.credentials=n,i.serializer=r,i}return Pt(e,t),e.prototype.l_=function(t,e){var n=this;return this.credentials.getToken().then((function(r){return n.Mc.l_(t,e,r)})).catch((function(t){throw t.code===Ui.UNAUTHENTICATED&&n.credentials._(),t}))},e.prototype.d_=function(t,e){var n=this;return this.credentials.getToken().then((function(r){return n.Mc.d_(t,e,r)})).catch((function(t){throw t.code===Ui.UNAUTHENTICATED&&n.credentials._(),t}))},e}((function(){this.__=void 0})),xc=function(){function t(t){this.f_=t,this.T_=bs(),this.mutations=[],this.E_=!1,this.I_=null,this.w_=new Set}return t.prototype.R_=function(t){return Mt(this,void 0,void 0,(function(){var e,n=this;return Lt(this,(function(r){switch(r.label){case 0:if(this.A_(),this.mutations.length>0)throw new Vi(Ui.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Mt(this,void 0,void 0,(function(){var n,r,i,o,s;return Lt(this,(function(a){switch(a.label){case 0:return n=Ys(t),r={database:n.serializer.wi,documents:e.map((function(t){return n.serializer.fi(t)}))},[4,n.d_("BatchGetDocuments",r)];case 1:return i=a.sent(),o=new Map,i.forEach((function(t){var e=n.serializer.gi(t);o.set(e.key.toString(),e)})),s=[],[2,(e.forEach((function(t){var e=o.get(t.toString());Hs(!!e),s.push(e)})),s)]}}))}))}(this.f_,t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof Wo||t instanceof $o?n.m_(t):Qs()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.Rc(t,this.Rt(t))),this.w_.add(t)},t.prototype.update=function(t,e){try{this.write(e.Rc(t,this.P_(t)))}catch(t){this.I_=t}this.w_.add(t)},t.prototype.delete=function(t){this.write([new Bo(t,this.Rt(t))]),this.w_.add(t)},t.prototype.commit=function(){return Mt(this,void 0,void 0,(function(){var t,e=this;return Lt(this,(function(n){switch(n.label){case 0:if(this.A_(),this.I_)throw this.I_;return t=this.T_,this.mutations.forEach((function(e){t=t.remove(e.key)})),t.forEach((function(t,n){e.mutations.push(new Uo(t,e.Rt(t)))})),[4,function(t,e){return Mt(this,void 0,void 0,(function(){var n,r,i;return Lt(this,(function(o){switch(o.label){case 0:return n=Ys(t),r={database:n.serializer.wi,writes:e.map((function(t){return n.serializer.vi(t)}))},[4,n.l_("Commit",r)];case 1:return i=o.sent(),[2,n.serializer.Li(i.writeResults,i.commitTime)]}}))}))}(this.f_,this.mutations)];case 1:return n.sent(),this.E_=!0,[2]}}))}))},t.prototype.m_=function(t){var e;if(t instanceof $o)e=t.version;else{if(!(t instanceof Wo))throw Qs();e=Wi.min()}var n=this.T_.get(t.key);if(null!==n){if(!e.isEqual(n))throw new Vi(Ui.ABORTED,"Document version changed between two reads.")}else this.T_=this.T_.Ae(t.key,e)},t.prototype.Rt=function(t){var e=this.T_.get(t);return!this.w_.has(t)&&e?jo.updateTime(e):jo.ft()},t.prototype.P_=function(t){var e=this.T_.get(t);if(!this.w_.has(t)&&e){if(e.isEqual(Wi.min()))throw new Vi(Ui.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return jo.updateTime(e)}return jo.exists(!0)},t.prototype.write=function(t){this.A_(),this.mutations=this.mutations.concat(t)},t.prototype.A_=function(){},t}(),_c=function(){function t(t,e){this.br=t,this.V_=e,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}return t.prototype.b_=function(){var t=this;0===this.g_&&(this.v_("Unknown"),this.p_=this.br.yr("online_state_timeout",1e4,(function(){return t.p_=null,t.S_("Backend didn't respond within 10 seconds."),t.v_("Offline"),Promise.resolve()})))},t.prototype.D_=function(t){"Online"===this.state?this.v_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.S_("Connection failed 1 times. Most recent error: "+t.toString()),this.v_("Offline")))},t.prototype.set=function(t){this.C_(),this.g_=0,"Online"===t&&(this.y_=!1),this.v_(t)},t.prototype.v_=function(t){t!==this.state&&(this.state=t,this.V_(t))},t.prototype.S_=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.y_?($s(e),this.y_=!1):zs("OnlineStateTracker",e)},t.prototype.C_=function(){null!==this.p_&&(this.p_.cancel(),this.p_=null)},t}(),Nc=function(){function t(t,e,n,r,i){var o=this;this.F_=t,this.f_=e,this.br=n,this.N_=[],this.k_=new Map,this.M_=null,this.networkEnabled=!1,this.isPrimary=!1,this.L_=!1,this.O_=i,this.O_.x_((function(t){n.$r((function(){return Mt(o,void 0,void 0,(function(){return Lt(this,(function(t){switch(t.label){case 0:return this.B_()?(zs("RemoteStore","Restarting streams for network reachability change."),[4,this.q_()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.U_=new _c(n,r),this.Q_=function(t,e,n){var r=Ys(t);return new Cc(e,r.Mc,r.credentials,r.serializer,n)}(this.f_,n,{t_:this.W_.bind(this),Hc:this.j_.bind(this),s_:this.K_.bind(this)}),this.G_=function(t,e,n){var r=Ys(t);return new Tc(e,r.Mc,r.credentials,r.serializer,n)}(this.f_,n,{t_:this.z_.bind(this),Hc:this.H_.bind(this),u_:this.Y_.bind(this),a_:this.a_.bind(this)})}return t.prototype.start=function(){return this.enableNetwork()},t.prototype.enableNetwork=function(){return this.networkEnabled=!0,this.J_()},t.prototype.J_=function(){return Mt(this,void 0,void 0,(function(){var t;return Lt(this,(function(e){switch(e.label){case 0:return this.B_()?(t=this.G_,[4,this.F_.do()]):[3,3];case 1:return t.lastStreamToken=e.sent(),this.X_()?this.Z_():this.U_.set("Unknown"),[4,this.tl()];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))},t.prototype.disableNetwork=function(){return Mt(this,void 0,void 0,(function(){return Lt(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.el()];case 1:return t.sent(),this.U_.set("Offline"),[2]}}))}))},t.prototype.el=function(){return Mt(this,void 0,void 0,(function(){return Lt(this,(function(t){switch(t.label){case 0:return[4,this.G_.stop()];case 1:return t.sent(),[4,this.Q_.stop()];case 2:return t.sent(),this.N_.length>0&&(zs("RemoteStore","Stopping write stream with "+this.N_.length+" pending writes"),this.N_=[]),this.sl(),[2]}}))}))},t.prototype.hu=function(){return Mt(this,void 0,void 0,(function(){return Lt(this,(function(t){switch(t.label){case 0:return zs("RemoteStore","RemoteStore shutting down."),this.networkEnabled=!1,[4,this.el()];case 1:return t.sent(),this.O_.hu(),this.U_.set("Unknown"),[2]}}))}))},t.prototype.listen=function(t){this.k_.has(t.targetId)||(this.k_.set(t.targetId,t),this.X_()?this.Z_():this.Q_.qc()&&this.il(t))},t.prototype.nl=function(t){this.k_.delete(t),this.Q_.qc()&&this.rl(t),0===this.k_.size&&(this.Q_.qc()?this.Q_.Wc():this.B_()&&this.U_.set("Unknown"))},t.prototype.si=function(t){return this.k_.get(t)||null},t.prototype.ei=function(t){return this.hl.ei(t)},t.prototype.il=function(t){this.M_.Ns(t.targetId),this.Q_.i_(t)},t.prototype.rl=function(t){this.M_.Ns(t),this.Q_.n_(t)},t.prototype.Z_=function(){this.M_=new Rs(this),this.Q_.start(),this.U_.b_()},t.prototype.X_=function(){return this.B_()&&!this.Q_.Bc()&&this.k_.size>0},t.prototype.B_=function(){return!this.L_&&this.isPrimary&&this.networkEnabled},t.prototype.sl=function(){this.M_=null},t.prototype.W_=function(){return Mt(this,void 0,void 0,(function(){var t=this;return Lt(this,(function(e){return this.k_.forEach((function(e,n){t.il(e)})),[2]}))}))},t.prototype.j_=function(t){return Mt(this,void 0,void 0,(function(){return Lt(this,(function(e){return this.sl(),this.X_()?(this.U_.D_(t),this.Z_()):this.U_.set("Unknown"),[2]}))}))},t.prototype.K_=function(t,e){return Mt(this,void 0,void 0,(function(){var n,r,i;return Lt(this,(function(o){switch(o.label){case 0:if(this.U_.set("Online"),!(t instanceof Ds&&2===t.state&&t.cause))return[3,6];o.label=1;case 1:return o.trys.push([1,3,,5]),[4,this.ol(t)];case 2:return o.sent(),[3,5];case 3:return n=o.sent(),zs("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),[4,this.al(n)];case 4:return o.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof ks?this.M_.qs(t):t instanceof Os?this.M_.Hs(t):this.M_.Ws(t),e.isEqual(Wi.min()))return[3,13];o.label=7;case 7:return o.trys.push([7,11,,13]),[4,this.F_.Oo()];case 8:return r=o.sent(),e.S(r)>=0?[4,this.ul(e)]:[3,10];case 9:o.sent(),o.label=10;case 10:return[3,13];case 11:return zs("RemoteStore","Failed to raise snapshot:",i=o.sent()),[4,this.al(i)];case 12:return o.sent(),[3,13];case 13:return[2]}}))}))},t.prototype.al=function(t){return Mt(this,void 0,void 0,(function(){var e=this;return Lt(this,(function(n){switch(n.label){case 0:if("IndexedDbTransactionError"!==t.name)throw t;return this.L_=!0,[4,this.el()];case 1:return n.sent(),this.U_.set("Offline"),this.br.Xr((function(){return Mt(e,void 0,void 0,(function(){return Lt(this,(function(t){switch(t.label){case 0:return zs("RemoteStore","Retrying IndexedDB access"),[4,this.F_.Oo()];case 1:return t.sent(),this.L_=!1,[4,this.J_()];case 2:return t.sent(),[2]}}))}))})),[2]}}))}))},t.prototype.ul=function(t){var e=this,n=this.M_.Xs(t);return n.as.forEach((function(n,r){if(n.resumeToken.rt()>0){var i=e.k_.get(r);i&&e.k_.set(r,i.we(n.resumeToken,t))}})),n.us.forEach((function(t){var n=e.k_.get(t);if(n){e.k_.set(t,n.we(no.ht,n.Ee)),e.rl(t);var r=new os(n.target,t,1,n.sequenceNumber);e.il(r)}})),this.hl.Mu(n)},t.prototype.ol=function(t){return Mt(this,void 0,void 0,(function(){var e,n,r,i;return Lt(this,(function(o){switch(o.label){case 0:e=t.cause,n=0,r=t.targetIds,o.label=1;case 1:return n<r.length?(i=r[n],this.k_.has(i)?[4,this.hl.cl(i,e)]:[3,3]):[3,5];case 2:o.sent(),this.k_.delete(i),this.M_.removeTarget(i),o.label=3;case 3:o.label=4;case 4:return n++,[3,1];case 5:return[2]}}))}))},t.prototype.tl=function(){return Mt(this,void 0,void 0,(function(){var t,e;return Lt(this,(function(n){switch(n.label){case 0:return this._l()?(t=this.N_.length>0?this.N_[this.N_.length-1].batchId:-1,[4,this.F_.Bu(t)]):[3,5];case 1:return null!==(e=n.sent())?[3,2]:(0===this.N_.length&&this.G_.Wc(),[3,4]);case 2:return this.ll(e),[4,this.tl()];case 3:n.sent(),n.label=4;case 4:n.label=5;case 5:return this.dl()&&this.fl(),[2]}}))}))},t.prototype._l=function(){return this.B_()&&this.N_.length<10},t.prototype.Tl=function(){return this.N_.length},t.prototype.ll=function(t){this.N_.push(t),this.G_.qc()&&this.G_.h_&&this.G_.o_(t.mutations)},t.prototype.dl=function(){return this.B_()&&!this.G_.Bc()&&this.N_.length>0},t.prototype.fl=function(){this.G_.start()},t.prototype.z_=function(){return Mt(this,void 0,void 0,(function(){return Lt(this,(function(t){return this.G_.c_(),[2]}))}))},t.prototype.Y_=function(){var t=this;return this.F_.fo(this.G_.lastStreamToken).then((function(){for(var e=0,n=t.N_;e<n.length;e++){var r=n[e];t.G_.o_(r.mutations)}})).catch(ku)},t.prototype.a_=function(t,e){var n=this,r=this.N_.shift(),i=oa.from(r,t,e,this.G_.lastStreamToken);return this.hl.El(i).then((function(){return n.tl()}))},t.prototype.H_=function(t){return Mt(this,void 0,void 0,(function(){return Lt(this,(function(e){switch(e.label){case 0:return t&&this.N_.length>0?this.G_.h_?[4,this.Il(t)]:[3,2]:[3,5];case 1:return e.sent(),[3,4];case 2:return[4,this.wl(t)];case 3:e.sent(),e.label=4;case 4:this.dl()&&this.fl(),e.label=5;case 5:return[2]}}))}))},t.prototype.wl=function(t){return Mt(this,void 0,void 0,(function(){return Lt(this,(function(e){return as(t.code)?[2,(zs("RemoteStore","RemoteStore error before completed handshake; resetting stream token: ",this.G_.lastStreamToken),this.G_.lastStreamToken=no.ht,this.F_.fo(no.ht).catch(ku))]:[2]}))}))},t.prototype.Il=function(t){return Mt(this,void 0,void 0,(function(){var e,n,r=this;return Lt(this,(function(i){return as(n=t.code)&&n!==Ui.ABORTED?(e=this.N_.shift(),[2,(this.G_.Qc(),this.hl.Rl(e.batchId,t).then((function(){return r.tl()})))]):[2]}))}))},t.prototype.Al=function(){return new xc(this.f_)},t.prototype.q_=function(){return Mt(this,void 0,void 0,(function(){return Lt(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.el()];case 1:return t.sent(),this.U_.set("Unknown"),[4,this.enableNetwork()];case 2:return t.sent(),[2]}}))}))},t.prototype.ml=function(){return Mt(this,void 0,void 0,(function(){return Lt(this,(function(t){switch(t.label){case 0:return this.B_()?(zs("RemoteStore","RemoteStore restarting streams for new credential"),[4,this.q_()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.Pl=function(t){return Mt(this,void 0,void 0,(function(){return Lt(this,(function(e){switch(e.label){case 0:return this.isPrimary=t,t&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return e.sent(),[3,5];case 2:return t?[3,4]:[4,this.el()];case 3:e.sent(),this.U_.set("Unknown"),e.label=4;case 4:e.label=5;case 5:return[2]}}))}))},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sc(t,e){return"firestore_clients_"+t+"_"+e}function kc(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.t()&&(r+="_"+e.uid),r}function Oc(t,e){return"firestore_targets_"+t+"_"+e}var Dc=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vl=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new Vi(i.error.code,i.error.message)),o?new t(e,n,i.state,s):($s("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.gl=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),jc=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vl=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new Vi(r.error.code,r.error.message)),i?new t(e,r.state,o):($s("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.gl=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Rc=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vl=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Ts(),s=0;i&&s<r.activeTargetIds.length;++s)i=oo(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):($s("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Pc=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vl=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):($s("SharedClientState","Failed to parse online state: "+e),null)},t}(),Mc=function(){function t(){this.activeTargetIds=Ts()}return t.prototype.pl=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.yl=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.gl=function(){var t={activeTargetIds:this.activeTargetIds.W(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Lc=function(){function t(e,n,r,i,o){if(this.Tr=e,this.platform=n,this.persistenceKey=r,this.bl=i,this.hl=null,this.V_=null,this.ur=null,this.vl=this.Sl.bind(this),this.Dl=new cs(Zs),this.vh=!1,this.Cl=[],!t.Uh(this.platform))throw new Vi(Ui.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=o,this.Fl=Sc(this.persistenceKey,this.bl),this.Nl=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Dl=this.Dl.Ae(this.bl,new Mc),this.kl=new RegExp("^firestore_clients_"+s+"_([^_]*)$"),this.$l=new RegExp("^firestore_mutations_"+s+"_(\\d+)(?:_(.*))?$"),this.Ml=new RegExp("^firestore_targets_"+s+"_(\\d+)$"),this.Ll=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.platform.window.addEventListener("storage",this.vl)}return t.Uh=function(t){return!(!t.window||null==t.window.localStorage)},t.prototype.start=function(){return Mt(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,a,u,c,h,l=this;return Lt(this,(function(f){switch(f.label){case 0:return[4,this.hl._u()];case 1:for(t=f.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.bl&&(i=this.getItem(Sc(this.persistenceKey,r)))&&(o=Rc.Vl(r,i))&&(this.Dl=this.Dl.Ae(o.clientId,o));for(this.Ol(),(s=this.storage.getItem(this.Ll))&&(a=this.xl(s))&&this.Bl(a),u=0,c=this.Cl;u<c.length;u++)h=c[u],this.Sl(h);return this.Cl=[],this.platform.window.addEventListener("unload",(function(){return l.hu()})),this.vh=!0,[2]}}))}))},t.prototype.lr=function(t){this.setItem(this.Nl,JSON.stringify(t))},t.prototype.ql=function(){return this.Ul(this.Dl)},t.prototype.Ql=function(t){var e=!1;return this.Dl.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.Wl=function(t){this.jl(t,"pending")},t.prototype.Kl=function(t,e,n){this.jl(t,e,n),this.Gl(t)},t.prototype.zl=function(t){var e="not-current";if(this.Ql(t)){var n=this.storage.getItem(Oc(this.persistenceKey,t));if(n){var r=jc.Vl(t,n);r&&(e=r.state)}}return this.Hl.pl(t),this.Ol(),e},t.prototype.Yl=function(t){this.Hl.yl(t),this.Ol()},t.prototype.Jl=function(t){return this.Hl.activeTargetIds.has(t)},t.prototype.Xl=function(t){this.removeItem(Oc(this.persistenceKey,t))},t.prototype.Zl=function(t,e,n){this.td(t,e,n)},t.prototype.Su=function(t,e,n){var r=this;e.forEach((function(t){r.Gl(t)})),this.currentUser=t,n.forEach((function(t){r.Wl(t)}))},t.prototype.ed=function(t){this.sd(t)},t.prototype.hu=function(){this.vh&&(this.platform.window.removeEventListener("storage",this.vl),this.removeItem(this.Fl),this.vh=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return zs("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){zs("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){zs("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Sl=function(t){var e=this;if(t.storageArea===this.storage){if(zs("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Fl)return void $s("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Tr.Xr((function(){return Mt(e,void 0,void 0,(function(){var e,n,r,i,o,s;return Lt(this,(function(a){if(this.vh){if(null!==t.key)if(this.kl.test(t.key)){if(null==t.newValue)return e=this.nd(t.key),[2,this.rd(e,null)];if(n=this.hd(t.key,t.newValue))return[2,this.rd(n.clientId,n)]}else if(this.$l.test(t.key)){if(null!==t.newValue&&(r=this.od(t.key,t.newValue)))return[2,this.ad(r)]}else if(this.Ml.test(t.key)){if(null!==t.newValue&&(i=this.ud(t.key,t.newValue)))return[2,this._d(i)]}else if(t.key===this.Ll){if(null!==t.newValue&&(o=this.xl(t.newValue)))return[2,this.Bl(o)]}else t.key===this.Nl&&(s=function(t){var e=fa.dr;if(null!=t)try{var n=JSON.parse(t);Hs("number"==typeof n),e=n}catch(t){$s("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(t.newValue))!==fa.dr&&this.ur(s)}else this.Cl.push(t);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Hl",{get:function(){return this.Dl.get(this.bl)},enumerable:!0,configurable:!0}),t.prototype.Ol=function(){this.setItem(this.Fl,this.Hl.gl())},t.prototype.jl=function(t,e,n){var r=new Dc(this.currentUser,t,e,n),i=kc(this.persistenceKey,this.currentUser,t);this.setItem(i,r.gl())},t.prototype.Gl=function(t){var e=kc(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.sd=function(t){var e={clientId:this.bl,onlineState:t};this.storage.setItem(this.Ll,JSON.stringify(e))},t.prototype.td=function(t,e,n){var r=Oc(this.persistenceKey,t),i=new jc(t,e,n);this.setItem(r,i.gl())},t.prototype.nd=function(t){var e=this.kl.exec(t);return e?e[1]:null},t.prototype.hd=function(t,e){var n=this.nd(t);return Rc.Vl(n,e)},t.prototype.od=function(t,e){var n=this.$l.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Dc.Vl(new Bi(i),r,e)},t.prototype.ud=function(t,e){var n=this.Ml.exec(t),r=Number(n[1]);return jc.Vl(r,e)},t.prototype.xl=function(t){return Pc.Vl(t)},t.prototype.ad=function(t){return Mt(this,void 0,void 0,(function(){return Lt(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.hl.ld(t.batchId,t.state,t.error)]:(zs("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype._d=function(t){return this.hl.dd(t.targetId,t.state,t.error)},t.prototype.rd=function(t,e){var n=this,r=e?this.Dl.Ae(t,e):this.Dl.remove(t),i=this.Ul(this.Dl),o=this.Ul(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this.hl.fd(s,a).then((function(){n.Dl=r}))},t.prototype.Bl=function(t){this.Dl.get(t.clientId)&&this.V_(t.onlineState)},t.prototype.Ul=function(t){var e=Ts();return t.forEach((function(t,n){e=e.He(n.activeTargetIds)})),e},t}(),Bc=function(){function t(){this.Td=new Mc,this.Ed={},this.hl=null,this.V_=null,this.ur=null}return t.prototype.Wl=function(t){},t.prototype.Kl=function(t,e,n){},t.prototype.zl=function(t){return this.Td.pl(t),this.Ed[t]||"not-current"},t.prototype.Zl=function(t,e,n){this.Ed[t]=e},t.prototype.Yl=function(t){this.Td.yl(t)},t.prototype.Jl=function(t){return this.Td.activeTargetIds.has(t)},t.prototype.Xl=function(t){delete this.Ed[t]},t.prototype.ql=function(){return this.Td.activeTargetIds},t.prototype.Ql=function(t){return this.Td.activeTargetIds.has(t)},t.prototype.start=function(){return this.Td=new Mc,Promise.resolve()},t.prototype.Su=function(t,e,n){},t.prototype.ed=function(t){},t.prototype.hu=function(){},t.prototype.lr=function(t){},t}(),Uc=function(t){this.key=t},Vc=function(t){this.key=t},qc=function(){function t(t,e){this.query=t,this.Id=e,this.wd=null,this.fs=!1,this.Rd=Es(),this.ns=Es(),this.Ad=new Is(t.se.bind(t))}return Object.defineProperty(t.prototype,"md",{get:function(){return this.Id},enumerable:!0,configurable:!0}),t.prototype.Pd=function(t,e){var n=this,r=e?e.Vd:new xs,i=e?e.Ad:this.Ad,o=e?e.ns:this.ns,s=i,a=!1,u=this.query.oe()&&i.size===this.query.limit?i.last():null,c=this.query.ae()&&i.size===this.query.limit?i.first():null;if(t.pe((function(t,e){var h=i.get(t),l=e instanceof $o?e:null;l&&(l=n.query.matches(l)?l:null);var f=!!h&&n.ns.has(h.key),p=!!l&&(l.At||n.ns.has(l.key)&&l.hasCommittedMutations),d=!1;h&&l?h.data().isEqual(l.data())?f!==p&&(r.track({type:3,doc:l}),d=!0):n.gd(h,l)||(r.track({type:2,doc:l}),d=!0,(u&&n.query.se(l,u)>0||c&&n.query.se(l,c)<0)&&(a=!0)):!h&&l?(r.track({type:0,doc:l}),d=!0):h&&!l&&(r.track({type:1,doc:h}),d=!0,(u||c)&&(a=!0)),d&&(l?(s=s.add(l),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),this.query.oe()||this.query.ae())for(;s.size>this.query.limit;){var h=this.query.oe()?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ad:s,Vd:r,pd:a,ns:o}},t.prototype.gd=function(t,e){return t.At&&e.hasCommittedMutations&&!e.At},t.prototype.xn=function(t,e,n){var r=this,i=this.Ad;this.Ad=t.Ad,this.ns=t.ns;var o=t.Vd.es();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Qs()}};return n(t)-n(e)}(t.type,e.type)||r.query.se(t.doc,e.doc)})),this.yd(n);var s=e?this.bd():[],a=0===this.Rd.size&&this.fs?1:0,u=a!==this.wd;return this.wd=a,0!==o.length||u?{snapshot:new _s(this.query,t.Ad,i,o,t.ns,0===a,u,!1),vd:s}:{vd:s}},t.prototype.Sd=function(t){return this.fs&&"Offline"===t?(this.fs=!1,this.xn({Ad:this.Ad,Vd:new xs,ns:this.ns,pd:!1},!1)):{vd:[]}},t.prototype.Dd=function(t){return!this.Id.has(t)&&!!this.Ad.has(t)&&!this.Ad.get(t).At},t.prototype.yd=function(t){var e=this;t&&(t.Ts.forEach((function(t){return e.Id=e.Id.add(t)})),t.Es.forEach((function(t){})),t.Is.forEach((function(t){return e.Id=e.Id.delete(t)})),this.fs=t.fs)},t.prototype.bd=function(){var t=this;if(!this.fs)return[];var e=this.Rd;this.Rd=Es(),this.Ad.forEach((function(e){t.Dd(e.key)&&(t.Rd=t.Rd.add(e.key))}));var n=[];return e.forEach((function(e){t.Rd.has(e)||n.push(new Vc(e))})),this.Rd.forEach((function(t){e.has(t)||n.push(new Uc(t))})),n},t.prototype.Cd=function(t){this.Id=t.ju,this.Rd=Es();var e=this.Pd(t.documents);return this.xn(e,!0)},t.prototype.Fd=function(){return _s.os(this.query,this.Ad,this.ns,0===this.wd)},t}(),Fc=function(){function t(t,e,n,r){this.br=t,this.Nd=e,this.updateFunction=n,this.Dr=r,this.kd=5,this.Qr=new da(this.br,"transaction_retry")}return t.prototype.$d=function(){this.Md()},t.prototype.Md=function(){var t=this;this.Qr.gr((function(){return Mt(t,void 0,void 0,(function(){var t,e,n=this;return Lt(this,(function(r){return t=this.Nd.Al(),(e=this.Ld(t))&&e.then((function(e){n.br.$r((function(){return t.commit().then((function(){n.Dr.resolve(e)})).catch((function(t){n.Od(t)}))}))})).catch((function(t){n.Od(t)})),[2]}))}))}))},t.prototype.Ld=function(t){try{var e=this.updateFunction(t);return!ro(e)&&e.catch&&e.then?e:(this.Dr.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Dr.reject(t),null}},t.prototype.Od=function(t){var e=this;this.kd>0&&this.xd(t)?(this.kd-=1,this.br.$r((function(){return e.Md(),Promise.resolve()}))):this.Dr.reject(t)},t.prototype.xd=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!as(e)}return!1},t}(),Gc=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Kc=function(t){this.key=t,this.Bd=!1},zc=function(){function t(t,e,n,r,i){this.F_=t,this.Nd=e,this.qd=n,this.currentUser=r,this.Ud=i,this.Qd=null,this.Wd=new ra((function(t){return t.canonicalId()})),this.jd=new Map,this.Kd=[],this.Gd=new cs(Zi.N),this.zd=new Map,this.Hd=new Ou,this.Yd={},this.Jd=new Map,this.Xd=qa.ko(),this.onlineState="Unknown"}return Object.defineProperty(t.prototype,"Zd",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.subscribe=function(t){this.Qd=t},t.prototype.listen=function(t){return Mt(this,void 0,void 0,(function(){var e,n,r,i,o;return Lt(this,(function(s){switch(s.label){case 0:return this.tf("listen()"),(r=this.Wd.get(t))?(e=r.targetId,this.qd.zl(e),n=r.view.Fd(),[3,4]):[3,1];case 1:return[4,this.F_.Uu(t.ee())];case 2:return i=s.sent(),o=this.qd.zl(i.targetId),e=i.targetId,[4,this.ef(t,e,"current"===o)];case 3:n=s.sent(),this.Zd&&this.Nd.listen(i),s.label=4;case 4:return[2,n]}}))}))},t.prototype.ef=function(t,e,n){return Mt(this,void 0,void 0,(function(){var r,i,o,s,a,u;return Lt(this,(function(c){switch(c.label){case 0:return[4,this.F_.Wu(t,!0)];case 1:return r=c.sent(),i=new qc(t,r.ju),o=i.Pd(r.documents),s=Ss.ds(e,n&&"Offline"!==this.onlineState),a=i.xn(o,this.Zd,s),this.sf(e,a.vd),u=new Gc(t,e,i),[2,(this.Wd.set(t,u),this.jd.has(e)?this.jd.get(e).push(t):this.jd.set(e,[t]),a.snapshot)]}}))}))},t.prototype.nl=function(t){return Mt(this,void 0,void 0,(function(){var e,n,r=this;return Lt(this,(function(i){switch(i.label){case 0:return this.tf("unlisten()"),e=this.Wd.get(t),(n=this.jd.get(e.targetId)).length>1?[2,(this.jd.set(e.targetId,n.filter((function(e){return!e.isEqual(t)}))),void this.Wd.delete(t))]:this.Zd?(this.qd.Yl(e.targetId),this.qd.Ql(e.targetId)?[3,2]:[4,this.F_.Qu(e.targetId,!1).then((function(){r.qd.Xl(e.targetId),r.Nd.nl(e.targetId),r.if(e.targetId)})).catch(ku)]):[3,3];case 1:i.sent(),i.label=2;case 2:return[3,5];case 3:return this.if(e.targetId),[4,this.F_.Qu(e.targetId,!0)];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))},t.prototype.write=function(t,e){return Mt(this,void 0,void 0,(function(){var n,r;return Lt(this,(function(i){switch(i.label){case 0:this.tf("write()"),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.F_.Nu(t)];case 2:return n=i.sent(),[3,4];case 3:if("IndexedDbTransactionError"===(r=i.sent()).name)return[2,($s("SyncEngine","Dropping write that cannot be persisted: "+r),void e.reject(new Vi(Ui.UNAVAILABLE,"Failed to persist write: "+r)))];throw r;case 4:return this.qd.Wl(n.batchId),this.nf(n.batchId,e),[4,this.rf(n.Dn)];case 5:return i.sent(),[4,this.Nd.tl()];case 6:return i.sent(),[2]}}))}))},t.prototype.runTransaction=function(t,e,n){new Fc(t,this.Nd,e,n).$d()},t.prototype.Mu=function(t){return Mt(this,void 0,void 0,(function(){var e,n=this;return Lt(this,(function(r){switch(r.label){case 0:this.tf("applyRemoteEvent()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.F_.Mu(t)];case 2:return e=r.sent(),t.as.forEach((function(t,e){var r=n.zd.get(e);r&&(Hs(t.Ts.size+t.Es.size+t.Is.size<=1),t.Ts.size>0?r.Bd=!0:t.Es.size>0?Hs(r.Bd):t.Is.size>0&&(Hs(r.Bd),r.Bd=!1))})),[4,this.rf(e,t)];case 3:return r.sent(),[3,6];case 4:return[4,ku(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.Sd=function(t,e){this.tf("applyOnlineStateChange()");var n=[];this.Wd.forEach((function(e,r){var i=r.view.Sd(t);i.snapshot&&n.push(i.snapshot)})),this.Qd.hf(t),this.Qd.s_(n),this.onlineState=t},t.prototype.cl=function(t,e){return Mt(this,void 0,void 0,(function(){var n,r,i,o,s,a=this;return Lt(this,(function(u){switch(u.label){case 0:return this.tf("rejectListens()"),this.qd.Zl(t,"rejected",e),n=this.zd.get(t),(r=n&&n.key)?(this.Gd=this.Gd.remove(r),this.zd.delete(t),this.af(),i=(i=new cs(Zi.N)).Ae(r,new Wo(r,Wi.min())),o=Es().add(r),s=new Ns(Wi.min(),new Map,new fs(Zs),i,o),[2,this.Mu(s)]):[4,this.F_.Qu(t,!1).then((function(){return a.if(t,e)})).catch(ku)];case 1:return u.sent(),[2]}}))}))},t.prototype.El=function(t){return Mt(this,void 0,void 0,(function(){var e,n;return Lt(this,(function(r){switch(r.label){case 0:this.tf("applySuccessfulWrite()"),e=t.batch.batchId,this.uf(e,null),this.cf(e),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.F_._o(t)];case 2:return n=r.sent(),this.qd.Kl(e,"acknowledged"),[4,this.rf(n)];case 3:return r.sent(),[3,6];case 4:return[4,ku(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.Rl=function(t,e){return Mt(this,void 0,void 0,(function(){var n;return Lt(this,(function(r){switch(r.label){case 0:this.tf("rejectFailedWrite()"),this.uf(t,e),this.cf(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.F_.$u(t)];case 2:return n=r.sent(),this.qd.Kl(t,"rejected",e),[4,this.rf(n)];case 3:return r.sent(),[3,6];case 4:return[4,ku(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype._f=function(t){return Mt(this,void 0,void 0,(function(){var e,n;return Lt(this,(function(r){switch(r.label){case 0:return this.Nd.B_()||zs("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),[4,this.F_.Po()];case 1:return-1===(e=r.sent())?[2,void t.resolve()]:((n=this.Jd.get(e)||[]).push(t),this.Jd.set(e,n),[2])}}))}))},t.prototype.cf=function(t){(this.Jd.get(t)||[]).forEach((function(t){t.resolve()})),this.Jd.delete(t)},t.prototype.lf=function(t){this.Jd.forEach((function(e){e.forEach((function(e){e.reject(new Vi(Ui.CANCELLED,t))}))})),this.Jd.clear()},t.prototype.nf=function(t,e){var n=this.Yd[this.currentUser.s()];n||(n=new cs(Zs)),n=n.Ae(t,e),this.Yd[this.currentUser.s()]=n},t.prototype.uf=function(t,e){var n=this.Yd[this.currentUser.s()];if(n){var r=n.get(t);r&&(e?r.reject(e):r.resolve(),n=n.remove(t)),this.Yd[this.currentUser.s()]=n}},t.prototype.if=function(t,e){var n=this;void 0===e&&(e=null),this.qd.Yl(t);for(var r=0,i=this.jd.get(t);r<i.length;r++){var o=i[r];this.Wd.delete(o),e&&this.Qd.df(o,e)}this.jd.delete(t),this.Zd&&this.Hd.ic(t).forEach((function(t){n.Hd.Co(t)||n.ff(t)}))},t.prototype.ff=function(t){var e=this.Gd.get(t);null!==e&&(this.Nd.nl(e),this.Gd=this.Gd.remove(t),this.zd.delete(e),this.af())},t.prototype.sf=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];i instanceof Uc?(this.Hd.Xo(i.key,t),this.Tf(i)):i instanceof Vc?(zs("SyncEngine","Document no longer in limbo: "+i.key),this.Hd.ta(i.key,t),this.Hd.Co(i.key)||this.ff(i.key)):Qs()}},t.prototype.Tf=function(t){var e=t.key;this.Gd.get(e)||(zs("SyncEngine","New document in limbo: "+e),this.Kd.push(e),this.af())},t.prototype.af=function(){for(;this.Kd.length>0&&this.Gd.size<this.Ud;){var t=this.Kd.shift(),e=this.Xd.next();this.zd.set(e,new Kc(t)),this.Gd=this.Gd.Ae(t,e),this.Nd.listen(new os(Yo.Wt(t.path).ee(),e,2,fa.dr))}},t.prototype.Ef=function(){return this.Gd},t.prototype.If=function(){return this.Kd},t.prototype.rf=function(t,e){return Mt(this,void 0,void 0,(function(){var n,r,i,o=this;return Lt(this,(function(s){switch(s.label){case 0:return n=[],r=[],i=[],this.Wd.forEach((function(s,a){i.push(Promise.resolve().then((function(){var e=a.view.Pd(t);return e.pd?o.F_.Wu(a.query,!1).then((function(t){var n=t.documents;return a.view.Pd(n,e)})):e})).then((function(t){var i=e&&e.as.get(a.targetId),s=a.view.xn(t,o.Zd,i);if(o.sf(a.targetId,s.vd),s.snapshot){o.Zd&&o.qd.Zl(a.targetId,s.snapshot.fromCache?"not-current":"current"),n.push(s.snapshot);var u=la.ar(a.targetId,s.snapshot);r.push(u)}})))})),[4,Promise.all(i)];case 1:return s.sent(),this.Qd.s_(n),[4,this.F_.xu(r)];case 2:return s.sent(),[2]}}))}))},t.prototype.tf=function(t){},t.prototype.ml=function(t){return Mt(this,void 0,void 0,(function(){var e,n;return Lt(this,(function(r){switch(r.label){case 0:return e=!this.currentUser.isEqual(t),this.currentUser=t,e?(this.lf("'waitForPendingWrites' promise is rejected due to a user change."),[4,this.F_.Su(t)]):[3,3];case 1:return n=r.sent(),this.qd.Su(t,n.Cu,n.Fu),[4,this.rf(n.Du)];case 2:r.sent(),r.label=3;case 3:return[4,this.Nd.ml()];case 4:return r.sent(),[2]}}))}))},t.prototype.enableNetwork=function(){return this.Nd.enableNetwork()},t.prototype.disableNetwork=function(){return this.Nd.disableNetwork()},t.prototype.ei=function(t){var e=this.zd.get(t);if(e&&e.Bd)return Es().add(e.key);var n=Es(),r=this.jd.get(t);if(!r)return n;for(var i=0,o=r;i<o.length;i++){var s=o[i],a=this.Wd.get(s);n=n.He(a.view.md)}return n},t}(),$c=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,n,r,i,o)||this).F_=e,s.isPrimary=void 0,s}return Pt(e,t),Object.defineProperty(e.prototype,"Zd",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),e.prototype.enableNetwork=function(){return this.F_.za(!0),t.prototype.enableNetwork.call(this)},e.prototype.disableNetwork=function(){return this.F_.za(!1),t.prototype.disableNetwork.call(this)},e.prototype.wf=function(t){return Mt(this,void 0,void 0,(function(){var e,n;return Lt(this,(function(r){switch(r.label){case 0:return[4,this.F_.Wu(t.query,!0)];case 1:return e=r.sent(),n=t.view.Cd(e),[2,(this.isPrimary&&this.sf(t.targetId,n.vd),n)]}}))}))},e.prototype.Sd=function(e,n){this.Zd&&0===n&&(t.prototype.Sd.call(this,e,n),this.qd.ed(e)),this.Zd||1!==n||t.prototype.Sd.call(this,e,n)},e.prototype.ld=function(t,e,n){return Mt(this,void 0,void 0,(function(){var r;return Lt(this,(function(i){switch(i.label){case 0:return this.tf("applyBatchState()"),[4,this.F_.Gu(t)];case 1:return null===(r=i.sent())?[3,6]:"pending"!==e?[3,3]:[4,this.Nd.tl()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===e||"rejected"===e?(this.uf(t,n||null),this.F_.zu(t)):Qs(),i.label=4;case 4:return[4,this.rf(r)];case 5:return i.sent(),[3,7];case 6:zs("SyncEngine","Cannot apply mutation batch with id: "+t),i.label=7;case 7:return[2]}}))}))},e.prototype.Pl=function(t){return Mt(this,void 0,void 0,(function(){var e,n,r,i,o,s,a,u=this;return Lt(this,(function(c){switch(c.label){case 0:return!0!==t||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.Nd.Pl(!0)]);case 1:return c.sent(),e=this.qd.ql(),[4,this.Rf(e.W())];case 2:for(n=c.sent(),r=0,i=n;r<i.length;r++)o=i[r],this.Nd.listen(o);return[3,7];case 3:return!1!==t||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,s=[],a=Promise.resolve(),this.jd.forEach((function(t,e){u.qd.Jl(e)?s.push(e):a=a.then((function(){return u.if(e),u.F_.Qu(e,!0)})),u.Nd.nl(e)})),[4,a]);case 4:return c.sent(),[4,this.Rf(s)];case 5:return c.sent(),this.Af(),[4,this.Nd.Pl(!1)];case 6:c.sent(),c.label=7;case 7:return[2]}}))}))},e.prototype.Af=function(){var t=this;this.zd.forEach((function(e,n){t.Nd.nl(n)})),this.Hd.nc(),this.zd=new Map,this.Gd=new cs(Zi.N)},e.prototype.Rf=function(t){return Mt(this,void 0,void 0,(function(){var e,n,r,i,o,s,a,u,c,h,l,f,p;return Lt(this,(function(d){switch(d.label){case 0:e=[],n=[],r=0,i=t,d.label=1;case 1:return r<i.length?(o=i[r],s=void 0,(a=this.jd.get(o))&&0!==a.length?[4,this.F_.Qu(o,!0)]:[3,8]):[3,14];case 2:return d.sent(),[4,this.F_.Uu(a[0].ee())];case 3:s=d.sent(),u=0,c=a,d.label=4;case 4:return u<c.length?(h=c[u],l=this.Wd.get(h),[4,this.wf(l)]):[3,7];case 5:(f=d.sent()).snapshot&&n.push(f.snapshot),d.label=6;case 6:return u++,[3,4];case 7:return[3,12];case 8:return[4,this.F_.Hu(o)];case 9:return p=d.sent(),[4,this.F_.Uu(p)];case 10:return s=d.sent(),[4,this.ef(this.mf(p),o,!1)];case 11:d.sent(),d.label=12;case 12:e.push(s),d.label=13;case 13:return r++,[3,1];case 14:return[2,(this.Qd.s_(n),e)]}}))}))},e.prototype.mf=function(t){return new Yo(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)},e.prototype._u=function(){return this.F_._u()},e.prototype.dd=function(t,e,n){return Mt(this,void 0,void 0,(function(){var r,i;return Lt(this,(function(o){switch(o.label){case 0:return this.isPrimary?(zs("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!this.jd.has(t))return[3,8];switch(e){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,this.F_.la()];case 3:return r=o.sent(),i=Ns.ls(t,"current"===e),[4,this.rf(r,i)];case 4:return o.sent(),[3,8];case 5:return[4,this.F_.Qu(t,!0)];case 6:return o.sent(),this.if(t,n),[3,8];case 7:Qs(),o.label=8;case 8:return[2]}}))}))},e.prototype.fd=function(t,e){return Mt(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,h,l,f=this;return Lt(this,(function(p){switch(p.label){case 0:if(!this.isPrimary)return[3,10];n=0,r=t,p.label=1;case 1:return n<r.length?(i=r[n],this.jd.has(i)?(zs("SyncEngine","Adding an already active target "+i),[3,5]):[4,this.F_.Hu(i)]):[3,6];case 2:return o=p.sent(),[4,this.F_.Uu(o)];case 3:return s=p.sent(),[4,this.ef(this.mf(o),s.targetId,!1)];case 4:p.sent(),this.Nd.listen(s),p.label=5;case 5:return n++,[3,1];case 6:a=function(t){return Lt(this,(function(e){switch(e.label){case 0:return u.jd.has(t)?[4,u.F_.Qu(t,!1).then((function(){f.Nd.nl(t),f.if(t)})).catch(ku)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},u=this,c=0,h=e,p.label=7;case 7:return c<h.length?(l=h[c],[5,a(l)]):[3,10];case 8:p.sent(),p.label=9;case 9:return c++,[3,7];case 10:return[2]}}))}))},e}(zc),Wc=function(){this.Pf=void 0,this.Vf=[]},Qc=function(){function t(t){this.hl=t,this.gf=new ra((function(t){return t.canonicalId()})),this.onlineState="Unknown",this.pf=new Set,this.hl.subscribe(this)}return t.prototype.listen=function(t){return Mt(this,void 0,void 0,(function(){var e,n,r,i,o,s;return Lt(this,(function(a){switch(a.label){case 0:if(e=t.query,n=!1,(r=this.gf.get(e))||(n=!0,r=new Wc),!n)return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),i=r,[4,this.hl.listen(e)];case 2:return i.Pf=a.sent(),[3,4];case 3:if(o=a.sent(),$s("EventManager",s="Initialization of query '"+e+"' failed: "+o),"IndexedDbTransactionError"!==o.name)throw o;return[2,void t.onError(new Vi(Ui.UNAVAILABLE,s))];case 4:return this.gf.set(e,r),r.Vf.push(t),t.Sd(this.onlineState),r.Pf&&t.yf(r.Pf)&&this.bf(),[2]}}))}))},t.prototype.nl=function(t){return Mt(this,void 0,void 0,(function(){var e,n,r,i;return Lt(this,(function(o){return e=t.query,n=!1,(r=this.gf.get(e))&&(i=r.Vf.indexOf(t))>=0&&(r.Vf.splice(i,1),n=0===r.Vf.length),n?[2,(this.gf.delete(e),this.hl.nl(e))]:[2]}))}))},t.prototype.s_=function(t){for(var e=!1,n=0,r=t;n<r.length;n++){var i=r[n],o=i.query,s=this.gf.get(o);if(s){for(var a=0,u=s.Vf;a<u.length;a++)u[a].yf(i)&&(e=!0);s.Pf=i}}e&&this.bf()},t.prototype.df=function(t,e){var n=this.gf.get(t);if(n)for(var r=0,i=n.Vf;r<i.length;r++)i[r].onError(e);this.gf.delete(t)},t.prototype.hf=function(t){this.onlineState=t;var e=!1;this.gf.forEach((function(n,r){for(var i=0,o=r.Vf;i<o.length;i++)o[i].Sd(t)&&(e=!0)})),e&&this.bf()},t.prototype.vf=function(t){this.pf.add(t),t.next()},t.prototype.Sf=function(t){this.pf.delete(t)},t.prototype.bf=function(){this.pf.forEach((function(t){t.next()}))},t}(),Hc=function(){function t(t,e,n){this.query=t,this.Df=e,this.Cf=!1,this.Ff=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.yf=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new _s(t.query,t.docs,t.ss,e,t.ns,t.fromCache,t.rs,!0)}var o=!1;return this.Cf?this.Nf(t)&&(this.Df.next(t),o=!0):this.kf(t,this.onlineState)&&(this.$f(t),o=!0),this.Ff=t,o},t.prototype.onError=function(t){this.Df.error(t)},t.prototype.Sd=function(t){this.onlineState=t;var e=!1;return this.Ff&&!this.Cf&&this.kf(this.Ff,t)&&(this.$f(this.Ff),e=!0),e},t.prototype.kf=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.Mf&&n||t.docs.B()&&"Offline"!==e)},t.prototype.Nf=function(t){if(t.docChanges.length>0)return!0;var e=this.Ff&&this.Ff.hasPendingWrites!==t.hasPendingWrites;return!(!t.rs&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.$f=function(t){t=_s.os(t.query,t.docs,t.ns,t.fromCache),this.Cf=!0,this.Df.next(t)},t}(),Yc=function(){function t(){}return t.prototype.vu=function(t){this.Lf=t},t.prototype.Zn=function(t,e,n,r){var i=this;return e.te()||n.isEqual(Wi.min())?this.Of(t,e):this.Lf.Yn(t,r).next((function(o){var s=i.xf(e,o);return(e.oe()||e.ae())&&i.pd(e.Bt,s,r,n)?i.Of(t,e):(Gs()<=ht.DEBUG&&zs("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),e.toString()),i.Lf.Zn(t,e,n).next((function(t){return s.forEach((function(e){t=t.Ae(e.key,e)})),t})))}))},t.prototype.xf=function(t,e){var n=new fs((function(e,n){return t.se(e,n)}));return e.forEach((function(e,r){r instanceof $o&&t.matches(r)&&(n=n.add(r))})),n},t.prototype.pd=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.S(r)>0)},t.prototype.Of=function(t,e){return Gs()<=ht.DEBUG&&zs("IndexFreeQueryEngine","Using full collection scan to execute query: %s",e.toString()),this.Lf.Zn(t,e,Wi.min())},t}(),Xc=function(){function t(t,e){this.jn=t,this.oo=e,this.Wn=[],this.Bf=1,this.lastStreamToken=no.ht,this.qf=new fs(Du.Ju)}return t.prototype.co=function(t){return sa.resolve(0===this.Wn.length)},t.prototype._o=function(t,e,n){var r=e.batchId,i=this.Uf(r,"acknowledged");return Hs(0===i),this.Wn[i],this.lastStreamToken=n,sa.resolve()},t.prototype.do=function(t){return sa.resolve(this.lastStreamToken)},t.prototype.fo=function(t,e){return this.lastStreamToken=e,sa.resolve()},t.prototype.To=function(t,e,n,r){var i=this.Bf;this.Bf++,this.Wn.length>0&&this.Wn[this.Wn.length-1];var o=new ia(i,e,n,r);this.Wn.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.qf=this.qf.add(new Du(u.key,i)),this.jn.Io(t,u.key.path.M())}return sa.resolve(o)},t.prototype.wo=function(t,e){return sa.resolve(this.Qf(e))},t.prototype.mo=function(t,e){var n=e+1,r=this.Wf(n),i=r<0?0:r;return sa.resolve(this.Wn.length>i?this.Wn[i]:null)},t.prototype.Po=function(){return sa.resolve(0===this.Wn.length?-1:this.Bf-1)},t.prototype.Vo=function(t){return sa.resolve(this.Wn.slice())},t.prototype.Gn=function(t,e){var n=this,r=new Du(e,0),i=new Du(e,Number.POSITIVE_INFINITY),o=[];return this.qf.Ke([r,i],(function(t){var e=n.Qf(t.hc);o.push(e)})),sa.resolve(o)},t.prototype.Xn=function(t,e){var n=this,r=new fs(Zs);return e.forEach((function(t){var e=new Du(t,0),i=new Du(t,Number.POSITIVE_INFINITY);n.qf.Ke([e,i],(function(t){r=r.add(t.hc)}))})),sa.resolve(this.jf(r))},t.prototype.nr=function(t,e){var n=e.path,r=n.length+1,i=n;Zi.et(i)||(i=i.child(""));var o=new Du(new Zi(i),0),s=new fs(Zs);return this.qf.Ge((function(t){var e=t.key.path;return!!n.q(e)&&(e.length===r&&(s=s.add(t.hc)),!0)}),o),sa.resolve(this.jf(s))},t.prototype.jf=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.Qf(t);null!==r&&n.push(r)})),n},t.prototype.yo=function(t,e){var n=this;Hs(0===this.Uf(e.batchId,"removed")),this.Wn.shift();var r=this.qf;return sa.forEach(e.mutations,(function(i){var o=new Du(i.key,e.batchId);return r=r.delete(o),n.oo.So(t,i.key)})).next((function(){n.qf=r}))},t.prototype.vo=function(t){},t.prototype.Co=function(t,e){var n=new Du(e,0),r=this.qf.ze(n);return sa.resolve(e.isEqual(r&&r.key))},t.prototype.Do=function(t){return this.Wn.length,sa.resolve()},t.prototype.Uf=function(t,e){return this.Wf(t)},t.prototype.Wf=function(t){return 0===this.Wn.length?0:t-this.Wn[0].batchId},t.prototype.Qf=function(t){var e=this.Wf(t);return e<0||e>=this.Wn.length?null:this.Wn[e]},t}(),Zc=function(){function t(t,e){this.jn=t,this.Kf=e,this.docs=new cs(Zi.N),this.size=0}return t.prototype.Nn=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.Kf(e);return this.docs=this.docs.Ae(r,{ra:e,size:s,readTime:n}),this.size+=s-o,this.jn.Io(t,r.path.M())},t.prototype.$n=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.Mn=function(t,e){var n=this.docs.get(e);return sa.resolve(n?n.ra:null)},t.prototype.getEntries=function(t,e){var n=this,r=ys();return e.forEach((function(t){var e=n.docs.get(t);r=r.Ae(t,e?e.ra:null)})),sa.resolve(r)},t.prototype.Zn=function(t,e,n){for(var r=As(),i=new Zi(e.path.child("")),o=this.docs.ve(i);o.ke();){var s=o.Ne(),a=s.key,u=s.value,c=u.ra,h=u.readTime;if(!e.path.q(a.path))break;h.S(n)<=0||c instanceof $o&&e.matches(c)&&(r=r.Ae(c.key,c))}return sa.resolve(r)},t.prototype.Gf=function(t,e){return sa.forEach(this.docs,(function(t){return e(t)}))},t.prototype.Ea=function(e){return new t.Ia(this)},t.prototype.Ra=function(t){return sa.resolve(this.size)},t}();Zc.Ia=function(t){function e(e){var n=this;return(n=t.call(this)||this).Aa=e,n}return Pt(e,t),e.prototype.xn=function(t){var e=this,n=[];return this.Dn.forEach((function(r,i){i?n.push(e.Aa.Nn(t,i,e.readTime)):e.Aa.$n(r)})),sa.vn(n)},e.prototype.Ln=function(t,e){return this.Aa.Mn(t,e)},e.prototype.On=function(t,e){return this.Aa.getEntries(t,e)},e}(aa);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Jc=function(){function t(t){this.persistence=t,this.zf=new ra((function(t){return t.canonicalId()})),this.lastRemoteSnapshotVersion=Wi.min(),this.highestTargetId=0,this.Hf=0,this.Yf=new Ou,this.targetCount=0,this.Jf=qa.No()}return t.prototype.js=function(t,e){return this.zf.forEach((function(t,n){return e(n)})),sa.resolve()},t.prototype.Oo=function(t){return sa.resolve(this.lastRemoteSnapshotVersion)},t.prototype.xo=function(t){return sa.resolve(this.Hf)},t.prototype.$o=function(t){return this.highestTargetId=this.Jf.next(),sa.resolve(this.highestTargetId)},t.prototype.Bo=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Hf&&(this.Hf=e),sa.resolve()},t.prototype.Uo=function(t){this.zf.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Jf=new qa(e),this.highestTargetId=e),t.sequenceNumber>this.Hf&&(this.Hf=t.sequenceNumber)},t.prototype.qo=function(t,e){return this.Uo(e),this.targetCount+=1,sa.resolve()},t.prototype.Wo=function(t,e){return this.Uo(e),sa.resolve()},t.prototype.jo=function(t,e){return this.zf.delete(e.target),this.Yf.ic(e.targetId),this.targetCount-=1,sa.resolve()},t.prototype.$h=function(t,e,n){var r=this,i=0,o=[];return this.zf.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.zf.delete(s),o.push(r.Ko(t,a.targetId)),i++)})),sa.vn(o).next((function(){return i}))},t.prototype.Ho=function(t){return sa.resolve(this.targetCount)},t.prototype.Yo=function(t,e){var n=this.zf.get(e)||null;return sa.resolve(n)},t.prototype.Jo=function(t,e,n){return this.Yf.tc(e,n),sa.resolve()},t.prototype.Zo=function(t,e,n){this.Yf.sc(e,n);var r=this.persistence.oo,i=[];return r&&e.forEach((function(e){i.push(r.So(t,e))})),sa.vn(i)},t.prototype.Ko=function(t,e){return this.Yf.ic(e),sa.resolve()},t.prototype.ea=function(t,e){var n=this.Yf.rc(e);return sa.resolve(n)},t.prototype.Co=function(t,e){return sa.resolve(this.Yf.Co(e))},t}(),th=function(){function t(t){var e=this;this.Xf={},this.ja=new fa(0),this.Da=!1,this.Da=!0,this.oo=t(this),this.Oa=new Jc(this),this.jn=new Za,this.Qn=new Zc(this.jn,(function(t){return e.oo.Zf(t)}))}return t.prototype.start=function(){return Promise.resolve()},t.prototype.hu=function(){return this.Da=!1,Promise.resolve()},Object.defineProperty(t.prototype,"vh",{get:function(){return this.Da},enumerable:!0,configurable:!0}),t.prototype.Ga=function(){},t.prototype.Tu=function(){return this.jn},t.prototype.lu=function(t){var e=this.Xf[t.s()];return e||(e=new Xc(this.jn,this.oo),this.Xf[t.s()]=e),e},t.prototype.du=function(){return this.Oa},t.prototype.fu=function(){return this.Qn},t.prototype.runTransaction=function(t,e,n){var r=this;zs("MemoryPersistence","Starting transaction:",t);var i=new eh(this.ja.next());return this.oo.tT(),n(i).next((function(t){return r.oo.eT(i).next((function(){return t}))})).yn().then((function(t){return i.Un(),t}))},t.prototype.sT=function(t,e){return sa.Sn(Object.values(this.Xf).map((function(n){return function(){return n.Co(t,e)}})))},t}(),eh=function(t){function e(e){var n=this;return(n=t.call(this)||this).va=e,n}return Pt(e,t),e}(ca),nh=function(){function t(t){this.persistence=t,this.iT=new Ou,this.nT=null}return t.rT=function(e){return new t(e)},Object.defineProperty(t.prototype,"hT",{get:function(){if(this.nT)return this.nT;throw Qs()},enumerable:!0,configurable:!0}),t.prototype.Xo=function(t,e,n){return this.iT.Xo(n,e),this.hT.delete(n),sa.resolve()},t.prototype.ta=function(t,e,n){return this.iT.ta(n,e),this.hT.add(n),sa.resolve()},t.prototype.So=function(t,e){return this.hT.add(e),sa.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.iT.ic(e.targetId).forEach((function(t){return n.hT.add(t)}));var r=this.persistence.du();return r.ea(t,e.targetId).next((function(t){t.forEach((function(t){return n.hT.add(t)}))})).next((function(){return r.jo(t,e)}))},t.prototype.tT=function(){this.nT=new Set},t.prototype.eT=function(t){var e=this,n=this.persistence.fu().Ea();return sa.forEach(this.hT,(function(r){return e.oT(t,r).next((function(t){t||n.$n(r)}))})).next((function(){return e.nT=null,n.apply(t)}))},t.prototype.mu=function(t,e){var n=this;return this.oT(t,e).next((function(t){t?n.hT.delete(e):n.hT.add(e)}))},t.prototype.Zf=function(t){return 0},t.prototype.oT=function(t,e){var n=this;return sa.Sn([function(){return sa.resolve(n.iT.Co(e))},function(){return n.persistence.du().Co(t,e)},function(){return n.persistence.sT(t,e)}])},t}(),rh=function(){function t(){}return t.prototype.initialize=function(t){return Mt(this,void 0,void 0,(function(){var e=this;return Lt(this,(function(n){switch(n.label){case 0:return this.qd=this.aT(t),this.persistence=this.uT(t),[4,this.persistence.start()];case 1:return n.sent(),this.cT=this._T(t),this.F_=this.lT(t),this.Nd=this.dT(t),this.hl=this.fT(t),this.TT=this.ET(t),this.qd.V_=function(t){return e.hl.Sd(t,1)},this.Nd.hl=this.hl,[4,this.F_.start()];case 2:return n.sent(),[4,this.qd.start()];case 3:return n.sent(),[4,this.Nd.start()];case 4:return n.sent(),[4,this.Nd.Pl(this.hl.Zd)];case 5:return n.sent(),[2]}}))}))},t.prototype.ET=function(t){return new Qc(this.hl)},t.prototype._T=function(t){return null},t.prototype.lT=function(t){return new Nu(this.persistence,new Yc,t.IT)},t.prototype.uT=function(t){return new th(nh.rT)},t.prototype.dT=function(t){var e=this;return new Nc(this.F_,t.f_,t.br,(function(t){return e.hl.Sd(t,0)}),t.platform.wT())},t.prototype.aT=function(t){return new Bc},t.prototype.fT=function(t){return new zc(this.F_,this.Nd,this.qd,t.IT,t.Ud)},t.prototype.clearPersistence=function(t){throw new Vi(Ui.FAILED_PRECONDITION,"You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.")},t}(),ih=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Pt(e,t),e.prototype.initialize=function(e){return Mt(this,void 0,void 0,(function(){var n=this;return Lt(this,(function(r){switch(r.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return r.sent(),[4,this.persistence.Ka((function(t){return Mt(n,void 0,void 0,(function(){return Lt(this,(function(e){switch(e.label){case 0:return[4,this.hl.Pl(t)];case 1:return e.sent(),this.cT&&(t&&!this.cT.vh?this.cT.start(this.F_):t||this.cT.stop()),[2]}}))}))}))];case 2:return r.sent(),[2]}}))}))},e.prototype.lT=function(t){return new Su(this.persistence,new Yc,t.IT)},e.prototype.fT=function(t){var e=new $c(this.F_,this.Nd,this.qd,t.IT,t.Ud);return this.qd instanceof Lc&&(this.qd.hl=e),e},e.prototype._T=function(t){var e=this.persistence.oo.Vh;return new wa(e,t.br)},e.prototype.uT=function(t){var e=Cu.Iu(t.RT),n=t.platform.yc(t.RT.ii);return new Cu(t.AT.synchronizeTabs,e,t.clientId,t.platform,ba.Eh(t.AT.cacheSizeBytes),t.br,n,this.qd)},e.prototype.aT=function(t){if(t.AT.mT&&t.AT.synchronizeTabs){if(!Lc.Uh(t.platform))throw new Vi(Ui.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var e=Cu.Iu(t.RT);return new Lc(t.br,t.platform,e,t.clientId,t.IT)}return new Bc},e.prototype.clearPersistence=function(t){var e=Cu.Iu(t);return Cu.clearPersistence(e)},e}(rh),oh=function(){function t(t,e,n,r){this.platform=t,this.RT=e,this.credentials=n,this.br=r,this.clientId=Xs.cn()}return t.prototype.start=function(t,e){var n=this;this.PT();var r=new pa,i=new pa,o=!1;return this.credentials.l((function(s){if(!o)return o=!0,zs("FirestoreClient","Initializing. user=",s.uid),n.VT(t,e,s,i).then(r.resolve,r.reject);n.br.$r((function(){return n.ml(s)}))})),this.br.$r((function(){return r.promise})),i.promise},t.prototype.enableNetwork=function(){var t=this;return this.PT(),this.br.enqueue((function(){return t.hl.enableNetwork()}))},t.prototype.VT=function(t,e,n,r){return Mt(this,void 0,void 0,(function(){var i,o,s,a,u=this;return Lt(this,(function(c){switch(c.label){case 0:return c.trys.push([0,3,,4]),[4,this.platform.gT(this.RT)];case 1:return i=c.sent(),o=this.platform.yc(this.RT.ii),s=function(t,e,n){return new Ic(t,e,n)}(i,this.credentials,o),[4,t.initialize({br:this.br,RT:this.RT,platform:this.platform,f_:s,clientId:this.clientId,IT:n,Ud:100,AT:e})];case 2:return c.sent(),this.persistence=t.persistence,this.qd=t.qd,this.F_=t.F_,this.Nd=t.Nd,this.hl=t.hl,this.cT=t.cT,this.pT=t.TT,this.persistence.Ga((function(){return Mt(u,void 0,void 0,(function(){return Lt(this,(function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}}))}))})),r.resolve(),[3,4];case 3:if(a=c.sent(),r.reject(a),!this.yT(a))throw a;return[2,(console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+a),this.VT(new rh,{mT:!1},n,r))];case 4:return[2]}}))}))},t.prototype.yT=function(t){return"FirebaseError"===t.name?t.code===Ui.FAILED_PRECONDITION||t.code===Ui.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},t.prototype.PT=function(){if(this.br.Kr)throw new Vi(Ui.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.ml=function(t){return this.br.th(),zs("FirestoreClient","Credential Changed. Current user: "+t.uid),this.hl.ml(t)},t.prototype.disableNetwork=function(){var t=this;return this.PT(),this.br.enqueue((function(){return t.hl.disableNetwork()}))},t.prototype.terminate=function(){var t=this;return this.br.Jr((function(){return Mt(t,void 0,void 0,(function(){return Lt(this,(function(t){switch(t.label){case 0:return this.cT&&this.cT.stop(),[4,this.Nd.hu()];case 1:return t.sent(),[4,this.qd.hu()];case 2:return t.sent(),[4,this.persistence.hu()];case 3:return t.sent(),this.credentials.T(),[2]}}))}))}))},t.prototype.waitForPendingWrites=function(){var t=this;this.PT();var e=new pa;return this.br.$r((function(){return t.hl._f(e)})),e.promise},t.prototype.listen=function(t,e,n){var r=this;this.PT();var i=new Hc(t,e,n);return this.br.$r((function(){return r.pT.listen(i)})),i},t.prototype.nl=function(t){var e=this;this.bT||this.br.$r((function(){return e.pT.nl(t)}))},t.prototype.vT=function(t){var e=this;return this.PT(),this.br.enqueue((function(){return e.F_.qu(t)})).then((function(t){if(t instanceof $o)return t;if(t instanceof Wo)return null;throw new Vi(Ui.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")}))},t.prototype.ST=function(t){var e=this;return this.PT(),this.br.enqueue((function(){return Mt(e,void 0,void 0,(function(){var e,n,r;return Lt(this,(function(i){switch(i.label){case 0:return[4,this.F_.Wu(t,!0)];case 1:return e=i.sent(),n=new qc(t,e.ju),r=n.Pd(e.documents),[2,n.xn(r,!1).snapshot]}}))}))}))},t.prototype.write=function(t){var e=this;this.PT();var n=new pa;return this.br.$r((function(){return e.hl.write(t,n)})),n.promise},t.prototype.ii=function(){return this.RT.ii},t.prototype.vf=function(t){var e=this;this.PT(),this.br.$r((function(){return e.pT.vf(t),Promise.resolve()}))},t.prototype.Sf=function(t){this.bT||this.pT.Sf(t)},Object.defineProperty(t.prototype,"bT",{get:function(){return this.br.Kr},enumerable:!0,configurable:!0}),t.prototype.transaction=function(t){var e=this;this.PT();var n=new pa;return this.br.$r((function(){return e.hl.runTransaction(e.br,t,n),Promise.resolve()})),n.promise},t}(),sh=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.DT(this.observer.next,t)},t.prototype.error=function(t){this.DT(this.observer.error,t)},t.prototype.CT=function(){this.muted=!0},t.prototype.DT=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ah(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var uh=function(){function t(t,e,n,r){this.firestore=t,this.timestampsInSnapshots=e,this.FT=n,this.converter=r}return t.prototype.NT=function(t){switch(co(t)){case 0:return null;case 1:return t.booleanValue;case 2:return mo(t.integerValue||t.doubleValue);case 3:return this.kT(t.timestampValue);case 4:return this.$T(t);case 5:return t.stringValue;case 6:return new Ju(Ao(t.bytesValue));case 7:return this.MT(t.referenceValue);case 8:return this.LT(t.geoPointValue);case 9:return this.OT(t.arrayValue);case 10:return this.xT(t.mapValue);default:throw Qs()}},t.prototype.xT=function(t){var e=this,n={};return to(t.fields||{},(function(t,r){n[t]=e.NT(r)})),n},t.prototype.LT=function(t){return new uc(mo(t.latitude),mo(t.longitude))},t.prototype.OT=function(t){var e=this;return(t.values||[]).map((function(t){return e.NT(t)}))},t.prototype.$T=function(t){switch(this.FT){case"previous":var e=function t(e){var n=e.mapValue.fields.__previous_value__;return so(n)?t(n):n}(t);return null==e?null:this.NT(e);case"estimate":return this.kT(ao(t));default:return null}},t.prototype.kT=function(t){var e=yo(t),n=new $i(e.seconds,e.nanos);return this.timestampsInSnapshots?n:n.toDate()},t.prototype.MT=function(t){var e=Hi.K(t);Hs(Vs(e));var n=new na(e.get(1),e.get(3)),r=new Zi(e.$(5));return n.isEqual(this.firestore.Nc)||$s("Document "+r+" contains a document reference within a different database ("+n.projectId+"/"+n.database+") which is not supported. It will be treated as a reference in the current database ("+this.firestore.Nc.projectId+"/"+this.firestore.Nc.database+") instead."),new dh(r,this.firestore,this.converter)},t}(),ch=ba.Rh,hh=function(){function t(t){var e,n;if(void 0===t.host){if(void 0!==t.ssl)throw new Vi(Ui.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else Uu("settings","non-empty string","host",t.host),this.host=t.host,Vu("settings","boolean","ssl",t.ssl),this.ssl=null===(e=t.ssl)||void 0===e||e;if($u("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),Vu("settings","object","credentials",t.credentials),this.credentials=t.credentials,Vu("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),!0===t.timestampsInSnapshots?$s("The setting 'timestampsInSnapshots: true' is no longer required and should be removed."):!1===t.timestampsInSnapshots&&$s("Support for 'timestampsInSnapshots: false' will be removed soon. You must update your code to handle Timestamp objects."),this.timestampsInSnapshots=null===(n=t.timestampsInSnapshots)||void 0===n||n,Vu("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=ba.mh;else{if(t.cacheSizeBytes!==ch&&t.cacheSizeBytes<ba.Ah)throw new Vi(Ui.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+ba.Ah);this.cacheSizeBytes=t.cacheSizeBytes}Vu("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.forceLongPolling=void 0!==t.experimentalForceLongPolling&&t.experimentalForceLongPolling}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.forceLongPolling===t.forceLongPolling},t}(),lh=function(){function t(e,n,r){var i=this;if(void 0===r&&(r=new rh),this.BT=null,this.qT=new ya,this.INTERNAL={delete:function(){return Mt(i,void 0,void 0,(function(){return Lt(this,(function(t){switch(t.label){case 0:return this.UT(),[4,this.QT.terminate()];case 1:return t.sent(),[2]}}))}))}},"object"==typeof e.options){var o=e;this.BT=o,this.Nc=t.WT(o),this.jT=o.name,this.KT=new Gi(n)}else{var s=e;if(!s.projectId)throw new Vi(Ui.INVALID_ARGUMENT,"Must provide projectId");this.Nc=new na(s.projectId,s.database),this.jT="[DEFAULT]",this.KT=new Fi}this.GT=r,this.zT=new hh({}),this.HT=new dc(this.Nc)}return t.prototype.settings=function(t){Ru("Firestore.settings",arguments,1),Lu("Firestore.settings","object",1,t);var e=new hh(t);if(this.QT&&!this.zT.isEqual(e))throw new Vi(Ui.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this.zT=e,void 0!==e.credentials&&(this.KT=function(t){if(!t)return new Fi;switch(t.type){case"gapi":var e=t.YT;return Hs(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new zi(e,t.V||"0");case"provider":return t.YT;default:throw new Vi(Ui.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},t.prototype.enableNetwork=function(){return this.UT(),this.QT.enableNetwork()},t.prototype.disableNetwork=function(){return this.UT(),this.QT.disableNetwork()},t.prototype.enablePersistence=function(t){var e,n;if(this.QT)throw new Vi(Ui.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var r=!1;return t&&(void 0!==t.experimentalTabSynchronization&&$s("The 'experimentalTabSynchronization' setting will be removed. Use 'synchronizeTabs' instead."),r=null!==(n=null!==(e=t.synchronizeTabs)&&void 0!==e?e:t.experimentalTabSynchronization)&&void 0!==n&&n),this.JT(this.GT,{mT:!0,cacheSizeBytes:this.zT.cacheSizeBytes,synchronizeTabs:r})},t.prototype.clearPersistence=function(){return Mt(this,void 0,void 0,(function(){var t,e=this;return Lt(this,(function(n){if(void 0!==this.QT&&!this.QT.bT)throw new Vi(Ui.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return t=new pa,[2,(this.qT.Gr((function(){return Mt(e,void 0,void 0,(function(){var e,n;return Lt(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),e=this.XT(),[4,this.GT.clearPersistence(e)];case 1:return r.sent(),t.resolve(),[3,3];case 2:return n=r.sent(),t.reject(n),[3,3];case 3:return[2]}}))}))})),t.promise)]}))}))},t.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(t.prototype,"ZT",{get:function(){return this.UT(),this.QT.bT},enumerable:!0,configurable:!0}),t.prototype.waitForPendingWrites=function(){return this.UT(),this.QT.waitForPendingWrites()},t.prototype.onSnapshotsInSync=function(t){if(this.UT(),ah(t))return this.tE(t);Lu("Firestore.onSnapshotsInSync","function",1,t);var e={next:t};return this.tE(e)},t.prototype.tE=function(t){var e=this,n=new sh({next:function(){t.next&&t.next()},error:function(t){throw Qs()}});return this.QT.vf(n),function(){n.CT(),e.QT.Sf(n)}},t.prototype.UT=function(){return this.QT||this.JT(new rh,{mT:!1}),this.QT},t.prototype.XT=function(){return new ea(this.Nc,this.jT,this.zT.host,this.zT.ssl,this.zT.forceLongPolling)},t.prototype.JT=function(t,e){var n=this.XT();return this.QT=new oh(qs.nt(),n,this.KT,this.qT),this.QT.start(t,e)},t.WT=function(t){if(e=t.options,!Object.prototype.hasOwnProperty.call(e,"projectId"))throw new Vi(Ui.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var e,n=t.options.projectId;
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(!n||"string"!=typeof n)throw new Vi(Ui.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new na(n)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.BT)throw new Vi(Ui.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.BT},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){return Ru("Firestore.collection",arguments,1),Lu("Firestore.collection","non-empty string",1,t),this.UT(),new bh(Hi.K(t),this)},t.prototype.doc=function(t){return Ru("Firestore.doc",arguments,1),Lu("Firestore.doc","non-empty string",1,t),this.UT(),dh.eE(Hi.K(t),this)},t.prototype.collectionGroup=function(t){if(Ru("Firestore.collectionGroup",arguments,1),Lu("Firestore.collectionGroup","non-empty string",1,t),t.indexOf("/")>=0)throw new Vi(Ui.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.UT(),new Ah(new Yo(Hi.G,t),this)},t.prototype.runTransaction=function(t){var e=this;return Ru("Firestore.runTransaction",arguments,1),Lu("Firestore.runTransaction","function",1,t),this.UT().transaction((function(n){return t(new fh(e,n))}))},t.prototype.batch=function(){return this.UT(),new ph(this)},Object.defineProperty(t,"logLevel",{get:function(){switch(Gs()){case ht.DEBUG:return"debug";case ht.SILENT:return"silent";default:return"error"}},enumerable:!0,configurable:!0}),t.setLogLevel=function(t){switch(Ru("Firestore.setLogLevel",arguments,1),Lu("Firestore.setLogLevel","non-empty string",1,t),t){case"debug":Ks(ht.DEBUG);break;case"error":Ks(ht.ERROR);break;case"silent":Ks(ht.SILENT);break;default:throw new Vi(Ui.INVALID_ARGUMENT,"Invalid log level: "+t)}},t.prototype.sE=function(){return this.zT.timestampsInSnapshots},t}(),fh=function(){function t(t,e){this.iE=t,this.nE=e}return t.prototype.get=function(t){var e=this;Ru("Transaction.get",arguments,1);var n=Th("Transaction.get",t,this.iE);return this.nE.R_([n.kc]).then((function(t){if(!t||1!==t.length)return Qs();var r=t[0];if(r instanceof Wo)return new yh(e.iE,n.kc,null,!1,!1,n.rE);if(r instanceof $o)return new yh(e.iE,n.kc,r,!1,!1,n.rE);throw Qs()}))},t.prototype.set=function(t,e,n){Mu("Transaction.set",arguments,2,3);var r=Th("Transaction.set",t,this.iE);n=wh("Transaction.set",n);var i=xh(r.rE,e,"Transaction.set"),o=i[0],s=i[1],a=n.merge||n.mergeFields?this.iE.HT.Sc(s,o,n.mergeFields):this.iE.HT.bc(s,o);return this.nE.set(r.kc,a),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return"string"==typeof e||e instanceof tc?(Pu("Transaction.update",arguments,3),r=Th("Transaction.update",t,this.iE),i=this.iE.HT.Cc("Transaction.update",e,n,o)):(Ru("Transaction.update",arguments,2),r=Th("Transaction.update",t,this.iE),i=this.iE.HT.Dc("Transaction.update",e)),this.nE.update(r.kc,i),this},t.prototype.delete=function(t){Ru("Transaction.delete",arguments,1);var e=Th("Transaction.delete",t,this.iE);return this.nE.delete(e.kc),this},t}(),ph=function(){function t(t){this.iE=t,this.hE=[],this.oE=!1}return t.prototype.set=function(t,e,n){Mu("WriteBatch.set",arguments,2,3),this.aE();var r=Th("WriteBatch.set",t,this.iE);n=wh("WriteBatch.set",n);var i=xh(r.rE,e,"WriteBatch.set"),o=i[0],s=i[1],a=n.merge||n.mergeFields?this.iE.HT.Sc(s,o,n.mergeFields):this.iE.HT.bc(s,o);return this.hE=this.hE.concat(a.Rc(r.kc,jo.ft())),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.aE(),"string"==typeof e||e instanceof tc?(Pu("WriteBatch.update",arguments,3),r=Th("WriteBatch.update",t,this.iE),i=this.iE.HT.Cc("WriteBatch.update",e,n,o)):(Ru("WriteBatch.update",arguments,2),r=Th("WriteBatch.update",t,this.iE),i=this.iE.HT.Dc("WriteBatch.update",e)),this.hE=this.hE.concat(i.Rc(r.kc,jo.exists(!0))),this},t.prototype.delete=function(t){Ru("WriteBatch.delete",arguments,1),this.aE();var e=Th("WriteBatch.delete",t,this.iE);return this.hE=this.hE.concat(new Bo(e.kc,jo.ft())),this},t.prototype.commit=function(){return this.aE(),this.oE=!0,this.hE.length>0?this.iE.UT().write(this.hE):Promise.resolve()},t.prototype.aE=function(){if(this.oE)throw new Vi(Ui.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),dh=function(){function t(t,e,n){this.kc=t,this.firestore=e,this.rE=n,this.QT=this.firestore.UT()}return t.eE=function(e,n,r){if(e.length%2!=0)throw new Vi(Ui.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.j()+" has "+e.length);return new t(new Zi(e),n,r)},Object.defineProperty(t.prototype,"id",{get:function(){return this.kc.path.O()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new bh(this.kc.path.M(),this.firestore,this.rE)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.kc.path.j()},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){if(Ru("DocumentReference.collection",arguments,1),Lu("DocumentReference.collection","non-empty string",1,t),!t)throw new Vi(Ui.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=Hi.K(t);return new bh(this.kc.path.child(e),this.firestore)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw Wu("isEqual","DocumentReference",1,e);return this.firestore===e.firestore&&this.kc.isEqual(e.kc)&&this.rE===e.rE},t.prototype.set=function(t,e){Mu("DocumentReference.set",arguments,1,2),e=wh("DocumentReference.set",e);var n=xh(this.rE,t,"DocumentReference.set"),r=n[0],i=n[1],o=e.merge||e.mergeFields?this.firestore.HT.Sc(i,r,e.mergeFields):this.firestore.HT.bc(i,r);return this.QT.write(o.Rc(this.kc,jo.ft()))},t.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"==typeof t||t instanceof tc?(Pu("DocumentReference.update",arguments,2),n=this.firestore.HT.Cc("DocumentReference.update",t,e,r)):(Ru("DocumentReference.update",arguments,1),n=this.firestore.HT.Dc("DocumentReference.update",t)),this.QT.write(n.Rc(this.kc,jo.exists(!0)))},t.prototype.delete=function(){return Ru("DocumentReference.delete",arguments,0),this.QT.write([new Bo(this.kc,jo.ft())])},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Mu("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof t[i]||ah(t[i])||($u("DocumentReference.onSnapshot",r=t[i],["includeMetadataChanges"]),Vu("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return ah(t[i])?n=t[i]:(Lu("DocumentReference.onSnapshot","function",i,t[i]),Bu("DocumentReference.onSnapshot","function",i+1,t[i+1]),Bu("DocumentReference.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.uE(o,n)},t.prototype.uE=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new sh({next:function(t){if(e.next){var r=t.docs.get(n.kc);e.next(new yh(n.firestore,n.kc,r,t.fromCache,t.hasPendingWrites,n.rE))}},error:r}),o=this.QT.listen(Yo.Wt(this.kc.path),i,t);return function(){i.CT(),n.QT.nl(o)}},t.prototype.get=function(t){var e=this;return Mu("DocumentReference.get",arguments,0,1),Ch("DocumentReference.get",t),new Promise((function(n,r){t&&"cache"===t.source?e.firestore.UT().vT(e.kc).then((function(t){n(new yh(e.firestore,e.kc,t,!0,t instanceof $o&&t.At,e.rE))}),r):e.cE(n,r,t)}))},t.prototype.cE=function(t,e,n){var r=this.uE({includeMetadataChanges:!0,Mf:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?e(new Vi(Ui.UNAVAILABLE,"Failed to get document because the client is offline.")):i.exists&&i.metadata.fromCache&&n&&"server"===n.source?e(new Vi(Ui.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):t(i)},error:e})},t.prototype.withConverter=function(e){return new t(this.kc,this.firestore,e)},t}(),vh=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),yh=function(){function t(t,e,n,r,i,o){this.iE=t,this.kc=e,this._E=n,this.lE=r,this.dE=i,this.rE=o}return t.prototype.data=function(t){if(Mu("DocumentSnapshot.data",arguments,0,1),t=Eh("DocumentSnapshot.data",t),this._E){if(this.rE){var e=new mh(this.iE,this.kc,this._E,this.lE,this.dE);return this.rE.fromFirestore(e,t)}return new uh(this.iE,this.iE.sE(),t.serverTimestamps,void 0).NT(this._E.Mt())}},t.prototype.get=function(t,e){if(Mu("DocumentSnapshot.get",arguments,1,2),e=Eh("DocumentSnapshot.get",e),this._E){var n=this._E.data().field(gc("DocumentSnapshot.get",t));if(null!==n)return new uh(this.iE,this.iE.sE(),e.serverTimestamps,this.rE).NT(n)}},Object.defineProperty(t.prototype,"id",{get:function(){return this.kc.path.O()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new dh(this.kc,this.iE,this.rE)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this._E},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new vh(this.dE,this.lE)},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw Wu("isEqual","DocumentSnapshot",1,e);return this.iE===e.iE&&this.lE===e.lE&&this.kc.isEqual(e.kc)&&(null===this._E?null===e._E:this._E.isEqual(e._E))&&this.rE===e.rE},t}(),mh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Pt(e,t),e.prototype.data=function(e){return t.prototype.data.call(this,e)},e}(yh),Ah=function(){function t(t,e,n){this.fE=t,this.firestore=e,this.rE=n}return t.prototype.where=function(e,n,r){Ru("Query.where",arguments,3),zu("Query.where",3,r);var i,o=function(t,e,n,r){if(!e.some((function(t){return t===r})))throw new Vi(Ui.INVALID_ARGUMENT,"Invalid value "+Ku(r)+" provided to function Query.where() for its "+Hu(2)+" argument. Acceptable values: "+e.join(", "));return r}(0,["<","<=","==",">=",">","array-contains","in","array-contains-any"],0,n),s=gc("Query.where",e);if(s.Y()){if("array-contains"===o||"array-contains-any"===o)throw new Vi(Ui.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o){this.TE(r,o);for(var a=[],u=0,c=r;u<c.length;u++){var h=c[u];a.push(this.EE(h))}i={arrayValue:{values:a}}}else i=this.EE(r)}else"in"!==o&&"array-contains-any"!==o||this.TE(r,o),i=this.firestore.HT.Fc("Query.where",r,"in"===o);var l=Xo.create(s,o,i);return this.IE(l),new t(this.fE.Gt(l),this.firestore,this.rE)},t.prototype.orderBy=function(e,n){var r;if(Mu("Query.orderBy",arguments,1,2),Bu("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r="asc";else{if("desc"!==n)throw new Vi(Ui.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r="desc"}if(null!==this.fE.startAt)throw new Vi(Ui.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this.fE.endAt)throw new Vi(Ui.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var i=gc("Query.orderBy",e),o=new is(i,r);return this.wE(o),new t(this.fE.zt(o),this.firestore,this.rE)},t.prototype.limit=function(e){return Ru("Query.limit",arguments,1),Lu("Query.limit","number",1,e),Qu("Query.limit",1,e),new t(this.fE.Ht(e),this.firestore,this.rE)},t.prototype.limitToLast=function(e){return Ru("Query.limitToLast",arguments,1),Lu("Query.limitToLast","number",1,e),Qu("Query.limitToLast",1,e),new t(this.fE.Yt(e),this.firestore,this.rE)},t.prototype.startAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Pu("Query.startAt",arguments,1);var i=this.RE("Query.startAt",e,n,!0);return new t(this.fE.Jt(i),this.firestore,this.rE)},t.prototype.startAfter=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Pu("Query.startAfter",arguments,1);var i=this.RE("Query.startAfter",e,n,!1);return new t(this.fE.Jt(i),this.firestore,this.rE)},t.prototype.endBefore=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Pu("Query.endBefore",arguments,1);var i=this.RE("Query.endBefore",e,n,!0);return new t(this.fE.Xt(i),this.firestore,this.rE)},t.prototype.endAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Pu("Query.endAt",arguments,1);var i=this.RE("Query.endAt",e,n,!1);return new t(this.fE.Xt(i),this.firestore,this.rE)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw Wu("isEqual","Query",1,e);return this.firestore===e.firestore&&this.fE.isEqual(e.fE)},t.prototype.withConverter=function(e){return new t(this.fE,this.firestore,e)},t.prototype.RE=function(t,e,n,r){if(zu(t,1,e),e instanceof yh){if(n.length>0)throw new Vi(Ui.INVALID_ARGUMENT,"Too many arguments provided to "+t+"().");var i=e;if(!i.exists)throw new Vi(Ui.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");return this.AE(i._E,r)}var o=[e].concat(n);return this.mE(t,o,r)},t.prototype.AE=function(t,e){for(var n=[],r=0,i=this.fE.orderBy;r<i.length;r++){var o=i[r];if(o.field.Y())n.push(go(this.firestore.Nc,t.key));else{var s=t.field(o.field);if(so(s))throw new Vi(Ui.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===s){var a=o.field.j();throw new Vi(Ui.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+a+"' (used as the orderBy) does not exist.")}n.push(s)}}return new rs(n,e)},t.prototype.mE=function(t,e,n){var r=this.fE.xt;if(e.length>r.length)throw new Vi(Ui.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<e.length;o++){var s=e[o];if(r[o].field.Y()){if("string"!=typeof s)throw new Vi(Ui.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof s);if(!this.fE._e()&&-1!==s.indexOf("/"))throw new Vi(Ui.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+t+"() must be a plain document ID, but '"+s+"' contains a slash.");var a=this.fE.path.child(Hi.K(s));if(!Zi.et(a))throw new Vi(Ui.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+t+"() must result in a valid document path, but '"+a+"' is not because it contains an odd number of segments.");var u=new Zi(a);i.push(go(this.firestore.Nc,u))}else{var c=this.firestore.HT.Fc(t,s);i.push(c)}}return new rs(i,n)},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Mu("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof t[i]||ah(t[i])||($u("Query.onSnapshot",r=t[i],["includeMetadataChanges"]),Vu("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),ah(t[i])?n=t[i]:(Lu("Query.onSnapshot","function",i,t[i]),Bu("Query.onSnapshot","function",i+1,t[i+1]),Bu("Query.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.PE(this.fE),this.uE(r,n)},t.prototype.uE=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new sh({next:function(t){e.next&&e.next(new gh(n.firestore,n.fE,t,n.rE))},error:r}),o=this.firestore.UT(),s=o.listen(this.fE,i,t);return function(){i.CT(),o.nl(s)}},t.prototype.PE=function(t){if(t.ae()&&0===t.xt.length)throw new Vi(Ui.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")},t.prototype.get=function(t){var e=this;return Mu("Query.get",arguments,0,1),Ch("Query.get",t),this.PE(this.fE),new Promise((function(n,r){t&&"cache"===t.source?e.firestore.UT().ST(e.fE).then((function(t){n(new gh(e.firestore,e.fE,t,e.rE))}),r):e.cE(n,r,t)}))},t.prototype.cE=function(t,e,n){var r=this.uE({includeMetadataChanges:!0,Mf:!0},{next:function(i){r(),i.metadata.fromCache&&n&&"server"===n.source?e(new Vi(Ui.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):t(i)},error:e})},t.prototype.EE=function(t){if("string"==typeof t){if(""===t)throw new Vi(Ui.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this.fE._e()&&-1!==t.indexOf("/"))throw new Vi(Ui.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+t+"' contains a '/' character.");var e=this.fE.path.child(Hi.K(t));if(!Zi.et(e))throw new Vi(Ui.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return go(this.firestore.Nc,new Zi(e))}if(t instanceof dh){var n=t;return go(this.firestore.Nc,n.kc)}throw new Vi(Ui.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Ku(t)+".")},t.prototype.TE=function(t,e){if(!Array.isArray(t)||0===t.length)throw new Vi(Ui.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Vi(Ui.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if(t.indexOf(null)>=0)throw new Vi(Ui.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(t.filter((function(t){return Number.isNaN(t)})).length>0)throw new Vi(Ui.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")},t.prototype.IE=function(t){if(t instanceof Xo){var e=["array-contains","array-contains-any"],n=["in","array-contains-any"],r=e.indexOf(t.op)>=0,i=n.indexOf(t.op)>=0;if(t.ue()){var o=this.fE.jt();if(null!==o&&!o.isEqual(t.field))throw new Vi(Ui.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+t.field.toString()+"'");var s=this.fE.Kt();null!==s&&this.VE(t.field,s)}else if(i||r){var a=null;if(i&&(a=this.fE.ce(n)),null===a&&r&&(a=this.fE.ce(e)),null!=a)throw a===t.op?new Vi(Ui.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter."):new Vi(Ui.INVALID_ARGUMENT,"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+a.toString()+"' filters.")}}},t.prototype.wE=function(t){if(null===this.fE.Kt()){var e=this.fE.jt();null!==e&&this.VE(e,t.field)}},t.prototype.VE=function(t,e){if(!e.isEqual(t))throw new Vi(Ui.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},t}(),gh=function(){function t(t,e,n,r){this.iE=t,this.gE=e,this.pE=n,this.rE=r,this.yE=null,this.bE=null,this.metadata=new vh(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this.pE.docs.B()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.pE.docs.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;Mu("QuerySnapshot.forEach",arguments,1,2),Lu("QuerySnapshot.forEach","function",1,t),this.pE.docs.forEach((function(r){t.call(e,n.vE(r))}))},Object.defineProperty(t.prototype,"query",{get:function(){return new Ah(this.gE,this.iE,this.rE)},enumerable:!0,configurable:!0}),t.prototype.docChanges=function(t){t&&($u("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),Vu("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this.pE.hs)throw new Vi(Ui.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.yE&&this.bE===e||(this.yE=function(t,e,n,r){if(n.ss.B()){var i=0;return n.docChanges.map((function(e){var o=new mh(t,e.doc.key,e.doc,n.fromCache,n.ns.has(e.doc.key),r);return e.doc,{type:"added",doc:o,oldIndex:-1,newIndex:i++}}))}var o=n.ss;return n.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var i=new mh(t,e.doc.key,e.doc,n.fromCache,n.ns.has(e.doc.key),r),s=-1,a=-1;return 0!==e.type&&(s=o.indexOf(e.doc.key),o=o.delete(e.doc.key)),1!==e.type&&(a=(o=o.add(e.doc)).indexOf(e.doc.key)),{type:Ih(e.type),doc:i,oldIndex:s,newIndex:a}}))}(this.iE,e,this.pE,this.rE),this.bE=e),this.yE},t.prototype.isEqual=function(e){if(!(e instanceof t))throw Wu("isEqual","QuerySnapshot",1,e);return this.iE===e.iE&&this.gE.isEqual(e.gE)&&this.pE.isEqual(e.pE)&&this.rE===e.rE},t.prototype.vE=function(t){return new mh(this.iE,t.key,t,this.metadata.fromCache,this.pE.ns.has(t.key),this.rE)},t}(),bh=function(t){function e(e,n,r){var i=this;if((i=t.call(this,Yo.Wt(e),n,r)||this).SE=e,e.length%2!=1)throw new Vi(Ui.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.j()+" has "+e.length);return i}return Pt(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.fE.path.O()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.fE.path.M();return t.B()?null:new dh(new Zi(t),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.fE.path.j()},enumerable:!0,configurable:!0}),e.prototype.doc=function(t){if(Mu("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=Xs.cn()),Lu("CollectionReference.doc","non-empty string",1,t),""===t)throw new Vi(Ui.INVALID_ARGUMENT,"Document path must be a non-empty string");var e=Hi.K(t);return dh.eE(this.fE.path.child(e),this.firestore,this.rE)},e.prototype.add=function(t){Ru("CollectionReference.add",arguments,1),Lu("CollectionReference.add","object",1,this.rE?this.rE.toFirestore(t):t);var e=this.doc();return e.set(t).then((function(){return e}))},e.prototype.withConverter=function(t){return new e(this.SE,this.firestore,t)},e}(Ah);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wh(t,e){if(void 0===e)return{merge:!1};if($u(t,e,["merge","mergeFields"]),Vu(t,"boolean","merge",e.merge),function(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){if(!(r instanceof Array))throw new Vi(Ui.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+Ku(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new Vi(Ui.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be a string or a FieldPath, but the value at index "+o+" was: "+Ku(r[o]))}(t,"mergeFields",0,r,(function(t){return"string"==typeof t||t instanceof tc}))}(t,0,0,e.mergeFields),void 0!==e.mergeFields&&void 0!==e.merge)throw new Vi(Ui.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Eh(t,e){return void 0===e?{}:($u(t,e,["serverTimestamps"]),qu(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function Ch(t,e){Bu(t,"object",1,e),e&&($u(t,e,["source"]),qu(t,0,"source",e.source,["default","server","cache"]))}function Th(t,e,n){if(e instanceof dh){if(e.firestore!==n)throw new Vi(Ui.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw Wu(t,"DocumentReference",1,e)}function Ih(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Qs()}}function xh(t,e,n){var r;return t?(r=t.toFirestore(e),n="toFirestore() in "+n):r=e,[r,n]}function _h(t,e){function n(){var t="This constructor is private.";throw e&&(t+=" ",t+=e),new Vi(Ui.INVALID_ARGUMENT,t)}return n.prototype=t.prototype,Object.assign(n,t),n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nh,Sh=_h(lh,"Use firebase.firestore() instead."),kh=_h(fh,"Use firebase.firestore().runTransaction() instead."),Oh=_h(ph,"Use firebase.firestore().batch() instead."),Dh=_h(dh,"Use firebase.firestore().doc() instead."),jh=_h(yh),Rh=_h(mh),Ph=_h(Ah),Mh=_h(gh),Lh=_h(bh,"Use firebase.firestore().collection() instead."),Bh=_h(function(){function t(){}return t.delete=function(){return ju("FieldValue.delete",arguments),new rc},t.serverTimestamp=function(){return ju("FieldValue.serverTimestamp",arguments),new ic},t.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Pu("FieldValue.arrayUnion",arguments,1),new oc(t)},t.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Pu("FieldValue.arrayRemove",arguments,1),new sc(t)},t.increment=function(t){return Lu("FieldValue.increment","number",1,t),Ru("FieldValue.increment",arguments,1),new ac(t)},t.prototype.isEqual=function(t){return this===t},t}(),"Use FieldValue.<field>() instead."),Uh=_h(Ju,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),Vh={Firestore:Sh,GeoPoint:uc,Timestamp:$i,Blob:Uh,Transaction:kh,WriteBatch:Oh,DocumentReference:Dh,DocumentSnapshot:jh,Query:Ph,QueryDocumentSnapshot:Rh,QuerySnapshot:Mh,CollectionReference:Lh,FieldPath:tc,FieldValue:Bh,setLogLevel:lh.setLogLevel,CACHE_SIZE_UNLIMITED:ch},qh=function(){function t(){}return t.prototype.x_=function(t){},t.prototype.hu=function(){},t}(),Fh=function(){function t(){var t=this;this.DE=function(){return t.CE()},this.FE=function(){return t.NE()},this.kE=[],this.$E()}return t.prototype.x_=function(t){this.kE.push(t)},t.prototype.hu=function(){window.removeEventListener("online",this.DE),window.removeEventListener("offline",this.FE)},t.prototype.$E=function(){window.addEventListener("online",this.DE),window.addEventListener("offline",this.FE)},t.prototype.CE=function(){zs("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.kE;t<e.length;t++)(0,e[t])(0)},t.prototype.NE=function(){zs("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.kE;t<e.length;t++)(0,e[t])(1)},t.Uh=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Gh=function(){function t(t){this.ME=t.ME,this.LE=t.LE}return t.prototype.t_=function(t){this.OE=t},t.prototype.Hc=function(t){this.xE=t},t.prototype.onMessage=function(t){this.BE=t},t.prototype.close=function(){this.LE()},t.prototype.send=function(t){this.ME(t)},t.prototype.qE=function(){this.OE()},t.prototype.UE=function(t){this.xE(t)},t.prototype.QE=function(t){this.BE(t)},t}(),Kh={BatchGetDocuments:"batchGet",Commit:"commit"},zh="gl-js/ fire/"+Li,$h=function(){function t(t){this.ii=t.ii;var e=t.ssl?"https":"http";this.WE=e+"://"+t.host,this.forceLongPolling=t.forceLongPolling}return t.prototype.jE=function(t,e){if(e)for(var n in e.o)e.o.hasOwnProperty(n)&&(t[n]=e.o[n]);t["X-Goog-Api-Client"]=zh},t.prototype.l_=function(t,e,n){var r=this,i=this.KE(t);return new Promise((function(o,s){var a=new Mi;a.listenOnce(Ri.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case ji.NO_ERROR:var e=a.getResponseJson();zs("Connection","XHR received:",JSON.stringify(e)),o(e);break;case ji.TIMEOUT:zs("Connection",'RPC "'+t+'" timed out'),s(new Vi(Ui.DEADLINE_EXCEEDED,"Request time out"));break;case ji.HTTP_ERROR:var n=a.getStatus();if(zs("Connection",'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var i=function(t){var e=t.toLowerCase().replace("_","-");return Object.values(Ui).indexOf(e)>=0?e:Ui.UNKNOWN}(r.status);s(new Vi(i,r.message))}else s(new Vi(Ui.UNKNOWN,"Server responded with status "+a.getStatus()))}else zs("Connection",'RPC "'+t+'" failed'),s(new Vi(Ui.UNAVAILABLE,"Connection failed."));break;default:Qs()}}finally{zs("Connection",'RPC "'+t+'" completed.')}}));var u=Object.assign({},e);delete u.database;var c=JSON.stringify(u);zs("Connection","XHR sending: ",i+" "+c);var h={"Content-Type":"text/plain"};r.jE(h,n),a.send(i,"POST",c,h,15)}))},t.prototype.d_=function(t,e,n){return this.l_(t,e,n)},t.prototype.e_=function(t,e){var n,r,i=[this.WE,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=Di(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.ii.projectId+"/databases/"+this.ii.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.jE(s.initMessageHeaders,e),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(K())||"object"==typeof navigator&&"ReactNative"===navigator.product||K().indexOf("Electron/")>=0||((r=K()).indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0)||K().indexOf("MSAppHost/")>=0||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(s.httpHeadersOverwriteParam="$httpHeaders");var a=i.join("");zs("Connection","Creating WebChannel: "+a+" "+s);var u=o.createWebChannel(a,s),c=!1,h=!1,l=new Gh({ME:function(t){h?zs("Connection","Not sending because WebChannel is closed:",t):(c||(zs("Connection","Opening WebChannel transport."),u.open(),c=!0),zs("Connection","WebChannel sending:",t),u.send(t))},LE:function(){return u.close()}}),f=function(t,e){u.listen(t,(function(t){try{e(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return f(Pi.EventType.OPEN,(function(){h||zs("Connection","WebChannel transport opened.")})),f(Pi.EventType.CLOSE,(function(){h||(h=!0,zs("Connection","WebChannel transport closed"),l.UE())})),f(Pi.EventType.ERROR,(function(t){h||(h=!0,zs("Connection","WebChannel transport errored:",t),l.UE(new Vi(Ui.UNAVAILABLE,"The operation could not be completed")))})),f(Pi.EventType.MESSAGE,(function(t){var e;if(!h){var n=t.data[0];Hs(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){zs("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=Go[t];if(void 0!==e)return us(e)}(o),a=i.message;void 0===s&&(s=Ui.INTERNAL,a="Unknown error status: "+o+" with message "+i.message),h=!0,l.UE(new Vi(s,a)),u.close()}else zs("Connection","WebChannel received:",n),l.QE(n)}})),setTimeout((function(){l.qE()}),0),l},t.prototype.KE=function(t){var e=Kh[t];return this.WE+"/v1/projects/"+this.ii.projectId+"/databases/"+this.ii.database+"/documents:"+e},t}();
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qs.an(new(function(){function t(){this.oc="undefined"!=typeof atob}return Object.defineProperty(t.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),t.prototype.gT=function(t){return Promise.resolve(new $h(t))},t.prototype.wT=function(){return Fh.Uh()?new Fh:new qh},t.prototype.yc=function(t){return new Us(t,{hi:!0})},t.prototype.un=function(t){return JSON.stringify(t)},t.prototype.atob=function(t){return atob(t)},t.prototype.btoa=function(t){return btoa(t)},t.prototype._n=function(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n},t}())),function(t,e){t.INTERNAL.registerComponent(new ot("firestore",(function(t){return function(t,e){return new lh(t,e,new ih)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},Vh)))}(Nh=jt),Nh.registerVersion("@firebase/firestore","1.14.4")
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;jt.initializeApp({apiKey:"AIzaSyAnt6ca6MRpfkePRv4PgJ_qbYz0GaPlG3c",authDomain:"corona-information-808f4.firebaseapp.com",databaseURL:"https://corona-information-808f4.firebaseio.com",projectId:"corona-information-808f4",storageBucket:"corona-information-808f4.appspot.com",messagingSenderId:"251331616167",appId:"1:251331616167:web:fb3a4db42c43b3e8da6a82",measurementId:"G-R6N0D5V6W3"});const Wh=jt.firestore(),Qh={code:"article.svelte-pwrlyn{background-color:rgba(4, 4, 4, .6);padding:1rem;border-radius:10px;display:grid;max-width:15rem;max-height:20rem}article.svelte-pwrlyn:hover{background-color:rgba(4, 4, 4, .2)}.btn.svelte-pwrlyn{border:1px solid white;background-color:indigo;outline:none;color:white;width:50%;margin:auto;height:2rem;border-radius:30px;box-shadow:20px white;cursor:pointer}.white.svelte-pwrlyn{color:white;text-align:center;font-size:1.8rem}.green.svelte-pwrlyn{color:green}.red.svelte-pwrlyn{color:red}.orange.svelte-pwrlyn{color:orange}",map:'{"version":3,"file":"World.svelte","sources":["World.svelte"],"sourcesContent":["<script>\\n\\texport let item\\n\\texport let addToFavorite\\n\\timport { db } from \\"../firestore.js\\"\\n\\n\\tconst favorites = db.collection(\\"favorotes\\")\\n\\n\\t    let favoritesCountry = []\\n\\n    \\n        favorites.onSnapshot(snap => {\\n        favoritesCountry = snap.docs\\n\\t})\\n\\t\\n\\tconst deleteFavorite = () => {\\n    \\n    \\tdb.collection(\\"favorites\\").doc(favoritesCountry.name).delete().then(function() {\\n    \\t    console.log(\\"Document successfully deleted!\\");\\n    \\t}).catch(function(error) {\\n    \\t    console.error(\\"Error removing document: \\", error);\\n    \\t});\\n\\t}\\n\\n\\tconst found = favoritesCountry.find(fav => fav.name === item.Country)\\n\\n<\/script>\\n\\n\\n<article >\\n\\t<h1 class=\\"white\\">{item.Country}</h1>\\n\\t<p class=\\"text orange\\">Total infected: {item.TotalConfirmed.toString().replace(/\\\\B(?=(\\\\d{3})+(?!\\\\d))/g, \\",\\")}</p>\\n\\t<p class=\\"text red\\">Total deaths: {item.TotalDeaths.toString().replace(/\\\\B(?=(\\\\d{3})+(?!\\\\d))/g, \\",\\")}</p>\\n\\t<p class=\\"text green\\">Total recovered: {item.TotalRecovered.toString().replace(/\\\\B(?=(\\\\d{3})+(?!\\\\d))/g, \\",\\")}</p>\\n\\t{#if found}\\n\\t\\t<button on:click={deleteFavorite(item)} class=\\"btn\\">Remove from favorite</button>\\n\\t{:else}\\n\\t\\t<button on:click={addToFavorite(item)} class=\\"btn\\">Add to favorite</button>\\n\\t{/if}\\n\\n\\n</article>\\t\\t\\n\\n<style>\\n\\tarticle {\\n\\t\\tbackground-color: rgba(4, 4, 4, .6);\\n\\t\\tpadding: 1rem;\\n\\t\\tborder-radius: 10px;\\n\\t\\tdisplay: grid;\\n\\t\\tmax-width: 15rem;\\n\\t\\tmax-height: 20rem;\\n\\t}\\n\\tarticle:hover {\\n\\t\\tbackground-color: rgba(4, 4, 4, .2);\\n\\t}\\n\\t.btn {\\n\\t\\tborder: 1px solid white;\\n\\t\\tbackground-color: indigo;\\n\\t\\toutline: none;\\n\\t\\tcolor: white;\\n\\t\\twidth: 50%;\\n\\t\\tmargin: auto;\\n\\t\\theight: 2rem;;\\n\\t\\tborder-radius: 30px;\\n\\t\\tbox-shadow: 20px white;\\n\\t\\tcursor: pointer;\\n\\t}\\n\\t.white {\\n\\t\\tcolor: white;\\n\\t\\ttext-align: center;\\n\\t\\tfont-size: 1.8rem;\\n\\t}\\n\\t.green {\\n\\t\\tcolor: green;\\n\\t}\\n\\t.red {\\n\\t\\tcolor: red;\\n\\t}\\n\\t.orange {\\n\\t\\tcolor: orange;\\n\\t}\\n</style>"],"names":[],"mappings":"AA2CC,OAAO,cAAC,CAAC,AACR,gBAAgB,CAAE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CACnC,OAAO,CAAE,IAAI,CACb,aAAa,CAAE,IAAI,CACnB,OAAO,CAAE,IAAI,CACb,SAAS,CAAE,KAAK,CAChB,UAAU,CAAE,KAAK,AAClB,CAAC,AACD,qBAAO,MAAM,AAAC,CAAC,AACd,gBAAgB,CAAE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,AACpC,CAAC,AACD,IAAI,cAAC,CAAC,AACL,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,KAAK,CACvB,gBAAgB,CAAE,MAAM,CACxB,OAAO,CAAE,IAAI,CACb,KAAK,CAAE,KAAK,CACZ,KAAK,CAAE,GAAG,CACV,MAAM,CAAE,IAAI,CACZ,MAAM,CAAE,IAAI,CACZ,aAAa,CAAE,IAAI,CACnB,UAAU,CAAE,IAAI,CAAC,KAAK,CACtB,MAAM,CAAE,OAAO,AAChB,CAAC,AACD,MAAM,cAAC,CAAC,AACP,KAAK,CAAE,KAAK,CACZ,UAAU,CAAE,MAAM,CAClB,SAAS,CAAE,MAAM,AAClB,CAAC,AACD,MAAM,cAAC,CAAC,AACP,KAAK,CAAE,KAAK,AACb,CAAC,AACD,IAAI,cAAC,CAAC,AACL,KAAK,CAAE,GAAG,AACX,CAAC,AACD,OAAO,cAAC,CAAC,AACR,KAAK,CAAE,MAAM,AACd,CAAC"}'};var Hh=j((t,e,n,r)=>{let{item:i}=e,{addToFavorite:o}=e;const s=Wh.collection("favorotes");let a=[];s.onSnapshot(t=>{a=t.docs});const u=a.find(t=>t.name===i.Country);return void 0===e.item&&n.item&&void 0!==i&&n.item(i),void 0===e.addToFavorite&&n.addToFavorite&&void 0!==o&&n.addToFavorite(o),t.css.add(Qh),`<article class="svelte-pwrlyn"><h1 class="white svelte-pwrlyn">${_(i.Country)}</h1>\n\t<p class="text orange svelte-pwrlyn">Total infected: ${_(i.TotalConfirmed.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","))}</p>\n\t<p class="text red svelte-pwrlyn">Total deaths: ${_(i.TotalDeaths.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","))}</p>\n\t<p class="text green svelte-pwrlyn">Total recovered: ${_(i.TotalRecovered.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","))}</p>\n\t${u?'<button class="btn svelte-pwrlyn">Remove from favorite</button>':'<button class="btn svelte-pwrlyn">Add to favorite</button>'}\n\n\n</article>`});const Yh={code:"div.svelte-18bpd08{display:grid;background-color:#1b1b30;width:100vw;justify-content:center}section.svelte-18bpd08{display:grid;grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));justify-content:center;gap:2rem;margin:auto;width:70vw;min-height:100vh}.sort.svelte-18bpd08{display:grid;grid-template-columns:100px 100px 100px 100px;gap:10px;width:90vw;margin:auto;justify-content:center}label.svelte-18bpd08{color:white;margin:auto;padding:1rem;text-align:1.9rem}.button.svelte-18bpd08{height:30px;background-color:indigo;color:white;outline:none;cursor:pointer}.searchbar.svelte-18bpd08{align-content:center;width:100vw;text-align:center}.search-input.svelte-18bpd08{border-radius:4px;border:1px solid black;padding:1rem;font-size:20px;margin:15px;outline:none;width:30rem}",map:'{"version":3,"file":"index.svelte","sources":["index.svelte"],"sourcesContent":["<svelte:head>\\n    <title>Corona information</title>\\n</svelte:head>\\n\\n<script>\\n    import {onMount} from \\"svelte\\"\\n    import Loader from \\"../components/Loader.svelte\\"\\n    import World from \\"../components/World.svelte\\"\\n    import {db} from \\"../firestore.js\\"\\n\\n    let world = []\\n    let searched = []\\n    let AllOverWorld\\n\\n    onMount(() => {\\n        fetch(`Corona.json`)\\n            .then(response => response.json())\\n            .then(json => {\\n                // World\\n                world = json.Countries\\n                searched = world\\n                AllOverWorld = json.Global\\n            })\\n            .catch((err) => console.log(err))\\n    })\\n\\n    let order = \\"title\\"\\n    $ : switch (order) {\\n        case \'title\':\\n            searched = world.sort((a, b) => a.Country > b.Country\\n                ? 1\\n                : -1);\\n            break\\n        case \'death\':\\n            searched = world.sort((a, b) => a.TotalDeaths < b.TotalDeaths\\n                ? 1\\n                : -1);\\n            break\\n        case \'infected\':\\n            searched = world.sort((a, b) => a.TotalConfirmed < b.TotalConfirmed\\n                ? 1\\n                : -1);\\n            break\\n        case \'recovered\':\\n            searched = world.sort((a, b) => a.TotalRecovered < b.TotalRecovered\\n                ? 1\\n                : -1);\\n            break\\n    }\\n\\n    let search = \\"\\"\\n    const filterResult = () => {\\n        if (search === \\" \\") {\\n            searched = world\\n        } else {\\n            searched = world.filter(world => world.Country.toLowerCase().includes(search.toLowerCase()))\\n        }\\n    }\\n    const addToFavorite = (item) => {\\n        db\\n            .collection(\\"favorites\\")\\n            .doc(item.Country)\\n            .set({name: item.Country, death: item.TotalDeaths, infected: item.TotalConfirmed, recovered: item.TotalRecovered})\\n    }\\n\\n    const buttons = [\\n        {\\n            order: \\"Title\\",\\n            orderType: \\"title\\"\\n        }, {\\n            order: \\"Death\\",\\n            orderType: \\"death\\"\\n        }, {\\n            order: \\"Infected\\",\\n            orderType: \\"infected\\"\\n        }, {\\n            order: \\"Recovered\\",\\n            orderType: \\"recovered\\"\\n        }\\n    ]\\n<\/script>\\n\\n<div>\\n    <label for=\\"btn\\">Sort by:</label>\\n    <div class=\\"sort\\" id=\\"myDiv\\">\\n        {#each buttons as button}\\n            <button id=\\"btn\\" class=\\"button\\" on:click={() => order = `${button.orderType} `}>{button.order}</button>\\n        {/each}\\n\\n    </div>\\n    <div class=\\"searchbar\\">\\n        <input\\n            autocomplete=\\"off\\"\\n            class=\\"search-input\\"\\n            type=\\"search\\"\\n            placeholder=\\"Search after country\\"\\n            bind:value={search}\\n            on:input|preventDefault={filterResult}/>\\n    </div>\\n    <section>\\n        {#each searched as item}\\n            <World item={item} addToFavorite={addToFavorite}/>\\n        {:else}\\n            <Loader/>\\n        {/each}\\n    </section>\\n\\n</div>\\n\\n<style>\\n\\n    div {\\n        display: grid;\\n        background-color: #1b1b30;\\n        width: 100vw;\\n        justify-content: center;\\n    }\\n    section {\\n        display: grid;\\n        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\\n        justify-content: center;\\n        gap: 2rem;\\n        margin: auto;\\n        width: 70vw;\\n        min-height: 100vh;\\n    }\\n    .sort {\\n        display: grid;\\n        grid-template-columns: 100px 100px 100px 100px;\\n        gap: 10px;\\n        width: 90vw;\\n        margin: auto;\\n        justify-content: center;\\n    }\\n    label {\\n        color: white;\\n        margin: auto;\\n        padding: 1rem;\\n        text-align: 1.9rem;\\n    }\\n    .button {\\n        height: 30px;\\n        background-color: indigo;\\n        color: white;\\n        outline: none;\\n        cursor: pointer;\\n    }\\n    .searchbar {\\n        align-content: center;\\n        width: 100vw;\\n        text-align: center;\\n    }\\n    .search-input {\\n        border-radius: 4px;\\n        border: 1px solid black;\\n        padding: 1rem;\\n        font-size: 20px;\\n        margin: 15px;\\n        outline: none;\\n        width: 30rem;\\n    }\\n\\n</style>"],"names":[],"mappings":"AA+GI,GAAG,eAAC,CAAC,AACD,OAAO,CAAE,IAAI,CACb,gBAAgB,CAAE,OAAO,CACzB,KAAK,CAAE,KAAK,CACZ,eAAe,CAAE,MAAM,AAC3B,CAAC,AACD,OAAO,eAAC,CAAC,AACL,OAAO,CAAE,IAAI,CACb,qBAAqB,CAAE,OAAO,QAAQ,CAAC,CAAC,OAAO,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,CAC3D,eAAe,CAAE,MAAM,CACvB,GAAG,CAAE,IAAI,CACT,MAAM,CAAE,IAAI,CACZ,KAAK,CAAE,IAAI,CACX,UAAU,CAAE,KAAK,AACrB,CAAC,AACD,KAAK,eAAC,CAAC,AACH,OAAO,CAAE,IAAI,CACb,qBAAqB,CAAE,KAAK,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,CAC9C,GAAG,CAAE,IAAI,CACT,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,eAAe,CAAE,MAAM,AAC3B,CAAC,AACD,KAAK,eAAC,CAAC,AACH,KAAK,CAAE,KAAK,CACZ,MAAM,CAAE,IAAI,CACZ,OAAO,CAAE,IAAI,CACb,UAAU,CAAE,MAAM,AACtB,CAAC,AACD,OAAO,eAAC,CAAC,AACL,MAAM,CAAE,IAAI,CACZ,gBAAgB,CAAE,MAAM,CACxB,KAAK,CAAE,KAAK,CACZ,OAAO,CAAE,IAAI,CACb,MAAM,CAAE,OAAO,AACnB,CAAC,AACD,UAAU,eAAC,CAAC,AACR,aAAa,CAAE,MAAM,CACrB,KAAK,CAAE,KAAK,CACZ,UAAU,CAAE,MAAM,AACtB,CAAC,AACD,aAAa,eAAC,CAAC,AACX,aAAa,CAAE,GAAG,CAClB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,KAAK,CACvB,OAAO,CAAE,IAAI,CACb,SAAS,CAAE,IAAI,CACf,MAAM,CAAE,IAAI,CACZ,OAAO,CAAE,IAAI,CACb,KAAK,CAAE,KAAK,AAChB,CAAC"}'};var Xh=j((t,e,n,r)=>{let i,o=[],s=[];var a;a=()=>{fetch("Corona.json").then(t=>t.json()).then(t=>{o=t.Countries,s=o,i=t.Global}).catch(t=>console.log(t))},I().$$.on_mount.push(a);const u=t=>{Wh.collection("favorites").doc(t.Country).set({name:t.Country,death:t.TotalDeaths,infected:t.TotalConfirmed,recovered:t.TotalRecovered})};return t.css.add(Yh),s=o.sort((t,e)=>t.Country>e.Country?1:-1),`${t.head+=""+(t.title="<title>Corona information</title>",""),""}\n\n\n\n<div class="svelte-18bpd08"><label for="btn" class="svelte-18bpd08">Sort by:</label>\n    <div class="sort svelte-18bpd08" id="myDiv">${N([{order:"Title",orderType:"title"},{order:"Death",orderType:"death"},{order:"Infected",orderType:"infected"},{order:"Recovered",orderType:"recovered"}],t=>`<button id="btn" class="button svelte-18bpd08">${_(t.order)}</button>`)}</div>\n    <div class="searchbar svelte-18bpd08"><input autocomplete="off" class="search-input svelte-18bpd08" type="search" placeholder="Search after country"${R("value","",1)}></div>\n    <section class="svelte-18bpd08">${s.length?N(s,e=>""+k(Hh,"World").$$render(t,{item:e,addToFavorite:u},{},{})):""+k(L,"Loader").$$render(t,{},{},{})}</section>\n\n</div>`});const Zh={code:"section.svelte-1yta1ac{display:grid;grid-template-columns:2fr 1fr 1fr 1fr .5fr;gap:1rem;padding:1rem;align-items:center;border-bottom:1px solid #ccc;color:white;width:80vw;margin:auto}button.svelte-1yta1ac{background-color:indigo;color:white;outline:none}.orange.svelte-1yta1ac{color:orange\n    }.red.svelte-1yta1ac{color:red}.green.svelte-1yta1ac{color:green}",map:'{"version":3,"file":"Favorite.svelte","sources":["Favorite.svelte"],"sourcesContent":["<script>\\n    import { db } from \\"../firestore.js\\"\\n    export let favoritesCountry\\n\\n\\n\\n\\n    const deleteFavorite = () => {\\n    \\n    db.collection(\\"favorites\\").doc(favoritesCountry.name).delete().then(function() {\\n        console.log(\\"Document successfully deleted!\\");\\n    }).catch(function(error) {\\n        console.error(\\"Error removing document: \\", error);\\n    });\\n}\\n\\n<\/script>\\n    <section>\\n        <div>{favoritesCountry.name}</div>\\n        <div class=\\"orange\\">{favoritesCountry.infected.toString().replace(/\\\\B(?=(\\\\d{3})+(?!\\\\d))/g, \\",\\")}</div>\\n        <div class=\\"red\\">{favoritesCountry.death.toString().replace(/\\\\B(?=(\\\\d{3})+(?!\\\\d))/g, \\",\\")}</div>\\n        <div class=\\"green\\">{favoritesCountry.recovered.toString().replace(/\\\\B(?=(\\\\d{3})+(?!\\\\d))/g, \\",\\")}</div>\\n        <button on:click={deleteFavorite}>Remove</button>\\n    </section>\\n\\n\\n<style>\\n    section {\\n        display: grid;\\n        grid-template-columns: 2fr 1fr 1fr 1fr .5fr;\\n        gap: 1rem;\\n        padding: 1rem;\\n        align-items: center;\\n        border-bottom: 1px solid #ccc;\\n        color: white;\\n        width: 80vw;\\n        margin: auto;\\n    }\\n\\n    button {\\n        background-color: indigo;\\n        color: white;\\n        outline: none;\\n    }\\n    .orange {\\n        color: orange\\n    }\\n    .red {\\n        color: red;\\n    }\\n    .green {\\n        color: green;\\n    }\\n</style>"],"names":[],"mappings":"AA2BI,OAAO,eAAC,CAAC,AACL,OAAO,CAAE,IAAI,CACb,qBAAqB,CAAE,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAC3C,GAAG,CAAE,IAAI,CACT,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,aAAa,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,CAC7B,KAAK,CAAE,KAAK,CACZ,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,AAChB,CAAC,AAED,MAAM,eAAC,CAAC,AACJ,gBAAgB,CAAE,MAAM,CACxB,KAAK,CAAE,KAAK,CACZ,OAAO,CAAE,IAAI,AACjB,CAAC,AACD,OAAO,eAAC,CAAC,AACL,KAAK,CAAE,MAAM;IACjB,CAAC,AACD,IAAI,eAAC,CAAC,AACF,KAAK,CAAE,GAAG,AACd,CAAC,AACD,MAAM,eAAC,CAAC,AACJ,KAAK,CAAE,KAAK,AAChB,CAAC"}'};var Jh=j((t,e,n,r)=>{let{favoritesCountry:i}=e;return void 0===e.favoritesCountry&&n.favoritesCountry&&void 0!==i&&n.favoritesCountry(i),t.css.add(Zh),`<section class="svelte-1yta1ac"><div>${_(i.name)}</div>\n        <div class="orange svelte-1yta1ac">${_(i.infected.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","))}</div>\n        <div class="red svelte-1yta1ac">${_(i.death.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","))}</div>\n        <div class="green svelte-1yta1ac">${_(i.recovered.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","))}</div>\n        <button class="svelte-1yta1ac">Remove</button>\n    </section>`});const tl={code:".back.svelte-1h4txhv{min-width:100vw;min-height:100vh;background-color:#1b1b30}.white.svelte-1h4txhv{color:white;text-align:center}section.svelte-1h4txhv{display:grid;grid-template-columns:2fr 1fr 1fr 1fr 0.5fr;gap:1rem;padding:1rem;align-items:center;border-bottom:1px solid #ccc;color:white;width:80vw;margin:auto}p.svelte-1h4txhv{text-align:center;color:white}",map:'{"version":3,"file":"favorites.svelte","sources":["favorites.svelte"],"sourcesContent":["<script>\\n\\timport { onMount } from \\"svelte\\"\\n    import { db } from \\"../firestore.js\\"\\n    import Favorite from \\"../components/Favorite.svelte\\"\\n\\n    const favorites = db.collection(\\"favorites\\")\\n\\n    let favoritesCountry = []\\n\\n\\n        favorites.onSnapshot(snap => {\\n        favoritesCountry = snap.docs\\n    })\\n\\n\\n<\/script>\\n\\n    <div class=\\"back\\">\\n       <h1 class=\\"white \\">Favorites</h1>\\n        <section>\\n            <div>Name</div>\\n            <div class=\\"orange\\">Total infected</div>\\n            <div class=\\"red\\">Total deaths</div>\\n            <div class=\\"green\\">Total recovered</div>\\n            <div></div>\\n        </section>\\n        {#each favoritesCountry as favorite}\\n            <Favorite favoritesCountry={favorite.data()}/>\\n        {:else}\\n            <p>You dont have any favorties yet...</p>\\n        {/each}\\n    </div>\\n\\n\\n<style>\\n    .back {\\n        min-width: 100vw;\\n        min-height: 100vh;\\n        background-color: #1b1b30;\\n    }\\n    .white {\\n        color: white;\\n        text-align: center;\\n    }\\n    section{\\n        display: grid;\\n        grid-template-columns: 2fr 1fr 1fr 1fr 0.5fr;\\n        gap: 1rem;\\n        padding: 1rem;\\n        align-items: center;\\n        border-bottom: 1px solid #ccc;\\n        color: white;\\n        width: 80vw;\\n        margin: auto;\\n    }\\n    p {\\n        text-align: center;\\n        color: white;\\n    }\\n</style>"],"names":[],"mappings":"AAmCI,KAAK,eAAC,CAAC,AACH,SAAS,CAAE,KAAK,CAChB,UAAU,CAAE,KAAK,CACjB,gBAAgB,CAAE,OAAO,AAC7B,CAAC,AACD,MAAM,eAAC,CAAC,AACJ,KAAK,CAAE,KAAK,CACZ,UAAU,CAAE,MAAM,AACtB,CAAC,AACD,sBAAO,CAAC,AACJ,OAAO,CAAE,IAAI,CACb,qBAAqB,CAAE,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,CAC5C,GAAG,CAAE,IAAI,CACT,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,aAAa,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,CAC7B,KAAK,CAAE,KAAK,CACZ,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,AAChB,CAAC,AACD,CAAC,eAAC,CAAC,AACC,UAAU,CAAE,MAAM,CAClB,KAAK,CAAE,KAAK,AAChB,CAAC"}'};var el=j((t,e,n,r)=>{const i=Wh.collection("favorites");let o=[];return i.onSnapshot(t=>{o=t.docs}),t.css.add(tl),`<div class="back svelte-1h4txhv"><h1 class="white  svelte-1h4txhv">Favorites</h1>\n        <section class="svelte-1h4txhv"><div>Name</div>\n            <div class="orange">Total infected</div>\n            <div class="red">Total deaths</div>\n            <div class="green">Total recovered</div>\n            <div></div></section>\n        ${o.length?N(o,e=>""+k(Jh,"Favorite").$$render(t,{favoritesCountry:e.data()},{},{})):'<p class="svelte-1h4txhv">You dont have any favorties yet...</p>'}\n    </div>`});const nl={code:"ul.svelte-1frg2tf{margin:0 0 1em 0;line-height:1.5}",map:'{"version":3,"file":"index.svelte","sources":["index.svelte"],"sourcesContent":["<script context=\\"module\\">\\n\\texport function preload({ params, query }) {\\n\\t\\treturn this.fetch(`blog.json`).then(r => r.json()).then(posts => {\\n\\t\\t\\treturn { posts };\\n\\t\\t});\\n\\t}\\n<\/script>\\n\\n<script>\\n\\texport let posts;\\n<\/script>\\n\\n<style>\\n\\tul {\\n\\t\\tmargin: 0 0 1em 0;\\n\\t\\tline-height: 1.5;\\n\\t}\\n</style>\\n\\n<svelte:head>\\n\\t<title>Blog</title>\\n</svelte:head>\\n\\n<h1>Recent posts</h1>\\n\\n<ul>\\n\\t{#each posts as post}\\n\\t\\t\x3c!-- we\'re using the non-standard `rel=prefetch` attribute to\\n\\t\\t\\t\\ttell Sapper to load the data for the page as soon as\\n\\t\\t\\t\\tthe user hovers over the link or taps it, instead of\\n\\t\\t\\t\\twaiting for the \'click\' event --\x3e\\n\\t\\t<li><a rel=\'prefetch\' href=\'blog/{post.slug}\'>{post.title}</a></li>\\n\\t{/each}\\n</ul>"],"names":[],"mappings":"AAaC,EAAE,eAAC,CAAC,AACH,MAAM,CAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CACjB,WAAW,CAAE,GAAG,AACjB,CAAC"}'};var rl=j((t,e,n,r)=>{let{posts:i}=e;return void 0===e.posts&&n.posts&&void 0!==i&&n.posts(i),t.css.add(nl),`${t.head+=""+(t.title="<title>Blog</title>",""),""}\n\n<h1>Recent posts</h1>\n\n<ul class="svelte-1frg2tf">${N(i,t=>`\n\t\t<li><a rel="prefetch" href="${"blog/"+_(t.slug)}">${_(t.title)}</a></li>`)}</ul>`});const il={code:".content.svelte-gnxal1 h2{font-size:1.4em;font-weight:500}.content.svelte-gnxal1 pre{background-color:#f9f9f9;box-shadow:inset 1px 1px 5px rgba(0,0,0,0.05);padding:0.5em;border-radius:2px;overflow-x:auto}.content.svelte-gnxal1 pre code{background-color:transparent;padding:0}.content.svelte-gnxal1 ul{line-height:1.5}.content.svelte-gnxal1 li{margin:0 0 0.5em 0}",map:'{"version":3,"file":"[slug].svelte","sources":["[slug].svelte"],"sourcesContent":["<script context=\\"module\\">\\n\\texport async function preload({ params, query }) {\\n\\t\\t// the `slug` parameter is available because\\n\\t\\t// this file is called [slug].svelte\\n\\t\\tconst res = await this.fetch(`blog/${params.slug}.json`);\\n\\t\\tconst data = await res.json();\\n\\n\\t\\tif (res.status === 200) {\\n\\t\\t\\treturn { post: data };\\n\\t\\t} else {\\n\\t\\t\\tthis.error(res.status, data.message);\\n\\t\\t}\\n\\t}\\n<\/script>\\n\\n<script>\\n\\texport let post;\\n<\/script>\\n\\n<style>\\n\\t/*\\n\\t\\tBy default, CSS is locally scoped to the component,\\n\\t\\tand any unused styles are dead-code-eliminated.\\n\\t\\tIn this page, Svelte can\'t know which elements are\\n\\t\\tgoing to appear inside the {{{post.html}}} block,\\n\\t\\tso we have to use the :global(...) modifier to target\\n\\t\\tall elements inside .content\\n\\t*/\\n\\t.content :global(h2) {\\n\\t\\tfont-size: 1.4em;\\n\\t\\tfont-weight: 500;\\n\\t}\\n\\n\\t.content :global(pre) {\\n\\t\\tbackground-color: #f9f9f9;\\n\\t\\tbox-shadow: inset 1px 1px 5px rgba(0,0,0,0.05);\\n\\t\\tpadding: 0.5em;\\n\\t\\tborder-radius: 2px;\\n\\t\\toverflow-x: auto;\\n\\t}\\n\\n\\t.content :global(pre) :global(code) {\\n\\t\\tbackground-color: transparent;\\n\\t\\tpadding: 0;\\n\\t}\\n\\n\\t.content :global(ul) {\\n\\t\\tline-height: 1.5;\\n\\t}\\n\\n\\t.content :global(li) {\\n\\t\\tmargin: 0 0 0.5em 0;\\n\\t}\\n</style>\\n\\n<svelte:head>\\n\\t<title>{post.title}</title>\\n</svelte:head>\\n\\n<h1>{post.title}</h1>\\n\\n<div class=\'content\'>\\n\\t{@html post.html}\\n</div>\\n"],"names":[],"mappings":"AA4BC,sBAAQ,CAAC,AAAQ,EAAE,AAAE,CAAC,AACrB,SAAS,CAAE,KAAK,CAChB,WAAW,CAAE,GAAG,AACjB,CAAC,AAED,sBAAQ,CAAC,AAAQ,GAAG,AAAE,CAAC,AACtB,gBAAgB,CAAE,OAAO,CACzB,UAAU,CAAE,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAC9C,OAAO,CAAE,KAAK,CACd,aAAa,CAAE,GAAG,CAClB,UAAU,CAAE,IAAI,AACjB,CAAC,AAED,sBAAQ,CAAC,AAAQ,GAAG,AAAC,CAAC,AAAQ,IAAI,AAAE,CAAC,AACpC,gBAAgB,CAAE,WAAW,CAC7B,OAAO,CAAE,CAAC,AACX,CAAC,AAED,sBAAQ,CAAC,AAAQ,EAAE,AAAE,CAAC,AACrB,WAAW,CAAE,GAAG,AACjB,CAAC,AAED,sBAAQ,CAAC,AAAQ,EAAE,AAAE,CAAC,AACrB,MAAM,CAAE,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,AACpB,CAAC"}'};var ol=j((t,e,n,r)=>{let{post:i}=e;return void 0===e.post&&n.post&&void 0!==i&&n.post(i),t.css.add(il),`${t.head+=""+(t.title=`<title>${_(i.title)}</title>`,""),""}\n\n<h1>${_(i.title)}</h1>\n\n<div class="content svelte-gnxal1">${i.html}</div>`});const sl={code:"nav.svelte-1pzq25i{border-bottom:1px solid rgba(255,62,0,0.1);font-weight:300;padding:0 1em;background-color:indigo}ul.svelte-1pzq25i{margin:0;padding:0}ul.svelte-1pzq25i::after{content:'';display:block;clear:both}li.svelte-1pzq25i{display:block;float:left}[aria-current].svelte-1pzq25i{position:relative;display:inline-block}[aria-current].svelte-1pzq25i::after{position:absolute;content:'';width:calc(100% - 1em);height:2px;background-color:white;display:block;bottom:-1px}a.svelte-1pzq25i{text-decoration:none;padding:1em 0.5em;display:block;color:white}",map:'{"version":3,"file":"Nav.svelte","sources":["Nav.svelte"],"sourcesContent":["<script>\\n\\texport let segment;\\n<\/script>\\n\\n<style>\\n\\tnav {\\n\\t\\tborder-bottom: 1px solid rgba(255,62,0,0.1);\\n\\t\\tfont-weight: 300;\\n\\t\\tpadding: 0 1em;\\n\\t\\tbackground-color: indigo;\\n\\t}\\n\\n\\tul {\\n\\t\\tmargin: 0;\\n\\t\\tpadding: 0;\\n\\t}\\n\\n\\t/* clearfix */\\n\\tul::after {\\n\\t\\tcontent: \'\';\\n\\t\\tdisplay: block;\\n\\t\\tclear: both;\\n\\t}\\n\\n\\tli {\\n\\t\\tdisplay: block;\\n\\t\\tfloat: left;\\n\\t}\\n\\n\\t[aria-current] {\\n\\t\\tposition: relative;\\n\\t\\tdisplay: inline-block;\\n\\t}\\n\\n\\t[aria-current]::after {\\n\\t\\tposition: absolute;\\n\\t\\tcontent: \'\';\\n\\t\\twidth: calc(100% - 1em);\\n\\t\\theight: 2px;\\n\\t\\tbackground-color: white;\\n\\t\\tdisplay: block;\\n\\t\\tbottom: -1px;\\n\\t}\\n\\n\\ta {\\n\\t\\ttext-decoration: none;\\n\\t\\tpadding: 1em 0.5em;\\n\\t\\tdisplay: block;\\n\\t\\tcolor: white;\\n\\t}\\n</style>\\n\\n<nav>\\n\\t<ul>\\n\\t\\t<li><a aria-current=\'{segment === undefined ? \\"page\\" : undefined}\' href=\'.\'>All countries</a></li>\\n\\n\\t\\t\x3c!-- for the blog link, we\'re using rel=prefetch so that Sapper prefetches\\n\\t\\t     the blog data when we hover over the link or tap it on a touchscreen --\x3e\\n\\t\\t<li><a rel=prefetch aria-current=\'{segment === \\"favorites\\" ? \\"page\\" : undefined}\' href=\'favorites\'>Favorites</a></li>\\n\\n\\t</ul>\\n</nav>\\n"],"names":[],"mappings":"AAKC,GAAG,eAAC,CAAC,AACJ,aAAa,CAAE,GAAG,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAC3C,WAAW,CAAE,GAAG,CAChB,OAAO,CAAE,CAAC,CAAC,GAAG,CACd,gBAAgB,CAAE,MAAM,AACzB,CAAC,AAED,EAAE,eAAC,CAAC,AACH,MAAM,CAAE,CAAC,CACT,OAAO,CAAE,CAAC,AACX,CAAC,AAGD,iBAAE,OAAO,AAAC,CAAC,AACV,OAAO,CAAE,EAAE,CACX,OAAO,CAAE,KAAK,CACd,KAAK,CAAE,IAAI,AACZ,CAAC,AAED,EAAE,eAAC,CAAC,AACH,OAAO,CAAE,KAAK,CACd,KAAK,CAAE,IAAI,AACZ,CAAC,AAED,CAAC,YAAY,CAAC,eAAC,CAAC,AACf,QAAQ,CAAE,QAAQ,CAClB,OAAO,CAAE,YAAY,AACtB,CAAC,AAED,CAAC,YAAY,gBAAC,OAAO,AAAC,CAAC,AACtB,QAAQ,CAAE,QAAQ,CAClB,OAAO,CAAE,EAAE,CACX,KAAK,CAAE,KAAK,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CACvB,MAAM,CAAE,GAAG,CACX,gBAAgB,CAAE,KAAK,CACvB,OAAO,CAAE,KAAK,CACd,MAAM,CAAE,IAAI,AACb,CAAC,AAED,CAAC,eAAC,CAAC,AACF,eAAe,CAAE,IAAI,CACrB,OAAO,CAAE,GAAG,CAAC,KAAK,CAClB,OAAO,CAAE,KAAK,CACd,KAAK,CAAE,KAAK,AACb,CAAC"}'};var al=j((t,e,n,r)=>{let{segment:i}=e;return void 0===e.segment&&n.segment&&void 0!==i&&n.segment(i),t.css.add(sl),`<nav class="svelte-1pzq25i"><ul class="svelte-1pzq25i"><li class="svelte-1pzq25i"><a${R("aria-current",void 0===i?"page":void 0,0)} href="." class="svelte-1pzq25i">All countries</a></li>\n\n\t\t\n\t\t<li class="svelte-1pzq25i"><a rel="prefetch"${R("aria-current","favorites"===i?"page":void 0,0)} href="favorites" class="svelte-1pzq25i">Favorites</a></li></ul></nav>`});const ul={code:"main.svelte-vc0d0j{position:relative;max-width:56em;background-color:#1b1b30;box-sizing:border-box}",map:'{"version":3,"file":"_layout.svelte","sources":["_layout.svelte"],"sourcesContent":["<script>\\n\\timport Nav from \'../components/Nav.svelte\';\\n\\n\\texport let segment;\\n<\/script>\\n\\n<style>\\n\\tmain {\\n\\t\\tposition: relative;\\n\\t\\tmax-width: 56em;\\n\\t\\tbackground-color: #1b1b30;\\n\\t\\tbox-sizing: border-box;\\n\\t}\\n</style>\\n\\n<Nav {segment}/>\\n\\n<main>\\n\\t<slot></slot>\\n</main>"],"names":[],"mappings":"AAOC,IAAI,cAAC,CAAC,AACL,QAAQ,CAAE,QAAQ,CAClB,SAAS,CAAE,IAAI,CACf,gBAAgB,CAAE,OAAO,CACzB,UAAU,CAAE,UAAU,AACvB,CAAC"}'};var cl=j((t,e,n,r)=>{let{segment:i}=e;return void 0===e.segment&&n.segment&&void 0!==i&&n.segment(i),t.css.add(ul),`${k(al,"Nav").$$render(t,{segment:i},{},{})}\n\n<main class="svelte-vc0d0j">${r.default?r.default({}):""}</main>`});const hl={code:"h1.svelte-8od9u6,p.svelte-8od9u6{margin:0 auto}h1.svelte-8od9u6{font-size:2.8em;font-weight:700;margin:0 0 0.5em 0}p.svelte-8od9u6{margin:1em auto}@media(min-width: 480px){h1.svelte-8od9u6{font-size:4em}}",map:'{"version":3,"file":"_error.svelte","sources":["_error.svelte"],"sourcesContent":["<script>\\n\\texport let status;\\n\\texport let error;\\n\\n\\tconst dev = process.env.NODE_ENV === \'development\';\\n<\/script>\\n\\n<style>\\n\\th1, p {\\n\\t\\tmargin: 0 auto;\\n\\t}\\n\\n\\th1 {\\n\\t\\tfont-size: 2.8em;\\n\\t\\tfont-weight: 700;\\n\\t\\tmargin: 0 0 0.5em 0;\\n\\t}\\n\\n\\tp {\\n\\t\\tmargin: 1em auto;\\n\\t}\\n\\n\\t@media (min-width: 480px) {\\n\\t\\th1 {\\n\\t\\t\\tfont-size: 4em;\\n\\t\\t}\\n\\t}\\n</style>\\n\\n<svelte:head>\\n\\t<title>{status}</title>\\n</svelte:head>\\n\\n<h1>{status}</h1>\\n\\n<p>{error.message}</p>\\n\\n{#if dev && error.stack}\\n\\t<pre>{error.stack}</pre>\\n{/if}\\n"],"names":[],"mappings":"AAQC,gBAAE,CAAE,CAAC,cAAC,CAAC,AACN,MAAM,CAAE,CAAC,CAAC,IAAI,AACf,CAAC,AAED,EAAE,cAAC,CAAC,AACH,SAAS,CAAE,KAAK,CAChB,WAAW,CAAE,GAAG,CAChB,MAAM,CAAE,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,AACpB,CAAC,AAED,CAAC,cAAC,CAAC,AACF,MAAM,CAAE,GAAG,CAAC,IAAI,AACjB,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AAC1B,EAAE,cAAC,CAAC,AACH,SAAS,CAAE,GAAG,AACf,CAAC,AACF,CAAC"}'};var ll=j((t,e,n,r)=>{let{status:i}=e,{error:o}=e;return void 0===e.status&&n.status&&void 0!==i&&n.status(i),void 0===e.error&&n.error&&void 0!==o&&n.error(o),t.css.add(hl),`${t.head+=""+(t.title=`<title>${_(i)}</title>`,""),""}\n\n<h1 class="svelte-8od9u6">${_(i)}</h1>\n\n<p class="svelte-8od9u6">${_(o.message)}</p>\n\n`});const fl=decodeURIComponent,pl={server_routes:[{pattern:/^\/blog\.json$/,handlers:r,params:()=>({})},{pattern:/^\/blog\/([^\/]+?)\.json$/,handlers:i,params:t=>({slug:fl(t[1])})}],pages:[{pattern:/^\/$/,parts:[{name:"index",file:"index.svelte",component:Xh}]},{pattern:/^\/favorites\/?$/,parts:[{name:"favorites",file:"favorites.svelte",component:el}]},{pattern:/^\/blog\/?$/,parts:[{name:"blog",file:"blog/index.svelte",component:rl,preload:function({params:t,query:e}){return this.fetch("blog.json").then(t=>t.json()).then(t=>({posts:t}))}}]},{pattern:/^\/blog\/([^\/]+?)\/?$/,parts:[null,{name:"blog_$slug",file:"blog/[slug].svelte",component:ol,preload:async function({params:t,query:e}){const n=await this.fetch(`blog/${t.slug}.json`),r=await n.json();if(200===n.status)return{post:r};this.error(n.status,r.message)},params:t=>({slug:fl(t[1])})}]}],root:cl,root_preload:()=>{},error:ll},dl="__sapper__/build",vl=[];function yl(t,e=g){let n;const r=[];function i(e){if(function(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}(t,e)&&(t=e,n)){const e=!vl.length;for(let e=0;e<r.length;e+=1){const n=r[e];n[1](),vl.push(n,t)}if(e){for(let t=0;t<vl.length;t+=2)vl[t][0](vl[t+1]);vl.length=0}}}return{set:i,update:function(e){i(e(t))},subscribe:function(o,s=g){const a=[o,s];return r.push(a),1===r.length&&(n=e(i)||g),o(t),()=>{const t=r.indexOf(a);-1!==t&&r.splice(t,1),0===r.length&&(n(),n=null)}}}}var ml=n(0),Al=n(5),gl=n(4),bl=n(9),wl=n(3);const El={};var Cl=j((t,e,n,r)=>{let{stores:i}=e,{error:o}=e,{status:s}=e,{segments:a}=e,{level0:u}=e,{level1:c=null}=e,{notify:h}=e;var l,f,p;return l=h,I().$$.after_update.push(l),f=El,p=i,I().$$.context.set(f,p),void 0===e.stores&&n.stores&&void 0!==i&&n.stores(i),void 0===e.error&&n.error&&void 0!==o&&n.error(o),void 0===e.status&&n.status&&void 0!==s&&n.status(s),void 0===e.segments&&n.segments&&void 0!==a&&n.segments(a),void 0===e.level0&&n.level0&&void 0!==u&&n.level0(u),void 0===e.level1&&n.level1&&void 0!==c&&n.level1(c),void 0===e.notify&&n.notify&&void 0!==h&&n.notify(h),"\n\n\n"+k(cl,"Layout").$$render(t,Object.assign({segment:a[0]},u.props),{},{default:()=>""+(o?""+k(ll,"Error").$$render(t,{error:o,status:s},{},{}):""+k(c.component||S,"svelte:component").$$render(t,Object.assign(c.props),{},{}))})});function Tl(){this._types=Object.create(null),this._extensions=Object.create(null);for(var t=0;t<arguments.length;t++)this.define(arguments[t]);this.define=this.define.bind(this),this.getType=this.getType.bind(this),this.getExtension=this.getExtension.bind(this)}Tl.prototype.define=function(t,e){for(var n in t){var r=t[n].map((function(t){return t.toLowerCase()}));n=n.toLowerCase();for(var i=0;i<r.length;i++){if("*"!=(o=r[i])[0]){if(!e&&o in this._types)throw new Error('Attempt to change mapping for "'+o+'" extension from "'+this._types[o]+'" to "'+n+'". Pass `force=true` to allow this, otherwise remove "'+o+'" from the list of extensions for "'+n+'".');this._types[o]=n}}if(e||!this._extensions[n]){var o=r[0];this._extensions[n]="*"!=o[0]?o:o.substr(1)}}},Tl.prototype.getType=function(t){var e=(t=String(t)).replace(/^.*[/\\]/,"").toLowerCase(),n=e.replace(/^.*\./,"").toLowerCase(),r=e.length<t.length;return(n.length<e.length-1||!r)&&this._types[n]||null},Tl.prototype.getExtension=function(t){return(t=/^\s*([^;\s]*)/.test(t)&&RegExp.$1)&&this._extensions[t.toLowerCase()]||null};var Il=new Tl({"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomsvc+xml":["atomsvc"],"application/bdoc":["bdoc"],"application/ccxml+xml":["ccxml"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/dash+xml":["mpd"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["ecma","es"],"application/emma+xml":["emma"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/font-tdpfr":["pfr"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js","mjs"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s","m4p"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/n-quads":["nq"],"application/n-triples":["nt"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf","owl"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/sieve":["siv","sieve"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-diff+xml":["xdf"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":["*3gpp"],"audio/adpcm":["adp"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/aces":["exr"],"image/apng":["apng"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/ief":["ief"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jpm":["jpm"],"image/jpx":["jpx","jpf"],"image/jxr":["jxr"],"image/ktx":["ktx"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/webp":["webp"],"image/wmf":["wmf"],"message/disposition-notification":["disposition-notification"],"message/global":["u8msg"],"message/global-delivery-status":["u8dsn"],"message/global-disposition-notification":["u8mdn"],"message/global-headers":["u8hdr"],"message/rfc822":["eml","mime"],"model/3mf":["3mf"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/stl":["stl"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["*x3db","x3dbz"],"model/x3d+fastinfoset":["x3db"],"model/x3d+vrml":["*x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"model/x3d-vrml":["x3dv"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["markdown","md"],"text/mathml":["mml"],"text/mdx":["mdx"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]});function xl(t){async function e(t,e,n,r){e.params=t.params(t.pattern.exec(e.path));const i=e.method.toLowerCase(),o="delete"===i?"del":i,s=t.handlers[o];if(s){if(process.env.SAPPER_EXPORT){const{write:t,end:r,setHeader:i}=n,o=[],s={};n.write=function(e){o.push(Buffer.from(e)),t.apply(n,arguments)},n.setHeader=function(t,e){s[t.toLowerCase()]=e,i.apply(n,arguments)},n.end=function(t){t&&o.push(Buffer.from(t)),r.apply(n,arguments),process.send({__sapper__:!0,event:"file",url:e.url,method:e.method,status:n.statusCode,type:s["content-type"],body:Buffer.concat(o).toString()})}}const t=t=>{t?(n.statusCode=500,n.end(t.message)):process.nextTick(r)};try{await s(e,n,t)}catch(e){console.error(e),t(e)}}else process.nextTick(r)}return function(n,r,i){for(const o of t)if(o.pattern.test(n.path))return void e(o,n,r,i);i()}}
/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var _l=function(t,e){if("string"!=typeof t)throw new TypeError("argument str must be a string");for(var n={},r=e||{},i=t.split(Ol),o=r.decode||Sl,s=0;s<i.length;s++){var a=i[s],u=a.indexOf("=");if(!(u<0)){var c=a.substr(0,u).trim(),h=a.substr(++u,a.length).trim();'"'==h[0]&&(h=h.slice(1,-1)),null==n[c]&&(n[c]=jl(h,o))}}return n},Nl=function(t,e,n){var r=n||{},i=r.encode||kl;if("function"!=typeof i)throw new TypeError("option encode is invalid");if(!Dl.test(t))throw new TypeError("argument name is invalid");var o=i(e);if(o&&!Dl.test(o))throw new TypeError("argument val is invalid");var s=t+"="+o;if(null!=r.maxAge){var a=r.maxAge-0;if(isNaN(a))throw new Error("maxAge should be a Number");s+="; Max-Age="+Math.floor(a)}if(r.domain){if(!Dl.test(r.domain))throw new TypeError("option domain is invalid");s+="; Domain="+r.domain}if(r.path){if(!Dl.test(r.path))throw new TypeError("option path is invalid");s+="; Path="+r.path}if(r.expires){if("function"!=typeof r.expires.toUTCString)throw new TypeError("option expires is invalid");s+="; Expires="+r.expires.toUTCString()}r.httpOnly&&(s+="; HttpOnly");r.secure&&(s+="; Secure");if(r.sameSite){switch("string"==typeof r.sameSite?r.sameSite.toLowerCase():r.sameSite){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;case"none":s+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return s},Sl=decodeURIComponent,kl=encodeURIComponent,Ol=/; */,Dl=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function jl(t,e){try{return e(t)}catch(e){return t}}var Rl={parse:_l,serialize:Nl},Pl="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_$",Ml=/[<>\b\f\n\r\t\0\u2028\u2029]/g,Ll=/^(?:do|if|in|for|int|let|new|try|var|byte|case|char|else|enum|goto|long|this|void|with|await|break|catch|class|const|final|float|short|super|throw|while|yield|delete|double|export|import|native|return|switch|throws|typeof|boolean|default|extends|finally|package|private|abstract|continue|debugger|function|volatile|interface|protected|transient|implements|instanceof|synchronized)$/,Bl={"<":"\\u003C",">":"\\u003E","/":"\\u002F","\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"},Ul=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Vl(t){var e=new Map;!function t(n){if("function"==typeof n)throw new Error("Cannot stringify a function");if(e.has(n))e.set(n,e.get(n)+1);else if(e.set(n,1),!ql(n))switch(Gl(n)){case"Number":case"String":case"Boolean":case"Date":case"RegExp":return;case"Array":n.forEach(t);break;case"Set":case"Map":Array.from(n).forEach(t);break;default:var r=Object.getPrototypeOf(n);if(r!==Object.prototype&&null!==r&&Object.getOwnPropertyNames(r).sort().join("\0")!==Ul)throw new Error("Cannot stringify arbitrary non-POJOs");if(Object.getOwnPropertySymbols(n).length>0)throw new Error("Cannot stringify POJOs with symbolic keys");Object.keys(n).forEach((function(e){return t(n[e])}))}}(t);var n=new Map;function r(t){if(n.has(t))return n.get(t);if(ql(t))return Fl(t);var e=Gl(t);switch(e){case"Number":case"String":case"Boolean":return"Object("+r(t.valueOf())+")";case"RegExp":return t.toString();case"Date":return"new Date("+t.getTime()+")";case"Array":var i=t.map((function(e,n){return n in t?r(e):""})),o=0===t.length||t.length-1 in t?"":",";return"["+i.join(",")+o+"]";case"Set":case"Map":return"new "+e+"(["+Array.from(t).map(r).join(",")+"])";default:var s="{"+Object.keys(t).map((function(e){return function(t){return/^[_$a-zA-Z][_$a-zA-Z0-9]*$/.test(t)?t:zl(JSON.stringify(t))}(e)+":"+r(t[e])})).join(",")+"}";return null===Object.getPrototypeOf(t)?Object.keys(t).length>0?"Object.assign(Object.create(null),"+s+")":"Object.create(null)":s}}Array.from(e).filter((function(t){return t[1]>1})).sort((function(t,e){return e[1]-t[1]})).forEach((function(t,e){n.set(t[0],function(t){var e="";do{e=Pl[t%Pl.length]+e,t=~~(t/Pl.length)-1}while(t>=0);return Ll.test(e)?e+"_":e}(e))}));var i=r(t);if(n.size){var o=[],s=[],a=[];return n.forEach((function(t,e){if(o.push(t),ql(e))a.push(Fl(e));else switch(Gl(e)){case"Number":case"String":case"Boolean":a.push("Object("+r(e.valueOf())+")");break;case"RegExp":a.push(e.toString());break;case"Date":a.push("new Date("+e.getTime()+")");break;case"Array":a.push("Array("+e.length+")"),e.forEach((function(e,n){s.push(t+"["+n+"]="+r(e))}));break;case"Set":a.push("new Set"),s.push(t+"."+Array.from(e).map((function(t){return"add("+r(t)+")"})).join("."));break;case"Map":a.push("new Map"),s.push(t+"."+Array.from(e).map((function(t){var e=t[0],n=t[1];return"set("+r(e)+", "+r(n)+")"})).join("."));break;default:a.push(null===Object.getPrototypeOf(e)?"Object.create(null)":"{}"),Object.keys(e).forEach((function(n){s.push(""+t+function(t){return/^[_$a-zA-Z][_$a-zA-Z0-9]*$/.test(t)?"."+t:"["+zl(JSON.stringify(t))+"]"}(n)+"="+r(e[n]))}))}})),s.push("return "+i),"(function("+o.join(",")+"){"+s.join(";")+"}("+a.join(",")+"))"}return i}function ql(t){return Object(t)!==t}function Fl(t){if("string"==typeof t)return function(t){for(var e='"',n=0;n<t.length;n+=1){var r=t.charAt(n),i=r.charCodeAt(0);if('"'===r)e+='\\"';else if(r in Bl)e+=Bl[r];else if(i>=55296&&i<=57343){var o=t.charCodeAt(n+1);e+=i<=56319&&o>=56320&&o<=57343?r+t[++n]:"\\u"+i.toString(16).toUpperCase()}else e+=r}return e+='"'}(t);if(void 0===t)return"void 0";if(0===t&&1/t<0)return"-0";var e=String(t);return"number"==typeof t?e.replace(/^(-)?0\./,"$1."):e}function Gl(t){return Object.prototype.toString.call(t).slice(8,-1)}function Kl(t){return Bl[t]||t}function zl(t){return t.replace(Ml,Kl)}const $l=ml.Readable,Wl=Symbol("buffer"),Ql=Symbol("type");class Hl{constructor(){this[Ql]="";const t=arguments[0],e=arguments[1],n=[];let r=0;if(t){const e=t,i=Number(e.length);for(let t=0;t<i;t++){const i=e[t];let o;o=i instanceof Buffer?i:ArrayBuffer.isView(i)?Buffer.from(i.buffer,i.byteOffset,i.byteLength):i instanceof ArrayBuffer?Buffer.from(i):i instanceof Hl?i[Wl]:Buffer.from("string"==typeof i?i:String(i)),r+=o.length,n.push(o)}}this[Wl]=Buffer.concat(n);let i=e&&void 0!==e.type&&String(e.type).toLowerCase();i&&!/[^\u0020-\u007E]/.test(i)&&(this[Ql]=i)}get size(){return this[Wl].length}get type(){return this[Ql]}text(){return Promise.resolve(this[Wl].toString())}arrayBuffer(){const t=this[Wl],e=t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);return Promise.resolve(e)}stream(){const t=new $l;return t._read=function(){},t.push(this[Wl]),t.push(null),t}toString(){return"[object Blob]"}slice(){const t=this.size,e=arguments[0],n=arguments[1];let r,i;r=void 0===e?0:e<0?Math.max(t+e,0):Math.min(e,t),i=void 0===n?t:n<0?Math.max(t+n,0):Math.min(n,t);const o=Math.max(i-r,0),s=this[Wl].slice(r,r+o),a=new Hl([],{type:arguments[2]});return a[Wl]=s,a}}function Yl(t,e,n){Error.call(this,t),this.message=t,this.type=e,n&&(this.code=this.errno=n.code),Error.captureStackTrace(this,this.constructor)}let Xl;Object.defineProperties(Hl.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}}),Object.defineProperty(Hl.prototype,Symbol.toStringTag,{value:"Blob",writable:!1,enumerable:!1,configurable:!0}),Yl.prototype=Object.create(Error.prototype),Yl.prototype.constructor=Yl,Yl.prototype.name="FetchError";try{Xl=require("encoding").convert}catch(t){}const Zl=Symbol("Body internals"),Jl=ml.PassThrough;function tf(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.size;let i=void 0===r?0:r;var o=n.timeout;let s=void 0===o?0:o;null==t?t=null:nf(t)?t=Buffer.from(t.toString()):rf(t)||Buffer.isBuffer(t)||("[object ArrayBuffer]"===Object.prototype.toString.call(t)?t=Buffer.from(t):ArrayBuffer.isView(t)?t=Buffer.from(t.buffer,t.byteOffset,t.byteLength):t instanceof ml||(t=Buffer.from(String(t)))),this[Zl]={body:t,disturbed:!1,error:null},this.size=i,this.timeout=s,t instanceof ml&&t.on("error",(function(t){const n="AbortError"===t.name?t:new Yl(`Invalid response body while trying to fetch ${e.url}: ${t.message}`,"system",t);e[Zl].error=n}))}function ef(){var t=this;if(this[Zl].disturbed)return tf.Promise.reject(new TypeError("body used already for: "+this.url));if(this[Zl].disturbed=!0,this[Zl].error)return tf.Promise.reject(this[Zl].error);let e=this.body;if(null===e)return tf.Promise.resolve(Buffer.alloc(0));if(rf(e)&&(e=e.stream()),Buffer.isBuffer(e))return tf.Promise.resolve(e);if(!(e instanceof ml))return tf.Promise.resolve(Buffer.alloc(0));let n=[],r=0,i=!1;return new tf.Promise((function(o,s){let a;t.timeout&&(a=setTimeout((function(){i=!0,s(new Yl(`Response timeout while trying to fetch ${t.url} (over ${t.timeout}ms)`,"body-timeout"))}),t.timeout)),e.on("error",(function(e){"AbortError"===e.name?(i=!0,s(e)):s(new Yl(`Invalid response body while trying to fetch ${t.url}: ${e.message}`,"system",e))})),e.on("data",(function(e){if(!i&&null!==e){if(t.size&&r+e.length>t.size)return i=!0,void s(new Yl(`content size at ${t.url} over limit: ${t.size}`,"max-size"));r+=e.length,n.push(e)}})),e.on("end",(function(){if(!i){clearTimeout(a);try{o(Buffer.concat(n,r))}catch(e){s(new Yl(`Could not create Buffer from response body for ${t.url}: ${e.message}`,"system",e))}}}))}))}function nf(t){return"object"==typeof t&&"function"==typeof t.append&&"function"==typeof t.delete&&"function"==typeof t.get&&"function"==typeof t.getAll&&"function"==typeof t.has&&"function"==typeof t.set&&("URLSearchParams"===t.constructor.name||"[object URLSearchParams]"===Object.prototype.toString.call(t)||"function"==typeof t.sort)}function rf(t){return"object"==typeof t&&"function"==typeof t.arrayBuffer&&"string"==typeof t.type&&"function"==typeof t.stream&&"function"==typeof t.constructor&&"string"==typeof t.constructor.name&&/^(Blob|File)$/.test(t.constructor.name)&&/^(Blob|File)$/.test(t[Symbol.toStringTag])}function of(t){let e,n,r=t.body;if(t.bodyUsed)throw new Error("cannot clone body after it is used");return r instanceof ml&&"function"!=typeof r.getBoundary&&(e=new Jl,n=new Jl,r.pipe(e),r.pipe(n),t[Zl].body=e,r=n),r}function sf(t){return null===t?null:"string"==typeof t?"text/plain;charset=UTF-8":nf(t)?"application/x-www-form-urlencoded;charset=UTF-8":rf(t)?t.type||null:Buffer.isBuffer(t)||"[object ArrayBuffer]"===Object.prototype.toString.call(t)||ArrayBuffer.isView(t)?null:"function"==typeof t.getBoundary?"multipart/form-data;boundary="+t.getBoundary():t instanceof ml?null:"text/plain;charset=UTF-8"}function af(t){const e=t.body;return null===e?0:rf(e)?e.size:Buffer.isBuffer(e)?e.length:e&&"function"==typeof e.getLengthSync&&(e._lengthRetrievers&&0==e._lengthRetrievers.length||e.hasKnownLength&&e.hasKnownLength())?e.getLengthSync():null}tf.prototype={get body(){return this[Zl].body},get bodyUsed(){return this[Zl].disturbed},arrayBuffer(){return ef.call(this).then((function(t){return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}))},blob(){let t=this.headers&&this.headers.get("content-type")||"";return ef.call(this).then((function(e){return Object.assign(new Hl([],{type:t.toLowerCase()}),{[Wl]:e})}))},json(){var t=this;return ef.call(this).then((function(e){try{return JSON.parse(e.toString())}catch(e){return tf.Promise.reject(new Yl(`invalid json response body at ${t.url} reason: ${e.message}`,"invalid-json"))}}))},text(){return ef.call(this).then((function(t){return t.toString()}))},buffer(){return ef.call(this)},textConverted(){var t=this;return ef.call(this).then((function(e){return function(t,e){if("function"!=typeof Xl)throw new Error("The package `encoding` must be installed to use the textConverted() function");const n=e.get("content-type");let r,i,o="utf-8";n&&(r=/charset=([^;]*)/i.exec(n));i=t.slice(0,1024).toString(),!r&&i&&(r=/<meta.+?charset=(['"])(.+?)\1/i.exec(i));!r&&i&&(r=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(i),r&&(r=/charset=(.*)/i.exec(r.pop())));!r&&i&&(r=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(i));r&&(o=r.pop(),"gb2312"!==o&&"gbk"!==o||(o="gb18030"));return Xl(t,"UTF-8",o).toString()}(e,t.headers)}))}},Object.defineProperties(tf.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}}),tf.mixIn=function(t){for(const e of Object.getOwnPropertyNames(tf.prototype))if(!(e in t)){const n=Object.getOwnPropertyDescriptor(tf.prototype,e);Object.defineProperty(t,e,n)}},tf.Promise=global.Promise;const uf=/[^\^_`a-zA-Z\-0-9!#$%&'*+.|~]/,cf=/[^\t\x20-\x7e\x80-\xff]/;function hf(t){if(t=""+t,uf.test(t)||""===t)throw new TypeError(t+" is not a legal HTTP header name")}function lf(t){if(t=""+t,cf.test(t))throw new TypeError(t+" is not a legal HTTP header value")}function ff(t,e){e=e.toLowerCase();for(const n in t)if(n.toLowerCase()===e)return n}const pf=Symbol("map");class df{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(this[pf]=Object.create(null),t instanceof df){const e=t.raw(),n=Object.keys(e);for(const t of n)for(const n of e[t])this.append(t,n)}else if(null==t);else{if("object"!=typeof t)throw new TypeError("Provided initializer must be an object");{const e=t[Symbol.iterator];if(null!=e){if("function"!=typeof e)throw new TypeError("Header pairs must be iterable");const n=[];for(const e of t){if("object"!=typeof e||"function"!=typeof e[Symbol.iterator])throw new TypeError("Each header pair must be iterable");n.push(Array.from(e))}for(const t of n){if(2!==t.length)throw new TypeError("Each header pair must be a name/value tuple");this.append(t[0],t[1])}}else for(const e of Object.keys(t)){const n=t[e];this.append(e,n)}}}}get(t){hf(t=""+t);const e=ff(this[pf],t);return void 0===e?null:this[pf][e].join(", ")}forEach(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=vf(this),r=0;for(;r<n.length;){var i=n[r];const o=i[0],s=i[1];t.call(e,s,o,this),n=vf(this),r++}}set(t,e){e=""+e,hf(t=""+t),lf(e);const n=ff(this[pf],t);this[pf][void 0!==n?n:t]=[e]}append(t,e){e=""+e,hf(t=""+t),lf(e);const n=ff(this[pf],t);void 0!==n?this[pf][n].push(e):this[pf][t]=[e]}has(t){return hf(t=""+t),void 0!==ff(this[pf],t)}delete(t){hf(t=""+t);const e=ff(this[pf],t);void 0!==e&&delete this[pf][e]}raw(){return this[pf]}keys(){return mf(this,"key")}values(){return mf(this,"value")}[Symbol.iterator](){return mf(this,"key+value")}}function vf(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"key+value";const n=Object.keys(t[pf]).sort();return n.map("key"===e?function(t){return t.toLowerCase()}:"value"===e?function(e){return t[pf][e].join(", ")}:function(e){return[e.toLowerCase(),t[pf][e].join(", ")]})}df.prototype.entries=df.prototype[Symbol.iterator],Object.defineProperty(df.prototype,Symbol.toStringTag,{value:"Headers",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(df.prototype,{get:{enumerable:!0},forEach:{enumerable:!0},set:{enumerable:!0},append:{enumerable:!0},has:{enumerable:!0},delete:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0}});const yf=Symbol("internal");function mf(t,e){const n=Object.create(Af);return n[yf]={target:t,kind:e,index:0},n}const Af=Object.setPrototypeOf({next(){if(!this||Object.getPrototypeOf(this)!==Af)throw new TypeError("Value of `this` is not a HeadersIterator");var t=this[yf];const e=t.target,n=t.kind,r=t.index,i=vf(e,n);return r>=i.length?{value:void 0,done:!0}:(this[yf].index=r+1,{value:i[r],done:!1})}},Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));function gf(t){const e=Object.assign({__proto__:null},t[pf]),n=ff(t[pf],"Host");return void 0!==n&&(e[n]=e[n][0]),e}Object.defineProperty(Af,Symbol.toStringTag,{value:"HeadersIterator",writable:!1,enumerable:!1,configurable:!0});const bf=Symbol("Response internals"),wf=Al.STATUS_CODES;class Ef{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};tf.call(this,t,e);const n=e.status||200,r=new df(e.headers);if(null!=t&&!r.has("Content-Type")){const e=sf(t);e&&r.append("Content-Type",e)}this[bf]={url:e.url,status:n,statusText:e.statusText||wf[n],headers:r,counter:e.counter}}get url(){return this[bf].url||""}get status(){return this[bf].status}get ok(){return this[bf].status>=200&&this[bf].status<300}get redirected(){return this[bf].counter>0}get statusText(){return this[bf].statusText}get headers(){return this[bf].headers}clone(){return new Ef(of(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected})}}tf.mixIn(Ef.prototype),Object.defineProperties(Ef.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}}),Object.defineProperty(Ef.prototype,Symbol.toStringTag,{value:"Response",writable:!1,enumerable:!1,configurable:!0});const Cf=Symbol("Request internals"),Tf=gl.parse,If=gl.format,xf="destroy"in ml.Readable.prototype;function _f(t){return"object"==typeof t&&"object"==typeof t[Cf]}class Nf{constructor(t){let e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_f(t)?e=Tf(t.url):(e=t&&t.href?Tf(t.href):Tf(""+t),t={});let r=n.method||t.method||"GET";if(r=r.toUpperCase(),(null!=n.body||_f(t)&&null!==t.body)&&("GET"===r||"HEAD"===r))throw new TypeError("Request with GET/HEAD method cannot have body");let i=null!=n.body?n.body:_f(t)&&null!==t.body?of(t):null;tf.call(this,i,{timeout:n.timeout||t.timeout||0,size:n.size||t.size||0});const o=new df(n.headers||t.headers||{});if(null!=i&&!o.has("Content-Type")){const t=sf(i);t&&o.append("Content-Type",t)}let s=_f(t)?t.signal:null;if("signal"in n&&(s=n.signal),null!=s&&!function(t){const e=t&&"object"==typeof t&&Object.getPrototypeOf(t);return!(!e||"AbortSignal"!==e.constructor.name)}(s))throw new TypeError("Expected signal to be an instanceof AbortSignal");this[Cf]={method:r,redirect:n.redirect||t.redirect||"follow",headers:o,parsedURL:e,signal:s},this.follow=void 0!==n.follow?n.follow:void 0!==t.follow?t.follow:20,this.compress=void 0!==n.compress?n.compress:void 0===t.compress||t.compress,this.counter=n.counter||t.counter||0,this.agent=n.agent||t.agent}get method(){return this[Cf].method}get url(){return If(this[Cf].parsedURL)}get headers(){return this[Cf].headers}get redirect(){return this[Cf].redirect}get signal(){return this[Cf].signal}clone(){return new Nf(this)}}function Sf(t){Error.call(this,t),this.type="aborted",this.message=t,Error.captureStackTrace(this,this.constructor)}tf.mixIn(Nf.prototype),Object.defineProperty(Nf.prototype,Symbol.toStringTag,{value:"Request",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(Nf.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}}),Sf.prototype=Object.create(Error.prototype),Sf.prototype.constructor=Sf,Sf.prototype.name="AbortError";const kf=ml.PassThrough,Of=gl.resolve;function Df(t,e){if(!Df.Promise)throw new Error("native promise missing, set fetch.Promise to your favorite alternative");return tf.Promise=Df.Promise,new Df.Promise((function(n,r){const i=new Nf(t,e),o=function(t){const e=t[Cf].parsedURL,n=new df(t[Cf].headers);if(n.has("Accept")||n.set("Accept","*/*"),!e.protocol||!e.hostname)throw new TypeError("Only absolute URLs are supported");if(!/^https?:$/.test(e.protocol))throw new TypeError("Only HTTP(S) protocols are supported");if(t.signal&&t.body instanceof ml.Readable&&!xf)throw new Error("Cancellation of streamed requests with AbortSignal is not supported in node < 8");let r=null;if(null==t.body&&/^(POST|PUT)$/i.test(t.method)&&(r="0"),null!=t.body){const e=af(t);"number"==typeof e&&(r=String(e))}r&&n.set("Content-Length",r),n.has("User-Agent")||n.set("User-Agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"),t.compress&&!n.has("Accept-Encoding")&&n.set("Accept-Encoding","gzip,deflate");let i=t.agent;return"function"==typeof i&&(i=i(e)),n.has("Connection")||i||n.set("Connection","close"),Object.assign({},e,{method:t.method,headers:gf(n),agent:i})}(i),s=("https:"===o.protocol?bl:Al).request,a=i.signal;let u=null;const c=function(){let t=new Sf("The user aborted a request.");r(t),i.body&&i.body instanceof ml.Readable&&i.body.destroy(t),u&&u.body&&u.body.emit("error",t)};if(a&&a.aborted)return void c();const h=function(){c(),p()},l=s(o);let f;function p(){l.abort(),a&&a.removeEventListener("abort",h),clearTimeout(f)}a&&a.addEventListener("abort",h),i.timeout&&l.once("socket",(function(t){f=setTimeout((function(){r(new Yl("network timeout at: "+i.url,"request-timeout")),p()}),i.timeout)})),l.on("error",(function(t){r(new Yl(`request to ${i.url} failed, reason: ${t.message}`,"system",t)),p()})),l.on("response",(function(t){clearTimeout(f);const e=function(t){const e=new df;for(const n of Object.keys(t))if(!uf.test(n))if(Array.isArray(t[n]))for(const r of t[n])cf.test(r)||(void 0===e[pf][n]?e[pf][n]=[r]:e[pf][n].push(r));else cf.test(t[n])||(e[pf][n]=[t[n]]);return e}(t.headers);if(Df.isRedirect(t.statusCode)){const o=e.get("Location"),s=null===o?null:Of(i.url,o);switch(i.redirect){case"error":return r(new Yl("redirect mode is set to error: "+i.url,"no-redirect")),void p();case"manual":if(null!==s)try{e.set("Location",s)}catch(t){r(t)}break;case"follow":if(null===s)break;if(i.counter>=i.follow)return r(new Yl("maximum redirect reached at: "+i.url,"max-redirect")),void p();const o={headers:new df(i.headers),follow:i.follow,counter:i.counter+1,agent:i.agent,compress:i.compress,method:i.method,body:i.body,signal:i.signal,timeout:i.timeout};return 303!==t.statusCode&&i.body&&null===af(i)?(r(new Yl("Cannot follow redirect with body being a readable stream","unsupported-redirect")),void p()):(303!==t.statusCode&&(301!==t.statusCode&&302!==t.statusCode||"POST"!==i.method)||(o.method="GET",o.body=void 0,o.headers.delete("content-length")),n(Df(new Nf(s,o))),void p())}}t.once("end",(function(){a&&a.removeEventListener("abort",h)}));let o=t.pipe(new kf);const s={url:i.url,status:t.statusCode,statusText:t.statusMessage,headers:e,size:i.size,timeout:i.timeout,counter:i.counter},c=e.get("Content-Encoding");if(!i.compress||"HEAD"===i.method||null===c||204===t.statusCode||304===t.statusCode)return u=new Ef(o,s),void n(u);const l={flush:wl.Z_SYNC_FLUSH,finishFlush:wl.Z_SYNC_FLUSH};if("gzip"==c||"x-gzip"==c)return o=o.pipe(wl.createGunzip(l)),u=new Ef(o,s),void n(u);if("deflate"!=c&&"x-deflate"!=c){if("br"==c&&"function"==typeof wl.createBrotliDecompress)return o=o.pipe(wl.createBrotliDecompress()),u=new Ef(o,s),void n(u);u=new Ef(o,s),n(u)}else{t.pipe(new kf).once("data",(function(t){o=8==(15&t[0])?o.pipe(wl.createInflate()):o.pipe(wl.createInflateRaw()),u=new Ef(o,s),n(u)}))}})),function(t,e){const n=e.body;null===n?t.end():rf(n)?n.stream().pipe(t):Buffer.isBuffer(n)?(t.write(n),t.end()):n.pipe(t)}(l,i)}))}function jf(t,e){const n=(r=JSON.parse(l.readFileSync(f.join(dl,"build.json"),"utf-8")),()=>r);var r;const i=(o=Rf(dl),()=>o);var o;const s=l.existsSync(f.join(dl,"service-worker.js")),{server_routes:a,pages:u}=t,c=t.error;function h(t,e,n){console.error(n);e.statusCode=500,e.end("<pre>Internal server error</pre>")}function p(t,e,n,r){d({pattern:null,parts:[{name:null,component:c}]},t,e,n,r||new Error("Unknown error in preload function"))}async function d(r,o,a,u=200,c=null){const l="/service-worker-index.html"===o.path,f=n();a.setHeader("Content-Type","text/html"),a.setHeader("Cache-Control","max-age=600");let d=Array.isArray(f.assets.main)?f.assets.main:[f.assets.main];if(c||l||r.parts.forEach(t=>{t&&(d=d.concat(f.assets[t.name]))}),"rollup"===f.bundler){const t=d.filter(t=>t&&!t.match(/\.map$/)).map(t=>`<${o.baseUrl}/client/${t}>;rel="modulepreload"`).join(", ");a.setHeader("Link",t)}else{const t=d.filter(t=>t&&!t.match(/\.map$/)).map(t=>{const e=/\.css$/.test(t)?"style":"script";return`<${o.baseUrl}/client/${t}>;rel="preload";as="${e}"`}).join(", ");a.setHeader("Link",t)}const v=e(o,a);let y,m;const A={redirect:(t,e)=>{if(y&&(y.statusCode!==t||y.location!==e))throw new Error("Conflicting redirects");e=e.replace(/^\//g,""),y={statusCode:t,location:e}},error:(t,e)=>{m={statusCode:t,message:e}},fetch:(t,e)=>{const n=new gl.URL(t,`http://127.0.0.1:${process.env.PORT}${o.baseUrl?o.baseUrl+"/":""}`);if(e){if("include"===(e=Object.assign({},e)).credentials||"same-origin"===e.credentials&&n.origin==="http://127.0.0.1:"+process.env.PORT){e.headers=Object.assign({},e.headers);const t=Object.assign({},Rl.parse(o.headers.cookie||""),Rl.parse(e.headers.cookie||"")),n=a.getHeader("Set-Cookie");(Array.isArray(n)?n:[n]).forEach(e=>{const n=/([^=]+)=([^;]+)/.exec(e);n&&(t[n[1]]=n[2])});const r=Object.keys(t).map(e=>`${e}=${t[e]}`).join("; ");e.headers.cookie=r}}return Df(n.href,e)}};let g,b,w;try{const e=t.root_preload?t.root_preload.call(A,{host:o.headers.host,path:o.path,query:o.query,params:{}},v):{};b=c?null:r.pattern.exec(o.path);let n=[e];l||(n=n.concat(r.parts.map(t=>t?(w=t.params?t.params(b):{},t.preload?t.preload.call(A,{host:o.headers.host,path:o.path,query:o.query,params:w},v):{}):null))),g=await Promise.all(n)}catch(t){if(c)return h(0,a,t);m={statusCode:500,message:t},g=[]}try{if(y){const t=gl.resolve((o.baseUrl||"")+"/",y.location);return a.statusCode=y.statusCode,a.setHeader("Location",t),void a.end()}if(m)return void p(o,a,m.statusCode,m.message);const t=o.path.split("/").filter(Boolean),e=[t[0]];let n=1;r.parts.forEach((r,i)=>{if(e[n]=t[i+1],!r)return null;n++});const h={stores:{page:{subscribe:yl({host:o.headers.host,path:o.path,query:o.query,params:w}).subscribe},preloading:{subscribe:yl(null).subscribe},session:yl(v)},segments:e,status:c?u:200,error:c?c instanceof Error?c:{message:c}:null,level0:{props:g[0]},level1:{segment:t[0],props:{}}};if(!l){let e=1;for(let n=0;n<r.parts.length;n+=1){const i=r.parts[n];i&&(h["level"+e++]={component:i.component,props:g[n+1]||{},segment:t[n]})}}const{html:d,head:A,css:b}=Cl.render(h),E={preloaded:`[${g.map(t=>Pf(t)).join(",")}]`,session:v&&Pf(v,t=>{throw new Error("Failed to serialize session data: "+t.message)}),error:c&&Pf(h.error)};let C=`__SAPPER__={${[c&&`error:${E.error},status:${u}`,`baseUrl:"${o.baseUrl}"`,E.preloaded&&"preloaded:"+E.preloaded,E.session&&"session:"+E.session].filter(Boolean).join(",")}};`;s&&(C+=`if('serviceWorker' in navigator)navigator.serviceWorker.register('${o.baseUrl}/service-worker.js');`);const T=[].concat(f.assets.main).filter(t=>t&&/\.js$/.test(t))[0],I=`${o.baseUrl}/client/${T}`;if("rollup"===f.bundler)if(f.legacy_assets){const t=`${o.baseUrl}/client/legacy/${f.legacy_assets.main}`;C+=`(function(){try{eval("async function x(){}");var main="${I}"}catch(e){main="${t}"};var s=document.createElement("script");try{new Function("if(0)import('')")();s.src=main;s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="${o.baseUrl}/client/shimport@${f.shimport}.js";s.setAttribute("data-main",main);}document.head.appendChild(s);}());`}else C+=`var s=document.createElement("script");try{new Function("if(0)import('')")();s.src="${I}";s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="${o.baseUrl}/client/shimport@${f.shimport}.js";s.setAttribute("data-main","${I}")}document.head.appendChild(s)`;else C+=`<\/script><script src="${I}">`;let x;if(f.css&&f.css.main){const t=new Set;f.css.main&&t.add(f.css.main),r.parts.forEach(e=>{if(!e)return;const n=f.css.chunks[e.file];n&&n.forEach(e=>{t.add(e)})}),x=Array.from(t).map(t=>`<link rel="stylesheet" href="client/${t}">`).join("")}else x=b&&b.code?`<style>${b.code}</style>`:"";const _=a.locals&&a.locals.nonce?` nonce="${a.locals.nonce}"`:"",N=i().replace("%sapper.base%",()=>`<base href="${o.baseUrl}/">`).replace("%sapper.scripts%",()=>`<script${_}>${C}<\/script>`).replace("%sapper.html%",()=>d).replace("%sapper.head%",()=>`<noscript id='sapper-head-start'></noscript>${A}<noscript id='sapper-head-end'></noscript>`).replace("%sapper.styles%",()=>x);a.statusCode=u,a.end(N)}catch(t){c?h(0,a,t):p(o,a,500,t)}}return function(t,e,n){if("/service-worker-index.html"!==t.path){for(const n of u)if(n.pattern.test(t.path))return void d(n,t,e);p(t,e,404,"Not found")}else{d(u.find(t=>t.pattern.test("/")),t,e)}}}function Rf(t=dl){return l.readFileSync(t+"/template.html","utf-8")}function Pf(t,e){try{return Vl(t)}catch(t){return e&&e(t),null}}function Mf({prefix:t,pathname:e,cache_control:n}){const r=e?t=>t.path===e:e=>e.path.startsWith(t),i=new Map,o=t=>(i.has(t)?i:i.set(t,l.readFileSync(f.join(dl,t)))).get(t);return(t,e,i)=>{if(r(t)){const r=Il.getType(t.path);try{const i=f.posix.normalize(decodeURIComponent(t.path)),s=o(i);e.setHeader("Content-Type",r),e.setHeader("Cache-Control",n),e.end(s)}catch(t){e.statusCode=404,e.end("not found")}}else i()}}function Lf(){}Df.isRedirect=function(t){return 301===t||302===t||303===t||307===t||308===t},Df.Promise=global.Promise;const{PORT:Bf,NODE_ENV:Uf}=process.env,Vf="development"===Uf;u()().use(h()({threshold:0}),s()("static",{dev:Vf}),function(t={}){const{session:e,ignore:n}=t;let r=!1;return function(t,e){const n=e.length;function r(t,i,o,s){if(t>=n)return s();e[t](i,o,()=>r(t+1,i,o,s))}return t?(e,n,i)=>{!function t(e,n){return Array.isArray(n)?n.some(n=>t(e,n)):n instanceof RegExp?n.test(e):"function"==typeof n?n(e):e.startsWith(47===n.charCodeAt(0)?n:"/"+n)}(e.path,t)?r(0,e,n,i):i()}:(t,e,n)=>r(0,t,e,n)}(n,[(t,e,n)=>{if(void 0===t.baseUrl){let{originalUrl:e}=t;"/"===t.url&&"/"!==e[e.length-1]&&(e+="/"),t.baseUrl=e?e.slice(0,-t.url.length):""}!r&&process.send&&(process.send({__sapper__:!0,event:"basepath",basepath:t.baseUrl}),r=!0),void 0===t.path&&(t.path=t.url.replace(/\?.*/,"")),n()},l.existsSync(f.join(dl,"service-worker.js"))&&Mf({pathname:"/service-worker.js",cache_control:"no-cache, no-store, must-revalidate"}),l.existsSync(f.join(dl,"service-worker.js.map"))&&Mf({pathname:"/service-worker.js.map",cache_control:"no-cache, no-store, must-revalidate"}),Mf({prefix:"/client/",cache_control:"max-age=31536000, immutable"}),xl(pl.server_routes),jf(pl,e||Lf)].filter(Boolean))}()).listen(Bf,t=>{t&&console.log("error",t)})}]);